{"title": "DNS 解析器性能比较：CloudFlare vs Google vs Quad9", "create_date": "2018/04/03", "praise_nums": "2", "fav_nums": "0", "comments_nums": "1", "content": "<div class=\"grid-8\">\r\n\r\n\t\t\r\n\t<!-- BEGIN .post -->\r\n<div class=\"post-113809 post type-post status-publish format-standard hentry category-it-tech tag-dns tag-web odd\" id=\"post-113809\">\r\n\t\r\n\t<!-- BEGIN .entry-header -->\r\n\t<div class=\"entry-header\">\r\n\t\r\n\t\t\t\t\r\n\t\t<h1>DNS 解析器性能比较：CloudFlare vs Google vs Quad9</h1>\r\n\t\t\r\n\t\t\t\t\t\t\t\r\n\t</div>\r\n\t<!-- BEGIN .entry-header -->\r\n\t\r\n\t<!-- BEGIN .entry-meta -->\r\n\t<div class=\"entry-meta\">\r\n\t\r\n\t\t<p class=\"entry-meta-hide-on-mobile\">\r\n\r\n            2018/04/03 ·  <a href=\"http://blog.jobbole.com/category/it-tech/\" rel=\"category tag\">IT技术</a>\r\n            \r\n                            · <a href=\"#article-comment\"> 1 评论 </a>\r\n            \r\n\r\n            \r\n             ·  <a href=\"http://blog.jobbole.com/tag/dns/\">DNS</a>, <a href=\"http://blog.jobbole.com/tag/web/\">Web</a>\r\n            \r\n</p>\r\n\r\n<!-- JiaThis Button BEGIN -->\r\n<div class=\"jiathis_style\" style=\"display: block; margin: 0 0px; clear: both;\"><span class=\"jiathis_txt\">分享到：</span>\r\n<a class=\"jiathis_button_tsina\"></a>\r\n<a class=\"jiathis_button_weixin\"></a>\r\n<a class=\"jiathis_button_qzone\"></a>\r\n<a class=\"jiathis_button_fb\"></a>\r\n<a class=\"jiathis_button_douban\"></a>\r\n<a class=\"jiathis_button_readitlater\"></a>\r\n<a class=\"jiathis_button_evernote\"></a>\r\n<a class=\"jiathis_button_ydnote\"></a>\r\n<a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\r\n<a class=\"jiathis_counter_style\"></a>\r\n</div>\r\n<!-- JiaThis Button END -->\r\n\r\n\r\n\t</div>\r\n\t<!-- END .entry-meta -->\r\n\r\n\t<!-- BEGIN .entry -->\r\n\t<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://medium.com/@nykolas.z/dns-resolvers-performance-compared-cloudflare-x-google-x-quad9-x-opendns-149e803734e5\">medium</a>   译文出处：<a target=\"_blank\" href=\"https://www.oschina.net/news/94836/dns-resolvers-performance-compared\">开源中国社区</a>   </div><p>几个月前，我做了一些可用的顶级免费 DNS 解析器之间的性能比较。恰好在 Quad9 发布之后，我试图根据性能决定使用哪一个：Google，OpenDNS，Quad9 等等…</p>\n<p>CloudFlare 是最了解互联网性能的公司之一，最近推出了自己的免费 DNS 解析器。它默认支持基于 TLS 和 HTTPS 上的 DNS。</p>\n<p>现在进行一个更加有趣的测试：Google 的 8.8.8.8，Quad9 的 9.9.9.9 和 CloudFlare 的 1.1.1.1  ，以及OpenDNS 的 208.67.222.222 和一些其他供应商进行比较。</p>\n<h3>供应商测试</h3>\n<p>这些是选择评估的前 8 位免费 DNS 提供商：</p>\n<ul class=\" list-paddingleft-2\">\n<li><strong>Google 8.8.8.8</strong>：私有和未过滤，最受欢迎。</li>\n<li><strong>CloudFlare 1.1.1.1</strong>：私有和未过滤的新玩家。</li>\n<li><strong>Quad 9 9.9.9.9</strong>：私有和安全意识很高的新玩家。</li>\n<li><strong>OpenDNS 208.67.222.222</strong>：阻止恶意网域并提供阻止成人内容的旧玩家。</li>\n<li><strong>Norton DNS 199.85.126.20</strong>：阻止恶意域名并与其防病毒软件集成的旧玩家。</li>\n<li><strong>CleanBrowsing 185.228.168.168</strong>：私有和阻止访问成人内容，新玩家。</li>\n<li><strong>Yandex DNS 77.88.8.7</strong>：阻止恶意域名的旧玩家，在俄罗斯非常受欢迎。</li>\n<li><strong>Comodo DNS 8.26.56.26</strong>：阻止恶意域名的旧玩家。</li>\n</ul>\n<p>这是他们之间关于隐私选项的快速功能分解：</p>\n<p><img src=\"https://static.oschina.net/uploads/space/2018/0402/175742_67ED_3703517.png\" alt=\"\"></p>\n<h3>地点</h3>\n<p>从全球18个地点运行测试。主要使用 VPS 提供商和一些宽带位置尝试从尽可能多的地方查询他们的DNS。它会告诉我们它们的连接程度如何，数据中心的位置以及某个人在该领域的经验有多接近。选择的地点：</p>\n<ul class=\" list-paddingleft-2\">\n<li><strong>北美</strong>：圣地亚哥，洛杉矶，纽约，多伦多，蒙特利尔，亚特兰大，达拉斯，弗里蒙特，旧金山</li>\n<li><strong>欧洲</strong>：伦敦，巴黎，阿姆斯特丹，法兰克福</li>\n<li><strong>亚洲</strong>：东京，新加坡，班加罗尔（印度），悉尼，布里斯班（澳大利亚）</li>\n<li><strong>南美洲</strong>：圣保罗</li>\n</ul>\n<h3>结果摘要</h3>\n<p>测试非常简单，针对不同流行的域名（google, facebook, twitter, gmail 等）在整个一小时内执行了 70 次DNS 查询。对每个位置的所有请求进行平均，以获得每个 DNS 解析程序的整体性能指标。</p>\n<h4>TLDR /摘要</h4>\n<ul class=\" list-paddingleft-2\">\n<li>所有供应商（Yandex 除外）在北美和欧洲表现非常好。他们在美国，加拿大和欧洲的响应时间均小于 15 毫秒。然而，亚洲和南美洲在总体平均数上有所不同，因为一些提供商在那里连接不好。</li>\n<li>CloudFlare 是所有位置中最快的 DNS。它在全球的平均值为 4.98 毫秒，令人惊叹。</li>\n<li>谷歌和 Quad9 分别接近第二和第三。Quad9 在北美和欧洲比谷歌速度快，但在亚洲/南美洲表现不佳。</li>\n<li>CloudFlare 在任何地方都有强大的存在。尽管 Google 和 Quad9 在某些地方的响应时间很高，但CloudFlare 在各个地方都表现良好。</li>\n<li>Yandex 仅适用于俄罗斯。它不像其他提供商那样使用 Anycast，并且在任何地方都非常缓慢。</li>\n<li>CleanBrowsing 是成人（色情）内容过滤的最快速的提供商。</li>\n</ul>\n<h4>全球平均</h4>\n<blockquote><p>＃1 CloudFlare：4.98 ms<br>\n＃2 Google：16.44 ms<br>\n＃3 Quad9：18.25 ms<br>\n＃4 CleanBrowsing：19.14 ms<br>\n＃5 Norton：34.75 ms<br>\n＃6 OpenDNS：46.51 ms<br>\n＃7 Comodo：71.90<br>\n＃8 Yandex：169.91</p></blockquote>\n<h4>北美平均水平</h4>\n<blockquote><p>＃1 CloudFlare：3.93 ms<br>\n＃2 Quad9：7.21 ms<br>\n＃3 Norton：8.32 ms<br>\n＃4 Google：8.53 ms<br>\n＃5 CleanBrowsing：11.83 ms<br>\n＃6 OpenDNS：14.66 ms<br>\n＃7 Comodo：25.91 ms<br>\n＃8 Yandex：119.09 ms</p></blockquote>\n<h4>欧洲平均</h4>\n<blockquote><p>＃1 CloudFlare：2.96<br>\n＃2 Quad9：4.35<br>\n＃3 CleanBrowsing：5.74<br>\n＃4 Google：7.17<br>\n＃5 OpenDNS：8.99<br>\n＃6 Norton：10.35<br>\n＃7 Comodo：13.06<br>\n＃8 Yandex：35.74</p></blockquote>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113809\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113809votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113809\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>\r\n\t<!-- END .entry -->\r\n\r\n\r\n<script type=\"text/javascript\">\r\nvar jiathis_config={\r\n\tdata_track_clickback:false,\r\n\ttitle:\"分享从伯乐在线看到的一篇好文章 \",\r\n\tsummary:\"《DNS 解析器性能比较：CloudFlare vs Google vs Quad9》\",\r\n\tpic:\"http://jbcdn2.b0.upaiyun.com/2015/03/912be8d20ca700194c3aced111cc833d1.jpg\",\r\n\tappkey:{\r\n         \"tsina\": 1473879058    },\r\n\tralateuid:{\r\n\t\t\"tsina\": 1670481425\t},\r\n\thideMore:false\r\n}\r\n</script>\r\n<script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js?uid=1745061\" charset=\"utf-8\"></script>\r\n<!-- JiaThis Button END -->\r\n\t\t\t<div class=\"textwidget\"><p><a href=\"http://group.jobbole.com/22945/\" target=\"_blank\"><img src=\"http://wx1.sinaimg.cn/mw690/bfdcef89gy1fq547hqqaij20h803cgm9.jpg\"></a></p>\n</div>\n\t\t\r\n</div>\r\n<!-- END .post -->\r\n            <div style=\"text-align: left;\">\r\n            <h3>相关文章</h3>\r\n            <ul style=\"font-size: 13px; list-style: disc inside;\">\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"Nginx 教程（3）：SSL 设置\" target=\"_blank\" href=\"http://blog.jobbole.com/113654/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">Nginx 教程（3）：SSL 设置</a>\r\n                                            </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"Nginx 教程（2）：性能\" target=\"_blank\" href=\"http://blog.jobbole.com/113572/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">Nginx 教程（2）：性能</a>\r\n                                            </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"Nginx 教程 （1）：基本概念\" target=\"_blank\" href=\"http://blog.jobbole.com/113555/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">Nginx 教程 （1）：基本概念</a>\r\n                         · <a href=\"http://blog.jobbole.com/113555/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 2</a>                    </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"Facebook 这类网站如何处理数十亿请求并保持高可用性的？\" target=\"_blank\" href=\"http://blog.jobbole.com/111996/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">Facebook 这类网站如何处理数十亿请求并保持高可用性的？</a>\r\n                         · <a href=\"http://blog.jobbole.com/111996/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 1</a>                    </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"Linux DNS 服务器安装、配置和维护\" target=\"_blank\" href=\"http://blog.jobbole.com/110903/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">Linux DNS 服务器安装、配置和维护</a>\r\n                         · <a href=\"http://blog.jobbole.com/110903/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 1</a>                    </span>\r\n                    </li>\r\n                            </ul>\r\n        </div>\r\n    \r\n    \n<div style=\"text-align: left;\">\n    <h3>可能感兴趣的话题</h3>\n    <ul style=\"font-size: 13px; list-style: disc inside;\">\n                        <li>\n                    <a href=\"http://group.jobbole.com/33039/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"Eng  ---  React ,Vue ,Angular全家桶套餐外的另一种超轻量级实现方式 (16kb)\" target=\"_blank\">Eng  ---  React ,Vue ,Angular全家桶套餐外的另一种超轻量级实...</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/33038/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"28岁刚入门，靠谱不？\" target=\"_blank\">28岁刚入门，靠谱不？</a>\n                     · <a href=\"http://group.jobbole.com/33038/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 7</a>                </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32985/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"工作四年，该如何晋级架构师？\" target=\"_blank\">工作四年，该如何晋级架构师？</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32958/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"java 的nio和网络编程nio 的区别\" target=\"_blank\">java 的nio和网络编程nio 的区别</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32933/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"工作压力大，然后出错多。。然后工作压力大。该怎么调整自己的状态……\" target=\"_blank\">工作压力大，然后出错多。。然后工作压力大。该怎么调整自己的状态……</a>\n                     · <a href=\"http://group.jobbole.com/32933/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 5</a>                </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32879/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"是去北上广深闯几年还是留在二线城市？\" target=\"_blank\">是去北上广深闯几年还是留在二线城市？</a>\n                     · <a href=\"http://group.jobbole.com/32879/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 2</a>                </li>\n                </ul>\n</div>\r\n\t\n            <div id=\"article-comment\" class=\"dot-box center-align\">\n\n                        <a href=\"http://www.jobbole.com/login?redirect=http://blog.jobbole.com/113809/\"><button type=\"button\" class=\"btn btn-non-transparent\">登录后评论</button></a>\n            \n            <a target=\"_blank\" href=\"http://www.jobbole.com/register\"><button type=\"button\" class=\"btn btn-primary\">新用户注册</button></a>\n\n            <br><br>\n            <span>直接登录</span>\n            <style type=\"text/css\">.t_login_text{margin:0; padding:0;}.t_login_button{margin:0; padding: 5px 0;}.t_login_button a{margin:0; padding-right:3px; line-height:25px}.t_login_button img{display:inline; border:none;}</style><!-- 使用社交帐号登录 来自 WordPress连接微博 插件 --><span class=\"connectBox1 t_login_button\"><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=weixin&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113809%2F\" title=\"微信\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_weixin.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=qzone&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113809%2F\" title=\"QQ\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_qzone.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=sina&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113809%2F\" title=\"新浪微博\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_sina.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=douban&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113809%2F\" title=\"豆瓣\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_douban.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=github&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113809%2F\" title=\"GitHub\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_github.png\"></a></span>        </div>\n    \n\n    <div id=\"comment_list\" class=\"comments\">\n\n                    <h5 id=\"comments\" class=\"sub-title\"><i class=\"glyphicon\"></i>最新评论</h5>\n            <ul class=\"cmnt-list\">\n\n                        <li id=\"comment-162379\" class=\"comment cmnt odd\">\n    \n    <div class=\"cmnt-box\">\n        <div class=\"cmnt-header\">\n                            <a href=\"http://www.jobbole.com/members/evolighting\" class=\"cmnt-img\"><img width=\"37\" height=\"37\" src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\" alt=\"\"></a>\n                <div class=\"cmnt-meta\">\n                    <span><a href=\"http://www.jobbole.com/members/evolighting\">evolighting</a><label class=\"comment_author_data\"> （ <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/evolighting/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 1</a> ）</label></span>\n                    <span class=\"c-title\">\n                        master                    </span>\n\n                    <span class=\"c-date\">\n                        <a href=\"http://blog.jobbole.com/113809/#comment-162379\">4 天前</a>\n                    </span>\n\n                    \n                    \n                </div>\n                    </div>\n        <div class=\"cmnt-body\">\n            <p>\n                </p><p>机翻可还行....</p>\n<p> </p>\n<p>但是在国内，其实dns还是只能用ips的，不然会有各种奇葩的问题，也享受不到ips的专线加速（如果你是某些ips的受害者，其实靠着这些东西，网勉强还是能用的很愉快的）</p>\n            \n                    </div>\n                    <div class=\"cmnt-footer\">\n\n                \n                <p class=\"c-like\">\n                    <a title=\"赞同\" alt=\"赞同\" class=\"162379voteflag  t-up  href-style vote-comment-up  register-user-only   \" data-comment-id=\"162379\"><i class=\"fa fa-thumbs-o-up\"></i> <span id=\"162379voteuptotal\"> 赞</span></a>\n\n                    \n                    <a rel=\"nofollow\" class=\"comment-reply-link register-user-only\" href=\"http://blog.jobbole.com/113809/?replytocom=162379#respond\" data-onclick='return addComment.moveForm( \"comment-162379\", \"162379\", \"respond\", \"113809\" )' aria-label=\"回复给evolighting\">回复 <i class=\"fa fa-reply\"></i></a>\n                </p>\n            </div>\n            </div>\n    </li>\n<!-- #comment-## -->\n            </ul>\n        \n    </div>\n\t\t\r\n\r\n\t\r\n</div>", "tag": "IT技术-DNS-Web", "url": "http://blog.jobbole.com/113809/", "url_object_id": "9f64c90d116e8593354ebaf19462978b", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/03/912be8d20ca700194c3aced111cc833d1.jpg"], "front_image_path": "full/bbd3c66a3badc127bce3c714ce00a0e73265cc91.jpg"}
{"title": "为初学者准备的 ln 命令教程（5 个示例）", "create_date": "2018/04/02", "praise_nums": "1", "fav_nums": "0", "comments_nums": "0", "content": "<div class=\"grid-8\">\r\n\r\n\t\t\r\n\t<!-- BEGIN .post -->\r\n<div class=\"post-113800 post type-post status-publish format-standard hentry category-it-tech tag-linux odd\" id=\"post-113800\">\r\n\t\r\n\t<!-- BEGIN .entry-header -->\r\n\t<div class=\"entry-header\">\r\n\t\r\n\t\t\t\t\r\n\t\t<h1>为初学者准备的 ln 命令教程（5 个示例）</h1>\r\n\t\t\r\n\t\t\t\t\t\t\t\r\n\t</div>\r\n\t<!-- BEGIN .entry-header -->\r\n\t\r\n\t<!-- BEGIN .entry-meta -->\r\n\t<div class=\"entry-meta\">\r\n\t\r\n\t\t<p class=\"entry-meta-hide-on-mobile\">\r\n\r\n            2018/04/02 ·  <a href=\"http://blog.jobbole.com/category/it-tech/\" rel=\"category tag\">IT技术</a>\r\n            \r\n            \r\n\r\n            \r\n             ·  <a href=\"http://blog.jobbole.com/tag/linux/\">Linux</a>\r\n            \r\n</p>\r\n\r\n<!-- JiaThis Button BEGIN -->\r\n<div class=\"jiathis_style\" style=\"display: block; margin: 0 0px; clear: both;\"><span class=\"jiathis_txt\">分享到：</span>\r\n<a class=\"jiathis_button_tsina\"></a>\r\n<a class=\"jiathis_button_weixin\"></a>\r\n<a class=\"jiathis_button_qzone\"></a>\r\n<a class=\"jiathis_button_fb\"></a>\r\n<a class=\"jiathis_button_douban\"></a>\r\n<a class=\"jiathis_button_readitlater\"></a>\r\n<a class=\"jiathis_button_evernote\"></a>\r\n<a class=\"jiathis_button_ydnote\"></a>\r\n<a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\r\n<a class=\"jiathis_counter_style\"></a>\r\n</div>\r\n<!-- JiaThis Button END -->\r\n\r\n\r\n\t</div>\r\n\t<!-- END .entry-meta -->\r\n\r\n\t<!-- BEGIN .entry -->\r\n\t<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.howtoforge.com/linux-ln-command/\">Himanshu Arora</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9501-1.html\">Linux中国/ChenYi</a>   </div><p>当我们在命令行上工作时，您可能需要在文件之间创建链接。这时，您可以可以借助一个专用命令，<code>ln</code>。本教程中，我们将通过一些简单易理解的例子来讨论此工具的基础知识。在此之前，值得一提的是，本教程所有例子都已在 Ubuntu 16.04 上测试通过。</p>\n<h3 id=\"toc_1\">Linux ln 命令</h3>\n<p>正如你现在所了解的，<code>ln</code> 命令能够让您在文件之间创建链接。下面就是 <code>ln</code> 工具的语法（或者使用其他一些可行的语法）。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a37397918929751631\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nln [OPTION]... [-T] TARGET LINK_NAME （第一种形式）\r\nln [OPTION]... TARGET （第二种形式）\r\nln [OPTION]... TARGET... DIRECTORY （第三种形式）\r\nln [OPTION]... -t DIRECTORY TARGET... （第四种形式）\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397918929751631-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37397918929751631-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397918929751631-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37397918929751631-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397918929751631-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a37397918929751631-1\"><span class=\"crayon-i\">ln</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">OPTION</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">T</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">TARGET </span><span class=\"crayon-v\">LINK</span><span class=\"crayon-sy\">_</span>NAME<span class=\"crayon-h\"> </span>（第一种形式）</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37397918929751631-2\"><span class=\"crayon-i\">ln</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">OPTION</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">TARGET</span><span class=\"crayon-h\"> </span>（第二种形式）</div><div class=\"crayon-line\" id=\"crayon-5ac9a37397918929751631-3\"><span class=\"crayon-i\">ln</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">OPTION</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TARGET</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">DIRECTORY</span><span class=\"crayon-h\"> </span>（第三种形式）</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37397918929751631-4\"><span class=\"crayon-i\">ln</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">OPTION</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">DIRECTORY </span><span class=\"crayon-v\">TARGET</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span>（第四种形式）</div><div class=\"crayon-line\" id=\"crayon-5ac9a37397918929751631-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p>下面是 <code>ln</code> 工具 man 文档描述的内容：</p>\n<blockquote><p>在第一种形式下，为目标位置（TARGET）创建一个叫 LINK_NAME 的链接。在第二种形式下，为目标位置（TARGET）在当前目录下创建一个链接（LCTT 译注：创建的为同名链接）。在第三和第四种形式中，在 DIRECTORY 目录下为每一个目标位置（TARGET）创建链接。默认创建硬链接，符号链接需要 <code>--symbolic</code> 选项。默认创建的每一个创建的链接（新链接的名字）都不能已经存在。当创建硬链接时，目标位置（TARGET）文件必须存在；符号链接可以保存任意文本，如果之后解析，相对链接的解析与其父目录有关。</p></blockquote>\n<p>通过下面问答风格的例子，可能会给你更好的理解。但是在此之前，建议您先了解 <a href=\"https://medium.com/meatandmachines/explaining-the-difference-between-hard-links-symbolic-links-using-bruce-lee-32828832e8d3\">硬链接和软链接的区别</a>.</p>\n<h3 id=\"toc_2\">Q1. 如何使用 ln 命令创建硬链接？</h3>\n<p>这很简单，你只需要像下面使用 <code>ln</code> 命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a37397922862070616\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nln [file] [hard-link-to-file]\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397922862070616-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37397922862070616-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a37397922862070616-1\"><span class=\"crayon-i\">ln</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">file</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">hard</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">link</span><span class=\"crayon-o\">-</span><span class=\"crayon-st\">to</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">file</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37397922862070616-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0044 seconds] -->\r\n<p>例如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a37397926421302194\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nln test.txt test_hard_link.txt\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397926421302194-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37397926421302194-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a37397926421302194-1\"><span class=\"crayon-e\">ln </span><span class=\"crayon-v\">test</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">txt </span><span class=\"crayon-v\">test_hard_link</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37397926421302194-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p><a href=\"https://www.howtoforge.com/images/command-tutorial/big/ln-hard-link.png\"><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/01298effe75946f995e7917f557462d5.png\" alt=\"如何使用 ln 命令创建硬链接\"></a></p>\n<p>如此，您便可以看见一个已经创建好的，名为 <code>test_hard_link.txt</code> 的硬链接。</p>\n<h3 id=\"toc_3\">Q2. 如何使用 ln 命令创建软/符号链接？</h3>\n<p>使用 <code>-s</code> 命令行选项：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a3739792a982083580\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nln -s [file] [soft-link-to-file]\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a3739792a982083580-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a3739792a982083580-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a3739792a982083580-1\"><span class=\"crayon-v\">ln</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">file</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">soft</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">link</span><span class=\"crayon-o\">-</span><span class=\"crayon-st\">to</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">file</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a3739792a982083580-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>例如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a3739792e153596229\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nln -s test.txt test_soft_link.txt\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a3739792e153596229-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a3739792e153596229-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a3739792e153596229-1\"><span class=\"crayon-v\">ln</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">test</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">txt </span><span class=\"crayon-v\">test_soft_link</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">txt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a3739792e153596229-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p><a href=\"https://www.howtoforge.com/images/command-tutorial/big/ln-soft-link.png\"><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/50c704a6f945d0c923e4e0537f8c8074.png\" alt=\"如何使用 ln 命令创建软/符号链接\"></a></p>\n<p><code>test_soft_link.txt</code> 文件就是一个软/符号链接，以天蓝色文本 <a href=\"https://askubuntu.com/questions/17299/what-do-the-different-colors-mean-in-ls\">标识</a>。</p>\n<h3 id=\"toc_4\">Q3. 如何使用 ln 命令删除既存的同名目标文件？</h3>\n<p>默认情况下，<code>ln</code> 不允许您在目标目录下创建已存在的链接。</p>\n<p><a href=\"https://www.howtoforge.com/images/command-tutorial/big/ln-file-exists.png\"><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/e0fd2f36a9b21dba7e12ac1cb09ade9d.png\" alt=\"ln 命令示例\"></a></p>\n<p>然而，如果一定要这么做，您可以使用 <code>-f</code> 命令行选项覆盖此行为。</p>\n<p><a href=\"https://www.howtoforge.com/images/command-tutorial/big/ln-f-option.png\"><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/50acf4e490700767594928b22cfe2699.png\" alt=\"如何使用 ln 命令创建软/符号链接\"></a></p>\n<p>提示：如果您想在此删除过程中有所交互，您可以使用 <code>-i</code> 选项。</p>\n<h3 id=\"toc_5\">Q4. 如何使用 ln 命令创建现有文件的同名备份？</h3>\n<p>如果您不想 <code>ln</code> 删除同名的现有文件，您可以为这些文件创建备份。使用 <code>-b</code> 即可实现此效果，以这种方式创建的备份文件，会在其文件名结尾处包含一个波浪号（<code>~</code>）。</p>\n<p><a href=\"https://www.howtoforge.com/images/command-tutorial/big/ln-b-option.png\"><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/4c82e6ffb43f28c1e41aa82208cb755a.png\" alt=\"如何使用 ln 命令创建现有文件的同名备份\"></a></p>\n<h3 id=\"toc_6\">Q5. 如何在当前目录以外的其它目录创建链接？</h3>\n<p>使用 <code>-t</code> 选项指定一个文件目录（除了当前目录）。比如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a37397932015852252\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nls test* | xargs ln -s -t /home/himanshu/Desktop/\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397932015852252-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37397932015852252-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a37397932015852252-1\"><span class=\"crayon-e\">ls </span><span class=\"crayon-e \">test*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">xargs </span><span class=\"crayon-v\">ln</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">home</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">himanshu</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Desktop</span><span class=\"crayon-o\">/</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37397932015852252-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>上述命令会为（当前目录下的）所有 <code>test*</code> 文件创建链接，并放到桌面目录下。</p>\n<h3 id=\"toc_7\">总结</h3>\n<p>当然，尤其对于新手来说，<code>ln</code> 并不是日常必备命令。但是，这是一个有用的命令，因为你永远不知道它什么时候能够节省你一天的时间。对于这个命令，我们已经讨论了一些实用的选项，如果你已经完成了这些，可以查询 <a href=\"https://linux.die.net/man/1/ln\">man 文档</a> 来了解更多详情。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113800\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113800votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113800\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>\r\n\t<!-- END .entry -->\r\n\r\n\r\n<script type=\"text/javascript\">\r\nvar jiathis_config={\r\n\tdata_track_clickback:false,\r\n\ttitle:\"分享从伯乐在线看到的一篇好文章 \",\r\n\tsummary:\"《为初学者准备的 ln 命令教程（5 个示例）》\",\r\n\tpic:\"http://jbcdn2.b0.upaiyun.com/2018/01/1b8322e1daff605d71fc81e724421f17.jpg\",\r\n\tappkey:{\r\n         \"tsina\": 1473879058    },\r\n\tralateuid:{\r\n\t\t\"tsina\": 1670481425\t},\r\n\thideMore:false\r\n}\r\n</script>\r\n<script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js?uid=1745061\" charset=\"utf-8\"></script>\r\n<!-- JiaThis Button END -->\r\n\t\t\t<div class=\"textwidget\"><p><a href=\"http://group.jobbole.com/22945/\" target=\"_blank\"><img src=\"http://wx1.sinaimg.cn/mw690/bfdcef89gy1fq547hqqaij20h803cgm9.jpg\"></a></p>\n</div>\n\t\t\r\n</div>\r\n<!-- END .post -->\r\n            <div style=\"text-align: left;\">\r\n            <h3>相关文章</h3>\r\n            <ul style=\"font-size: 13px; list-style: disc inside;\">\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"给初学者的 type 命令教程\" target=\"_blank\" href=\"http://blog.jobbole.com/113817/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">给初学者的 type 命令教程</a>\r\n                         · <a href=\"http://blog.jobbole.com/113817/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 1</a>                    </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"如何在 Linux 上安装应用程序\" target=\"_blank\" href=\"http://blog.jobbole.com/113793/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">如何在 Linux 上安装应用程序</a>\r\n                         · <a href=\"http://blog.jobbole.com/113793/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 1</a>                    </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"Linux 中的“大内存页”（hugepage）是个什么？\" target=\"_blank\" href=\"http://blog.jobbole.com/113782/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">Linux 中的“大内存页”（hugepage）是个什么？</a>\r\n                                            </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"du 及 df 命令的使用（附带示例）\" target=\"_blank\" href=\"http://blog.jobbole.com/113780/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">du 及 df 命令的使用（附带示例）</a>\r\n                                            </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"Linux 新用户？来试试这 8 款重要的软件\" target=\"_blank\" href=\"http://blog.jobbole.com/113775/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">Linux 新用户？来试试这 8 款重要的软件</a>\r\n                                            </span>\r\n                    </li>\r\n                            </ul>\r\n        </div>\r\n    \r\n    \n<div style=\"text-align: left;\">\n    <h3>可能感兴趣的话题</h3>\n    <ul style=\"font-size: 13px; list-style: disc inside;\">\n                        <li>\n                    <a href=\"http://group.jobbole.com/33039/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"Eng  ---  React ,Vue ,Angular全家桶套餐外的另一种超轻量级实现方式 (16kb)\" target=\"_blank\">Eng  ---  React ,Vue ,Angular全家桶套餐外的另一种超轻量级实...</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/33038/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"28岁刚入门，靠谱不？\" target=\"_blank\">28岁刚入门，靠谱不？</a>\n                     · <a href=\"http://group.jobbole.com/33038/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 7</a>                </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32985/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"工作四年，该如何晋级架构师？\" target=\"_blank\">工作四年，该如何晋级架构师？</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32958/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"java 的nio和网络编程nio 的区别\" target=\"_blank\">java 的nio和网络编程nio 的区别</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32933/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"工作压力大，然后出错多。。然后工作压力大。该怎么调整自己的状态……\" target=\"_blank\">工作压力大，然后出错多。。然后工作压力大。该怎么调整自己的状态……</a>\n                     · <a href=\"http://group.jobbole.com/32933/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 5</a>                </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32879/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"是去北上广深闯几年还是留在二线城市？\" target=\"_blank\">是去北上广深闯几年还是留在二线城市？</a>\n                     · <a href=\"http://group.jobbole.com/32879/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 2</a>                </li>\n                </ul>\n</div>\r\n\t\n            <div id=\"article-comment\" class=\"dot-box center-align\">\n\n                        <a href=\"http://www.jobbole.com/login?redirect=http://blog.jobbole.com/113800/\"><button type=\"button\" class=\"btn btn-non-transparent\">登录后评论</button></a>\n            \n            <a target=\"_blank\" href=\"http://www.jobbole.com/register\"><button type=\"button\" class=\"btn btn-primary\">新用户注册</button></a>\n\n            <br><br>\n            <span>直接登录</span>\n            <style type=\"text/css\">.t_login_text{margin:0; padding:0;}.t_login_button{margin:0; padding: 5px 0;}.t_login_button a{margin:0; padding-right:3px; line-height:25px}.t_login_button img{display:inline; border:none;}</style><!-- 使用社交帐号登录 来自 WordPress连接微博 插件 --><span class=\"connectBox1 t_login_button\"><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=weixin&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113800%2F\" title=\"微信\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_weixin.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=qzone&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113800%2F\" title=\"QQ\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_qzone.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=sina&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113800%2F\" title=\"新浪微博\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_sina.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=douban&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113800%2F\" title=\"豆瓣\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_douban.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=github&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113800%2F\" title=\"GitHub\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_github.png\"></a></span>        </div>\n    \n\n    <div id=\"comment_list\" class=\"comments\">\n\n        \n    </div>\n\t\t\r\n\r\n\t\r\n</div>", "tag": "IT技术-Linux", "url": "http://blog.jobbole.com/113800/", "url_object_id": "5916e51b19bf349342b376e0f581f950", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/01/1b8322e1daff605d71fc81e724421f17.jpg"], "front_image_path": "full/14452eea6b79bce0219227f298ad827f2ba7112d.jpg"}
{"title": "如何在 Linux 上安装应用程序", "create_date": "2018/03/27", "praise_nums": "1", "fav_nums": "2", "comments_nums": "1", "content": "<div class=\"grid-8\">\r\n\r\n\t\t\r\n\t<!-- BEGIN .post -->\r\n<div class=\"post-113793 post type-post status-publish format-standard hentry category-it-tech tag-linux odd\" id=\"post-113793\">\r\n\t\r\n\t<!-- BEGIN .entry-header -->\r\n\t<div class=\"entry-header\">\r\n\t\r\n\t\t\t\t\r\n\t\t<h1>如何在 Linux 上安装应用程序</h1>\r\n\t\t\r\n\t\t\t\t\t\t\t\r\n\t</div>\r\n\t<!-- BEGIN .entry-header -->\r\n\t\r\n\t<!-- BEGIN .entry-meta -->\r\n\t<div class=\"entry-meta\">\r\n\t\r\n\t\t<p class=\"entry-meta-hide-on-mobile\">\r\n\r\n            2018/03/27 ·  <a href=\"http://blog.jobbole.com/category/it-tech/\" rel=\"category tag\">IT技术</a>\r\n            \r\n                            · <a href=\"#article-comment\"> 1 评论 </a>\r\n            \r\n\r\n            \r\n             ·  <a href=\"http://blog.jobbole.com/tag/linux/\">Linux</a>\r\n            \r\n</p>\r\n\r\n<!-- JiaThis Button BEGIN -->\r\n<div class=\"jiathis_style\" style=\"display: block; margin: 0 0px; clear: both;\"><span class=\"jiathis_txt\">分享到：</span>\r\n<a class=\"jiathis_button_tsina\"></a>\r\n<a class=\"jiathis_button_weixin\"></a>\r\n<a class=\"jiathis_button_qzone\"></a>\r\n<a class=\"jiathis_button_fb\"></a>\r\n<a class=\"jiathis_button_douban\"></a>\r\n<a class=\"jiathis_button_readitlater\"></a>\r\n<a class=\"jiathis_button_evernote\"></a>\r\n<a class=\"jiathis_button_ydnote\"></a>\r\n<a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\r\n<a class=\"jiathis_counter_style\"></a>\r\n</div>\r\n<!-- JiaThis Button END -->\r\n\r\n\r\n\t</div>\r\n\t<!-- END .entry-meta -->\r\n\r\n\t<!-- BEGIN .entry -->\r\n\t<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://opensource.com/article/18/1/how-install-apps-linux\">Seth Kenlon</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9486-1.html\">Linux中国/MjSeven</a>   </div><blockquote><p>学习在你的 Linux 计算机上摆弄那些软件。</p></blockquote>\n<p>如何在 Linux 上安装应用程序？因为有许多操作系统，这个问题不止有一个答案。应用程序可以可以来自许多来源 —— 几乎不可能数的清，并且每个开发团队都可以以他们认为最好的方式提供软件。知道如何安装你所得到的软件是成为操作系统高级用户的一部分。</p>\n<h3 id=\"toc_1\">仓库</h3>\n<p>十多年来，Linux 已经在使用软件库来分发软件。在这种情况下，“仓库”是一个托管可安装软件包的公共服务器。Linux 发行版提供了一条命令，以及该命令的图形界面，用于从服务器获取软件并将其安装到你的计算机。这是一个非常简单的概念，它已经成为所有主流手机操作系统的模式，最近，该模式也成为了两大闭源计算机操作系统的“应用商店”。</p>\n<p><img class=\"aligncenter\" title=\"Linux repository\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/760b92cca45081c6804cd6aaed0a77cc.png\" alt=\"Linux repository\"></p>\n<p style=\"text-align: center\"><em>不是应用程序商店</em></p>\n<p>从软件仓库安装是在 Linux 上安装应用程序的主要方法，它应该是你寻找想要安装的任何应用程序的首选地方。</p>\n<p>从软件仓库安装，通常需要一个命令，如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a3738bbb7039788198\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo dnf install inkscape\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a3738bbb7039788198-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a3738bbb7039788198-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a3738bbb7039788198-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">dnf </span><span class=\"crayon-e\">install </span><span class=\"crayon-i\">inkscape</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a3738bbb7039788198-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>实际使用的命令取决于你所使用的 Linux 发行版。Fedora 使用 <code>dnf</code>，OpenSUSE 使用 <code>zypper</code>，Debian 和 Ubuntu 使用 <code>apt</code>，Slackware 使用 <code>sbopkg</code>，FreeBSD 使用 <code>pkg_add</code>，而基于 lllumos 的 Openlndiana 使用 <code>pkg</code>。无论你使用什么，该命令通常要搜索你想要安装应用程序的正确名称，因为有时候你认为的软件名称不是它官方或独有的名称：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a3738bbc2075720851\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo dnf search pyqt\r\nPyQt.x86_64 : Python bindings for Qt3\r\nPyQt4.x86_64 : Python bindings for Qt4\r\npython-qt5.x86_64 : PyQt5 is Python bindings for Qt5\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a3738bbc2075720851-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a3738bbc2075720851-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a3738bbc2075720851-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a3738bbc2075720851-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a3738bbc2075720851-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a3738bbc2075720851-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">dnf </span><span class=\"crayon-e\">search </span><span class=\"crayon-e\">pyqt</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a3738bbc2075720851-2\"><span class=\"crayon-v\">PyQt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86_64</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Python </span><span class=\"crayon-e\">bindings </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Qt3</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a3738bbc2075720851-3\"><span class=\"crayon-v\">PyQt4</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86_64</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Python </span><span class=\"crayon-e\">bindings </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Qt4</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a3738bbc2075720851-4\"><span class=\"crayon-v\">python</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">qt5</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">x86_64</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PyQt5 </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Python </span><span class=\"crayon-e\">bindings </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Qt5</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a3738bbc2075720851-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>一旦你找到要安装的软件包的名称后，使用 <code>install</code> 子命令执行实际的下载和自动安装：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a3738bbc6337825520\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo dnf install python-qt5\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a3738bbc6337825520-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a3738bbc6337825520-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a3738bbc6337825520-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">dnf </span><span class=\"crayon-e\">install </span><span class=\"crayon-v\">python</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">qt5</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a3738bbc6337825520-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>有关从软件仓库安装的具体信息，请参阅你的 Linux 发行版的文档。</p>\n<p>图形工具通常也是如此。搜索你认为你想要的，然后安装它。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/b69db96d52abf01b5c5bca4a7945bcb0.png\" alt=\"\"></p>\n<p>与底层命令一样，图形安装程序的名称取决于你正在运行的 Linux 发行版。相关的应用程序通常使用“软件（software）”或“包（package）”等关键字进行标记，因此请在你的启动项或菜单中搜索这些词汇，然后你将找到所需的内容。 由于开源全由用户来选择，所以如果你不喜欢你的发行版提供的图形用户界面（GUI），那么你可以选择安装替代品。 你知道该如何做到这一点。</p>\n<h4 id=\"toc_2\">额外仓库</h4>\n<p>你的 Linux 发行版为其打包的软件提供了标准仓库，通常也有额外的仓库。例如，<a href=\"https://fedoraproject.org/wiki/EPEL\">EPEL</a> 服务于 Red Hat Enterprise Linux 和 CentOS，<a href=\"http://rpmfusion.org\">RPMFusion</a> 服务于 Fedora，Ubuntu 有各种级别的支持以及个人包存档（PPA），<a href=\"http://packman.links2linux.org/\">Packman</a> 为 OpenSUSE 提供额外的软件以及 <a href=\"http://slackbuilds.org\">SlackBuilds.org</a> 为 Slackware 提供社区构建脚本。</p>\n<p>默认情况下，你的 Linux 操作系统设置为只查看其官方仓库，因此如果你想使用其他软件集合，则必须自己添加额外库。你通常可以像安装软件包一样安装仓库。实际上，当你安装例如 <a href=\"https://ring.cx/en/download/gnu-linux\">GNU Ring</a> 视频聊天，<a href=\"http://vivaldi.com\">Vivaldi</a> web 浏览器，谷歌浏览器等许多软件时，你的实际安装是访问他们的私有仓库，从中将最新版本的应用程序安装到你的机器上。</p>\n<p><img class=\"aligncenter\" title=\"Installing a repo\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/9c5806b523c1a55ae242c8aa66c46bcc.png\" alt=\"Installing a repo\"></p>\n<p style=\"text-align: center\"><em>安装仓库</em></p>\n<p>你还可以通过编辑文本文件将仓库手动添加到你的软件包管理器的配置目录，或者运行命令来添加添加仓库。像往常一样，你使用的确切命令取决于 Linux 发行版本。例如，这是一个 <code>dnf</code> 命令，它将一个仓库添加到系统中：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a3738bbcb965355115\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo dnf config-manager --add-repo=http://example.com/pub/centos/7\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a3738bbcb965355115-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a3738bbcb965355115-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a3738bbcb965355115-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">dnf </span><span class=\"crayon-v\">config</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">manager</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">add</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">repo</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">http</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//example.com/pub/centos/7</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a3738bbcb965355115-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p></p>\n<h3 id=\"toc_3\">不使用仓库来安装应用程序</h3>\n<p>仓库模型非常流行，因为它提供了用户（你）和开发人员之间的链接。重要更新发布之后，系统会提示你接受更新，并且你可以从一个集中位置接受所有更新。</p>\n<p>然而，有时候一个软件包还没有放到仓库中时。这些安装包有几种形式。</p>\n<h4 id=\"toc_4\">Linux 包</h4>\n<p>有时候，开发人员会以通用的 Linux 打包格式分发软件，例如 RPM、DEB 或较新但非常流行的 FlatPak 或 Snap 格式。你不是访问仓库下载的，你只是得到了这个包。</p>\n<p>例如，视频编辑器 <a href=\"https://www.lwks.com/\">Lightworks</a> 为 APT 用户提供了一个 <code>.deb</code> 文件，RPM 用户提供了 <code>.rpm</code> 文件。当你想要更新时，可以到网站下载最新的适合的文件。</p>\n<p>这些一次性软件包可以使用从仓库进行安装时所用的一样的工具进行安装。如果双击下载的软件包，图形安装程序将启动并逐步完成安装过程。</p>\n<p>或者，你可以从终端进行安装。这里的区别在于你从互联网下载的独立包文件不是来自仓库。这是一个“本地”安装，这意味着你的软件安装包不需要下载来安装。大多数软件包管理器都是透明处理的：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a3738bc15299758859\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo dnf install ~/Downloads/lwks-14.0.0-amd64.rpm\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a3738bc15299758859-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a3738bc15299758859-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a3738bc15299758859-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">dnf </span><span class=\"crayon-v\">install</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">Downloads</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lwks</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">14.0.0</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">amd64</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">rpm</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a3738bc15299758859-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>在某些情况下，你需要采取额外的步骤才能使应用程序运行，因此请仔细阅读有关你正在安装软件的文档。</p>\n<h4 id=\"toc_5\">通用安装脚本</h4>\n<p>一些开发人员以几种通用格式发布他们的包。常见的扩展名包括 <code>.run</code> 和 <code>.sh</code>。NVIDIA 显卡驱动程序、像 Nuke 和 Mari 这样的 Foundry visual FX 软件包以及来自 <a href=\"http://gog.com\">GOG</a> 的许多非 DRM 游戏都是用这种安装程序。（LCTT 译注：DRM 是数字版权管理。）</p>\n<p>这种安装模式依赖于开发人员提供安装“向导”。一些安装程序是图形化的，而另一些只是在终端中运行。</p>\n<p>有两种方式来运行这些类型的安装程序。</p>\n<p>1、 你可以直接从终端运行安装程序：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a3738bc1a230769165\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sh ./game/gog_warsow_x.y.z.sh\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a3738bc1a230769165-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a3738bc1a230769165-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a3738bc1a230769165-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">sh</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">game</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">gog_warsow_x</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">y</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">z</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">sh</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a3738bc1a230769165-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>2、 另外，你可以通过标记其为可执行文件来运行它。要标记为安装程序可执行文件，右键单击它的图标并选择其属性。</p>\n<p><img class=\"aligncenter\" title=\"Giving an installer executable permission\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/819db3a7089befb230a5c94d66686b4c.jpg\" alt=\"Giving an installer executable permission\"></p>\n<p style=\"text-align: center\"><em>给安装程序可执行权限。</em></p>\n<p>一旦你允许其运行，双击图标就可以安装了。</p>\n<p><img class=\"aligncenter\" title=\"GOG installer\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/53afe89b824042f9a90daabea5e29cba.jpg\" alt=\"GOG installer\"></p>\n<p style=\"text-align: center\"><em>GOG 安装程序</em></p>\n<p>对于其余的安装程序，只需要按照屏幕上的说明进行操作。</p>\n<h4 id=\"toc_6\">AppImage 便携式应用程序</h4>\n<p>AppImage 格式对于 Linux 相对来说比较新，尽管它的概念是基于 NeXT 和 Rox 的。这个想法很简单：运行应用程序所需的一切都应该放在一个目录中，然后该目录被视为一个“应用程序”。要运行该应用程序，只需双击该图标即可运行。不需要也要不应该把应用程序安装在传统意义的地方；它从你在硬盘上的任何地方运行都行。</p>\n<p>尽管它可以作为独立应用运行，但 AppImage 通常提供一些系统集成。</p>\n<p><img class=\"aligncenter\" title=\"AppImage system integration\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/59ee2073d407653a05fa297c873d7446.png\" alt=\"AppImage system integration\"></p>\n<p style=\"text-align: center\"><em>AppImage 系统集成</em></p>\n<p>如果你接受此条件，则将一个本地的 <code>.desktop</code> 文件安装到你的主目录。<code>.desktop</code> 文件是 Linux 桌面的应用程序菜单和 mimetype 系统使用的一个小配置文件。实质上，只是将桌面配置文件放置在主目录的应用程序列表中“安装”应用程序，而不实际安装它。你获得了安装某些东西的所有好处，以及能够在本地运行某些东西的好处，即“便携式应用程序”。</p>\n<h4 id=\"toc_7\">应用程序目录</h4>\n<p>有时，开发人员只是编译一个应用程序，然后将结果发布到下载中，没有安装脚本，也没有打包。通常，这意味着你下载了一个 TAR 文件，然后 <a href=\"https://opensource.com/article/17/7/how-unzip-targz-file\">解压缩</a>，然后双击可执行文件（通常是你下载软件的名称）。</p>\n<p><img class=\"aligncenter\" title=\"Twine downloaded for Linux\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/8ebbfff11cc8cda27c3cacbbc6fa7f4f.jpg\" alt=\"Twine downloaded for Linux\"></p>\n<p style=\"text-align: center\"><em>下载 Twine</em></p>\n<p>当使用这种软件方式交付时，你可以将它放在你下载的地方，当你需要它时，你可以手动启动它，或者你可以自己进行快速但是麻烦的安装。这包括两个简单的步骤：</p>\n<ol>\n<li>将目录保存到一个标准位置，并在需要时手动启动它。</li>\n<li>将目录保存到一个标准位置，并创建一个 <code>.desktop</code> 文件，将其集成到你的系统中。</li>\n</ol>\n<p>如果你只是为自己安装应用程序，那么传统上会在你的主目录中放个 <code>bin</code> （“二进制文件binary” 的简称）目录作为本地安装的应用程序和脚本的存储位置。如果你的系统上有其他用户需要访问这些应用程序，传统上将二进制文件放置在 <code>/opt</code> 中。最后，这取决于你存储应用程序的位置。</p>\n<p>下载通常以带版本名称的目录进行，如 <code>twine_2.13</code> 或者 <code>pcgen-v6.07.04</code>。由于假设你将在某个时候更新应用程序，因此将版本号删除或创建目录的符号链接是个不错的主意。这样，即使你更新应用程序本身，为应用程序创建的启动程序也可以保持不变。</p>\n<p>要创建一个 <code>.desktop</code> 启动文件，打开一个文本编辑器并创建一个名为 <code>twine.desktop</code> 的文件。<a href=\"https://specifications.freedesktop.org/desktop-entry-spec/desktop-entry-spec-latest.html\">桌面条目规范</a> 由 <a href=\"http://freedesktop.org\">FreeDesktop.org</a> 定义。下面是一个简单的启动器，用于一个名为 Twine 的游戏开发 IDE，安装在系统范围的 <code>/opt</code> 目录中：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a3738bc20095030950\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[Desktop Entry]\r\nEncoding=UTF-8\r\nName=Twine\r\nGenericName=Twine\r\nComment=Twine\r\nExec=/opt/twine/Twine\r\nIcon=/usr/share/icons/oxygen/64x64/categories/applications-games.png\r\nTerminal=false\r\nType=Application\r\nCategories=Development;IDE;\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a3738bc20095030950-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a3738bc20095030950-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a3738bc20095030950-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a3738bc20095030950-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a3738bc20095030950-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a3738bc20095030950-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a3738bc20095030950-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a3738bc20095030950-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a3738bc20095030950-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a3738bc20095030950-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a3738bc20095030950-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a3738bc20095030950-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-e\">Desktop </span><span class=\"crayon-v\">Entry</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a3738bc20095030950-2\"><span class=\"crayon-v\">Encoding</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">UTF</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">8</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a3738bc20095030950-3\"><span class=\"crayon-v\">Name</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">Twine</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a3738bc20095030950-4\"><span class=\"crayon-v\">GenericName</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">Twine</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a3738bc20095030950-5\"><span class=\"crayon-v\">Comment</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">Twine</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a3738bc20095030950-6\"><span class=\"crayon-v\">Exec</span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">opt</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">twine</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">Twine</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a3738bc20095030950-7\"><span class=\"crayon-v\">Icon</span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">share</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">icons</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">oxygen</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">64x64</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">categories</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">applications</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">games</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">png</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a3738bc20095030950-8\"><span class=\"crayon-v\">Terminal</span><span class=\"crayon-o\">=</span><span class=\"crayon-t\">false</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a3738bc20095030950-9\"><span class=\"crayon-v\">Type</span><span class=\"crayon-o\">=</span><span class=\"crayon-e\">Application</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a3738bc20095030950-10\"><span class=\"crayon-v\">Categories</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">Development</span><span class=\"crayon-sy\">;</span><span class=\"crayon-v\">IDE</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a3738bc20095030950-11\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>棘手的一行是 <code>Exec</code> 行。它必须包含一个有效的命令来启动应用程序。通常，它只是你下载的东西的完整路径，但在某些情况下，它更复杂一些。例如，Java 应用程序可能需要作为 Java 自身的参数启动。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a3738bc24287974648\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nExec=java -jar /path/to/foo.jar\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a3738bc24287974648-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a3738bc24287974648-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a3738bc24287974648-1\"><span class=\"crayon-v\">Exec</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">java</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">jar</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">path</span><span class=\"crayon-o\">/</span><span class=\"crayon-st\">to</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">foo</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">jar</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a3738bc24287974648-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0132 seconds] -->\r\n<p>有时，一个项目包含一个可以运行的包装脚本，这样你就不必找出正确的命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a3738bc27099413593\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nExec=/opt/foo/foo-launcher.sh\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a3738bc27099413593-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a3738bc27099413593-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a3738bc27099413593-1\"><span class=\"crayon-v\">Exec</span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">opt</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">foo</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">foo</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">launcher</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">sh</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a3738bc27099413593-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0157 seconds] -->\r\n<p>在这个 Twine 例子中，没有与该下载的软件捆绑的图标，因此示例 <code>.desktop</code> 文件指定了 KDE 桌面附带的通用游戏图标。你可以使用类似的解决方法，但如果你更具艺术性，可以创建自己的图标，或者可以在 Internet 上搜索一个好的图标。只要 <code>Icon</code> 行指向一个有效的 PNG 或 SVG 文件，你的应用程序就会以该图标为代表。</p>\n<p>示例脚本还将应用程序类别主要设置为 Development，因此在 KDE、GNOME 和大多数其他应用程序菜单中，Twine 出现在开发类别下。</p>\n<p>为了让这个例子出现在应用程序菜单中，把 <code>twine.desktop</code> 文件放这到两个地方之一：</p>\n<ul>\n<li>如果你将应用程序存储在你自己的家目录下，那么请将其放在 <code>~/.local/share/applications</code>。</li>\n<li>如果你将应用程序存储在 <code>/opt</code> 目录或者其他系统范围的位置，并希望它出现在所有用户的应用程序菜单中，请将它放在 <code>/usr/share/applications</code> 目录中。</li>\n</ul>\n<p>现在，该应用程序已安装，因为它需要与系统的其他部分集成。</p>\n<h3 id=\"toc_8\">从源代码编译</h3>\n<p>最后，还有真正的通用格式安装格式：源代码。从源代码编译应用程序是学习如何构建应用程序，如何与系统交互以及如何定制应用程序的好方法。尽管如此，它绝不是一个点击按钮式过程。它需要一个构建环境，通常需要安装依赖库和头文件，有时还要进行一些调试。</p>\n<p>要了解更多关于从源代码编译的内容，请阅读<a href=\"https://opensource.com/article/17/10/open-source-cats\">我这篇文章</a>。</p>\n<h3 id=\"toc_9\">现在你明白了</h3>\n<p>有些人认为安装软件是一个神奇的过程，只有开发人员理解，或者他们认为它“激活”了应用程序，就好像二进制可执行文件在“安装”之前无效。学习许多不同的安装方法会告诉你安装实际上只是“将文件从一个地方复制到系统中适当位置”的简写。 没有什么神秘的。只要你去了解每次安装，不是期望应该如何发生，并且寻找开发者为安装过程设置了什么，那么通常很容易，即使它与你的习惯不同。</p>\n<p>重要的是安装器要诚实于你。 如果你遇到未经你的同意尝试安装其他软件的安装程序（或者它可能会以混淆或误导的方式请求同意），或者尝试在没有明显原因的情况下对系统执行检查，则不要继续安装。</p>\n<p>好的软件是灵活的、诚实的、开放的。 现在你知道如何在你的计算机上获得好软件了。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113793\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113793votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113793\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>\r\n\t<!-- END .entry -->\r\n\r\n\r\n<script type=\"text/javascript\">\r\nvar jiathis_config={\r\n\tdata_track_clickback:false,\r\n\ttitle:\"分享从伯乐在线看到的一篇好文章 \",\r\n\tsummary:\"《如何在 Linux 上安装应用程序》\",\r\n\tpic:\"http://jbcdn2.b0.upaiyun.com/2018/01/1b8322e1daff605d71fc81e724421f17.jpg\",\r\n\tappkey:{\r\n         \"tsina\": 1473879058    },\r\n\tralateuid:{\r\n\t\t\"tsina\": 1670481425\t},\r\n\thideMore:false\r\n}\r\n</script>\r\n<script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js?uid=1745061\" charset=\"utf-8\"></script>\r\n<!-- JiaThis Button END -->\r\n\t\t\t<div class=\"textwidget\"><p><a href=\"http://group.jobbole.com/22945/\" target=\"_blank\"><img src=\"http://wx1.sinaimg.cn/mw690/bfdcef89gy1fq547hqqaij20h803cgm9.jpg\"></a></p>\n</div>\n\t\t\r\n</div>\r\n<!-- END .post -->\r\n            <div style=\"text-align: left;\">\r\n            <h3>相关文章</h3>\r\n            <ul style=\"font-size: 13px; list-style: disc inside;\">\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"给初学者的 type 命令教程\" target=\"_blank\" href=\"http://blog.jobbole.com/113817/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">给初学者的 type 命令教程</a>\r\n                         · <a href=\"http://blog.jobbole.com/113817/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 1</a>                    </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"为初学者准备的 ln 命令教程（5 个示例）\" target=\"_blank\" href=\"http://blog.jobbole.com/113800/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">为初学者准备的 ln 命令教程（5 个示例）</a>\r\n                                            </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"Linux 中的“大内存页”（hugepage）是个什么？\" target=\"_blank\" href=\"http://blog.jobbole.com/113782/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">Linux 中的“大内存页”（hugepage）是个什么？</a>\r\n                                            </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"du 及 df 命令的使用（附带示例）\" target=\"_blank\" href=\"http://blog.jobbole.com/113780/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">du 及 df 命令的使用（附带示例）</a>\r\n                                            </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"Linux 新用户？来试试这 8 款重要的软件\" target=\"_blank\" href=\"http://blog.jobbole.com/113775/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">Linux 新用户？来试试这 8 款重要的软件</a>\r\n                                            </span>\r\n                    </li>\r\n                            </ul>\r\n        </div>\r\n    \r\n    \n<div style=\"text-align: left;\">\n    <h3>可能感兴趣的话题</h3>\n    <ul style=\"font-size: 13px; list-style: disc inside;\">\n                        <li>\n                    <a href=\"http://group.jobbole.com/33039/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"Eng  ---  React ,Vue ,Angular全家桶套餐外的另一种超轻量级实现方式 (16kb)\" target=\"_blank\">Eng  ---  React ,Vue ,Angular全家桶套餐外的另一种超轻量级实...</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/33038/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"28岁刚入门，靠谱不？\" target=\"_blank\">28岁刚入门，靠谱不？</a>\n                     · <a href=\"http://group.jobbole.com/33038/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 7</a>                </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32985/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"工作四年，该如何晋级架构师？\" target=\"_blank\">工作四年，该如何晋级架构师？</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32958/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"java 的nio和网络编程nio 的区别\" target=\"_blank\">java 的nio和网络编程nio 的区别</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32933/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"工作压力大，然后出错多。。然后工作压力大。该怎么调整自己的状态……\" target=\"_blank\">工作压力大，然后出错多。。然后工作压力大。该怎么调整自己的状态……</a>\n                     · <a href=\"http://group.jobbole.com/32933/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 5</a>                </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32879/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"是去北上广深闯几年还是留在二线城市？\" target=\"_blank\">是去北上广深闯几年还是留在二线城市？</a>\n                     · <a href=\"http://group.jobbole.com/32879/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 2</a>                </li>\n                </ul>\n</div>\r\n\t\n            <div id=\"article-comment\" class=\"dot-box center-align\">\n\n                        <a href=\"http://www.jobbole.com/login?redirect=http://blog.jobbole.com/113793/\"><button type=\"button\" class=\"btn btn-non-transparent\">登录后评论</button></a>\n            \n            <a target=\"_blank\" href=\"http://www.jobbole.com/register\"><button type=\"button\" class=\"btn btn-primary\">新用户注册</button></a>\n\n            <br><br>\n            <span>直接登录</span>\n            <style type=\"text/css\">.t_login_text{margin:0; padding:0;}.t_login_button{margin:0; padding: 5px 0;}.t_login_button a{margin:0; padding-right:3px; line-height:25px}.t_login_button img{display:inline; border:none;}</style><!-- 使用社交帐号登录 来自 WordPress连接微博 插件 --><span class=\"connectBox1 t_login_button\"><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=weixin&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113793%2F\" title=\"微信\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_weixin.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=qzone&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113793%2F\" title=\"QQ\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_qzone.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=sina&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113793%2F\" title=\"新浪微博\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_sina.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=douban&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113793%2F\" title=\"豆瓣\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_douban.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=github&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113793%2F\" title=\"GitHub\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_github.png\"></a></span>        </div>\n    \n\n    <div id=\"comment_list\" class=\"comments\">\n\n                    <h5 id=\"comments\" class=\"sub-title\"><i class=\"glyphicon\"></i>最新评论</h5>\n            <ul class=\"cmnt-list\">\n\n                        <li id=\"comment-162367\" class=\"comment cmnt odd\">\n    \n    <div class=\"cmnt-box\">\n        <div class=\"cmnt-header\">\n                            <a href=\"http://www.jobbole.com/members/q2657976901\" class=\"cmnt-img\"><img width=\"37\" height=\"37\" src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\" alt=\"\"></a>\n                <div class=\"cmnt-meta\">\n                    <span><a href=\"http://www.jobbole.com/members/q2657976901\">幸福丶来敲门</a><label class=\"comment_author_data\"> </label></span>\n                    <span class=\"c-title\">\n                                             </span>\n\n                    <span class=\"c-date\">\n                        <a href=\"http://blog.jobbole.com/113793/#comment-162367\">03/28</a>\n                    </span>\n\n                    \n                    \n                </div>\n                    </div>\n        <div class=\"cmnt-body\">\n            <p>\n                </p><p>很好</p>\n            \n                    </div>\n                    <div class=\"cmnt-footer\">\n\n                \n                <p class=\"c-like\">\n                    <a title=\"赞同\" alt=\"赞同\" class=\"162367voteflag  t-up  href-style vote-comment-up  register-user-only   \" data-comment-id=\"162367\"><i class=\"fa fa-thumbs-o-up\"></i> <span id=\"162367voteuptotal\"> 赞</span></a>\n\n                    \n                    <a rel=\"nofollow\" class=\"comment-reply-link register-user-only\" href=\"http://blog.jobbole.com/113793/?replytocom=162367#respond\" data-onclick='return addComment.moveForm( \"comment-162367\", \"162367\", \"respond\", \"113793\" )' aria-label=\"回复给幸福丶来敲门\">回复 <i class=\"fa fa-reply\"></i></a>\n                </p>\n            </div>\n            </div>\n    </li>\n<!-- #comment-## -->\n            </ul>\n        \n    </div>\n\t\t\r\n\r\n\t\r\n</div>", "tag": "IT技术-Linux", "url": "http://blog.jobbole.com/113793/", "url_object_id": "d750eaa333832623ef22835422172102", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/01/1b8322e1daff605d71fc81e724421f17.jpg"], "front_image_path": "full/14452eea6b79bce0219227f298ad827f2ba7112d.jpg"}
{"title": "Redis源码阅读：sds字符串实现", "create_date": "2018/04/04", "praise_nums": "1", "fav_nums": "0", "comments_nums": "0", "content": "<div class=\"grid-8\">\r\n\r\n\t\t\r\n\t<!-- BEGIN .post -->\r\n<div class=\"post-113798 post type-post status-publish format-standard hentry category-it-tech tag-redis odd\" id=\"post-113798\">\r\n\t\r\n\t<!-- BEGIN .entry-header -->\r\n\t<div class=\"entry-header\">\r\n\t\r\n\t\t\t\t\r\n\t\t<h1>Redis源码阅读：sds字符串实现</h1>\r\n\t\t\r\n\t\t\t\t\t\t\t\r\n\t</div>\r\n\t<!-- BEGIN .entry-header -->\r\n\t\r\n\t<!-- BEGIN .entry-meta -->\r\n\t<div class=\"entry-meta\">\r\n\t\r\n\t\t<p class=\"entry-meta-hide-on-mobile\">\r\n\r\n            2018/04/04 ·  <a href=\"http://blog.jobbole.com/category/it-tech/\" rel=\"category tag\">IT技术</a>\r\n            \r\n            \r\n\r\n            \r\n             ·  <a href=\"http://blog.jobbole.com/tag/redis/\">Redis</a>\r\n            \r\n</p>\r\n\r\n<!-- JiaThis Button BEGIN -->\r\n<div class=\"jiathis_style\" style=\"display: block; margin: 0 0px; clear: both;\"><span class=\"jiathis_txt\">分享到：</span>\r\n<a class=\"jiathis_button_tsina\"></a>\r\n<a class=\"jiathis_button_weixin\"></a>\r\n<a class=\"jiathis_button_qzone\"></a>\r\n<a class=\"jiathis_button_fb\"></a>\r\n<a class=\"jiathis_button_douban\"></a>\r\n<a class=\"jiathis_button_readitlater\"></a>\r\n<a class=\"jiathis_button_evernote\"></a>\r\n<a class=\"jiathis_button_ydnote\"></a>\r\n<a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\r\n<a class=\"jiathis_counter_style\"></a>\r\n</div>\r\n<!-- JiaThis Button END -->\r\n\r\n\r\n\t</div>\r\n\t<!-- END .entry-meta -->\r\n\r\n\t<!-- BEGIN .entry -->\r\n\t<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文作者： <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/hector\">hoohack</a> 。未经作者许可，禁止转载！<br>欢迎加入伯乐在线 <a href=\"http://blog.jobbole.com/99322\" target=\"_blank\">专栏作者</a>。</div><h2 id=\"初衷\">初衷</h2>\n<p>从开始工作就开始使用Redis，也有一段时间了，但都只是停留在使用阶段，没有往更深的角度探索，每次想读源码都止步在阅读书籍上，因为看完书很快又忘了，这次逼自己先读代码。因为个人觉得写作需要阅读文字来增强灵感，那么写代码的，就阅读更多代码来增强灵感吧。</p>\n<p>redis的实现原理，在《Redis设计与实现》一书中讲得很详细了，但是想通过结合代码的形式再深入探索，加深自己的理解，现在将自己探索的心得写在这儿。</p>\n<h2 id=\"sds结构体的定义\">sds结构体的定义</h2>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a309537ef566667936\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#define SDS_TYPE_5  0\r\n#define SDS_TYPE_8  1\r\n#define SDS_TYPE_16 2\r\n#define SDS_TYPE_32 3\r\n#define SDS_TYPE_64 4\r\n#define SDS_TYPE_MASK 7\r\n\r\n// sds结构体，使用不同的结构体来保存不同长度大小的字符串\r\ntypedef char *sds;\r\n\r\nstruct __attribute__ ((__packed__)) sdshdr5 {\r\n    unsigned char flags; /* flags共8位，低三位保存类型标志，高5位保存字符串长度，小于32(2^5-1) */\r\n    char buf[]; // 保存具体的字符串\r\n};\r\nstruct __attribute__ ((__packed__)) sdshdr8 {\r\n    uint8_t len; /* 字符串长度，buf已用的长度 */\r\n    uint8_t alloc; /* 为buf分配的总长度，alloc-len就是sds结构体剩余的空间 */\r\n    unsigned char flags; /* 低三位保存类型标志 */\r\n    char buf[];\r\n};\r\nstruct __attribute__ ((__packed__)) sdshdr16 {\r\n    uint16_t len; /* used */\r\n    uint16_t alloc; /* excluding the header and null terminator */\r\n    unsigned char flags; /* 3 lsb of type, 5 unused bits */\r\n    char buf[];\r\n};\r\nstruct __attribute__ ((__packed__)) sdshdr32 {\r\n    uint32_t len; /* used */\r\n    uint32_t alloc; /* excluding the header and null terminator */\r\n    unsigned char flags; /* 3 lsb of type, 5 unused bits */\r\n    char buf[];\r\n};\r\nstruct __attribute__ ((__packed__)) sdshdr64 {\r\n    uint64_t len; /* used */\r\n    uint64_t alloc; /* excluding the header and null terminator */\r\n    unsigned char flags; /* 3 lsb of type, 5 unused bits */\r\n    char buf[];\r\n};</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a309537ef566667936-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a309537ef566667936-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a309537ef566667936-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a309537ef566667936-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a309537ef566667936-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a309537ef566667936-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a309537ef566667936-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a309537ef566667936-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a309537ef566667936-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a309537ef566667936-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a309537ef566667936-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a309537ef566667936-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a309537ef566667936-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a309537ef566667936-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a309537ef566667936-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a309537ef566667936-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a309537ef566667936-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a309537ef566667936-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a309537ef566667936-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a309537ef566667936-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a309537ef566667936-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a309537ef566667936-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a309537ef566667936-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a309537ef566667936-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a309537ef566667936-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a309537ef566667936-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a309537ef566667936-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a309537ef566667936-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a309537ef566667936-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a309537ef566667936-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a309537ef566667936-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a309537ef566667936-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a309537ef566667936-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a309537ef566667936-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a309537ef566667936-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a309537ef566667936-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a309537ef566667936-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a309537ef566667936-38\">38</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a309537ef566667936-1\"><span class=\"crayon-p\">#define SDS_TYPE_5  0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a309537ef566667936-2\"><span class=\"crayon-p\">#define SDS_TYPE_8  1</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a309537ef566667936-3\"><span class=\"crayon-p\">#define SDS_TYPE_16 2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a309537ef566667936-4\"><span class=\"crayon-p\">#define SDS_TYPE_32 3</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a309537ef566667936-5\"><span class=\"crayon-p\">#define SDS_TYPE_64 4</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a309537ef566667936-6\"><span class=\"crayon-p\">#define SDS_TYPE_MASK 7</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a309537ef566667936-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a309537ef566667936-8\"><span class=\"crayon-c\">// sds结构体，使用不同的结构体来保存不同长度大小的字符串</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a309537ef566667936-9\"><span class=\"crayon-r\">typedef</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">char</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">sds</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a309537ef566667936-10\"> </div><div class=\"crayon-line\" id=\"crayon-5ac9a309537ef566667936-11\"><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__attribute__</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">__packed__</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sdshdr5</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a309537ef566667936-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">unsigned</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">char</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">flags</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">/* flags共8位，低三位保存类型标志，高5位保存字符串长度，小于32(2^5-1) */</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a309537ef566667936-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">char</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">buf</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 保存具体的字符串</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a309537ef566667936-14\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a309537ef566667936-15\"><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__attribute__</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">__packed__</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sdshdr8</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a309537ef566667936-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">uint8_t </span><span class=\"crayon-v\">len</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">/* 字符串长度，buf已用的长度 */</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a309537ef566667936-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">uint8_t </span><span class=\"crayon-v\">alloc</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">/* 为buf分配的总长度，alloc-len就是sds结构体剩余的空间 */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a309537ef566667936-18\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">unsigned</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">char</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">flags</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">/* 低三位保存类型标志 */</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a309537ef566667936-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">char</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">buf</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a309537ef566667936-20\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a309537ef566667936-21\"><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__attribute__</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">__packed__</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sdshdr16</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a309537ef566667936-22\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">uint16_t </span><span class=\"crayon-v\">len</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">/* used */</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a309537ef566667936-23\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">uint16_t </span><span class=\"crayon-v\">alloc</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">/* excluding the header and null terminator */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a309537ef566667936-24\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">unsigned</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">char</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">flags</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">/* 3 lsb of type, 5 unused bits */</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a309537ef566667936-25\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">char</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">buf</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a309537ef566667936-26\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a309537ef566667936-27\"><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__attribute__</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">__packed__</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sdshdr32</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a309537ef566667936-28\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">uint32_t </span><span class=\"crayon-v\">len</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">/* used */</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a309537ef566667936-29\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">uint32_t </span><span class=\"crayon-v\">alloc</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">/* excluding the header and null terminator */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a309537ef566667936-30\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">unsigned</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">char</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">flags</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">/* 3 lsb of type, 5 unused bits */</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a309537ef566667936-31\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">char</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">buf</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a309537ef566667936-32\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a309537ef566667936-33\"><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__attribute__</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">__packed__</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sdshdr64</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a309537ef566667936-34\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">uint64_t </span><span class=\"crayon-v\">len</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">/* used */</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a309537ef566667936-35\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">uint64_t </span><span class=\"crayon-v\">alloc</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">/* excluding the header and null terminator */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a309537ef566667936-36\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">unsigned</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">char</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">flags</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">/* 3 lsb of type, 5 unused bits */</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a309537ef566667936-37\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">char</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">buf</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a309537ef566667936-38\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0122 seconds] -->\r\n<p>sds结构体从4.0开始就使用了5种header定义，节省内存的使用，但是不会用到sdshdr5，我认为是因为sdshdr5能保存的大小较少，2^5=32，因此就不使用它。</p>\n<p>其他的结构体保存了len、alloc、flags以及buf四个属性。各自的含义见代码的注释。</p>\n<h2 id=\"sds结构体的获取\">sds结构体的获取</h2>\n<p>上面可以看到有5种结构体的定义，在使用的时候是通过一个宏来获取的：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a309537fa667208835\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#define SDS_HDR(T,s) ((struct sdshdr##T *)((s)-(sizeof(struct sdshdr##T))))</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a309537fa667208835-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a309537fa667208835-1\"><span class=\"crayon-p\">#define SDS_HDR(T,s) ((struct sdshdr##T *)((s)-(sizeof(struct sdshdr##T))))</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p><strong>”##”</strong>被称为连接符，它是一种预处理运算符， 用来把两个语言符号(Token)组合成单个语言符号。比如<code>SDS_HDR(8, s)</code>，根据宏定义展开是：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a309537fe593980311\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n((struct sdshdr8 *)((s)-(sizeof(struct sdshdr8))))</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a309537fe593980311-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a309537fe593980311-1\"><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">sdshdr8 *</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">sizeof</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sdshdr8</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>而具体使用哪一个结构体，sds底层是通过flags属性与<code>SDS_TYPE_MASK</code>做与运算得出具体的类型（具体的实现可见下面的sdslen函数），然后再根据类型去获取具体的结构体。</p>\n<h2 id=\"sds特性的实现\">sds特性的实现</h2>\n<p>在Redis设计与实现一书中讲到，相比C字符串而言，sds的特性如下：</p>\n<blockquote>\n<ul>\n<li>常数复杂度获取字符串长度</li>\n<li>杜绝缓冲区溢出</li>\n<li>减少内存重新分配次数</li>\n<li>二进制安全</li>\n</ul>\n</blockquote>\n<p>那么，它是怎么做到的呢？看代码。</p>\n<h3 id=\"常数复杂度获取字符串长度\">常数复杂度获取字符串长度</h3>\n<p>因为sds将长度属性保存在结构体中，所以只需要读取这个属性就能获取到sds的长度，具体调用的函数时sdslen，实现如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a30953802339720570\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nstatic inline size_t sdslen(const sds s) {\r\n    unsigned char flags = s[-1];\r\n    switch(flags&amp;SDS_TYPE_MASK) {\r\n        case SDS_TYPE_5:\r\n            return SDS_TYPE_5_LEN(flags);\r\n        case SDS_TYPE_8:\r\n            return SDS_HDR(8,s)-&gt;len;\r\n        case SDS_TYPE_16:\r\n            return SDS_HDR(16,s)-&gt;len;\r\n        case SDS_TYPE_32:\r\n            return SDS_HDR(32,s)-&gt;len;\r\n        case SDS_TYPE_64:\r\n            return SDS_HDR(64,s)-&gt;len;\r\n    }\r\n    return 0;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a30953802339720570-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a30953802339720570-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a30953802339720570-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a30953802339720570-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a30953802339720570-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a30953802339720570-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a30953802339720570-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a30953802339720570-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a30953802339720570-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a30953802339720570-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a30953802339720570-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a30953802339720570-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a30953802339720570-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a30953802339720570-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a30953802339720570-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a30953802339720570-16\">16</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a30953802339720570-1\"><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">inline </span><span class=\"crayon-e\">size_t </span><span class=\"crayon-e\">sdslen</span><span class=\"crayon-sy\">(</span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">sds</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a30953802339720570-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">unsigned</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">char</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">flags</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a30953802339720570-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">switch</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">flags</span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">SDS_TYPE_MASK</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a30953802339720570-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">case</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">SDS_TYPE_5</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a30953802339720570-5\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">SDS_TYPE_5_LEN</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">flags</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a30953802339720570-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">case</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">SDS_TYPE_8</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a30953802339720570-7\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">SDS_HDR</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">len</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a30953802339720570-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">case</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">SDS_TYPE_16</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a30953802339720570-9\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">SDS_HDR</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">16</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">len</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a30953802339720570-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">case</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">SDS_TYPE_32</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a30953802339720570-11\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">SDS_HDR</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">32</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">len</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a30953802339720570-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">case</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">SDS_TYPE_64</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a30953802339720570-13\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">SDS_HDR</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">64</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">len</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a30953802339720570-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a30953802339720570-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a30953802339720570-16\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0029 seconds] -->\r\n<p>可以看到，函数是根据类型调用SDS_HDR宏来获取具体的sds结构，然后直接返回结构体的len属性。</p>\n<h3 id=\"杜绝缓冲区溢出\">杜绝缓冲区溢出</h3>\n<p>对于C字符串的操作函数来说，如果在修改字符串的时候忘了为字符串分配足够的空间，就有可能出现缓冲区溢出的情况。而sds中的API就不会出现这种情况，因为它在修改sds之前，都会判断它是否有足够的空间完成接下来的操作。</p>\n<p>拿书中举例的<code>sdscat</code>函数来看，如果<code>strcat</code>想在原来的”Redis”字符串的基础上进行字符串拼接的操作，但是没有检查空间是否满足，就有可能会修改了”Redis”字符串之后使用到的内存，可能是其他结构使用了，也有可能是一段没有被使用的空间，因此有可能会出现缓冲区溢出。但是<code>sdscat</code>就不会，如下面代码所示：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a30953806110200117\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsds sdscatlen(sds s, const void *t, size_t len) {\r\n    size_t curlen = sdslen(s);\r\n\r\n    s = sdsMakeRoomFor(s,len);\r\n    if (s == NULL) return NULL;\r\n    memcpy(s+curlen, t, len);\r\n    sdssetlen(s, curlen+len);\r\n    s[curlen+len] = '\\0';\r\n    return s;\r\n}\r\n\r\nsds sdscat(sds s, const char *t) {\r\n    return sdscatlen(s, t, strlen(t));\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a30953806110200117-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a30953806110200117-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a30953806110200117-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a30953806110200117-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a30953806110200117-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a30953806110200117-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a30953806110200117-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a30953806110200117-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a30953806110200117-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a30953806110200117-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a30953806110200117-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a30953806110200117-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a30953806110200117-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a30953806110200117-14\">14</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a30953806110200117-1\"><span class=\"crayon-e\">sds </span><span class=\"crayon-e\">sdscatlen</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">sds</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">t</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">size_t </span><span class=\"crayon-v\">len</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a30953806110200117-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">size_t </span><span class=\"crayon-v\">curlen</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sdslen</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a30953806110200117-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a30953806110200117-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sdsMakeRoomFor</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">len</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a30953806110200117-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a30953806110200117-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">memcpy</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s</span><span class=\"crayon-o\">+</span><span class=\"crayon-v\">curlen</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">t</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">len</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a30953806110200117-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">sdssetlen</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">curlen</span><span class=\"crayon-o\">+</span><span class=\"crayon-v\">len</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a30953806110200117-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">curlen</span><span class=\"crayon-o\">+</span><span class=\"crayon-v\">len</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'\\0'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a30953806110200117-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a30953806110200117-10\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a30953806110200117-11\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a30953806110200117-12\"><span class=\"crayon-e\">sds </span><span class=\"crayon-e\">sdscat</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">sds</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">char</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">t</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a30953806110200117-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sdscatlen</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">t</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">strlen</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">t</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a30953806110200117-14\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0038 seconds] -->\r\n<p>从代码中可以看到，在执行<code>memcpy</code>将字符串写入sds之前会调用<code>sdsMakeRoomFor</code>函数去检查sds字符串s是否有足够的空间，如果没有足够空间，就为其分配足够的空间，从而杜绝了缓冲区溢出。<code>sdsMakeRoomFor</code>函数的实现如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a3095380a704233624\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsds sdsMakeRoomFor(sds s, size_t addlen) {\r\n    void *sh, *newsh;\r\n    size_t avail = sdsavail(s);\r\n    size_t len, newlen;\r\n    char type, oldtype = s[-1] &amp; SDS_TYPE_MASK;\r\n    int hdrlen;\r\n\r\n    /* 只有有足够空间就马上返回，否则就继续执行分配空间的操作 */\r\n    if (avail &gt;= addlen) return s;\r\n\r\n    len = sdslen(s);\r\n    sh = (char*)s-sdsHdrSize(oldtype);\r\n    newlen = (len+addlen);\r\n    // SDS_MAX_PREALLOC == 1MB，如果修改后的长度小于1M，则分配的空间是原来的2倍，否则增加1MB的空间\r\n    if (newlen</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a3095380a704233624-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a3095380a704233624-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a3095380a704233624-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a3095380a704233624-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a3095380a704233624-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a3095380a704233624-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a3095380a704233624-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a3095380a704233624-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a3095380a704233624-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a3095380a704233624-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a3095380a704233624-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a3095380a704233624-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a3095380a704233624-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a3095380a704233624-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a3095380a704233624-15\">15</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a3095380a704233624-1\"><span class=\"crayon-e\">sds </span><span class=\"crayon-e\">sdsMakeRoomFor</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">sds</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">size_t </span><span class=\"crayon-v\">addlen</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a3095380a704233624-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">sh</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">newsh</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a3095380a704233624-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">size_t </span><span class=\"crayon-v\">avail</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sdsavail</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a3095380a704233624-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">size_t </span><span class=\"crayon-v\">len</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">newlen</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a3095380a704233624-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">char</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">type</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">oldtype</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">SDS_TYPE_MASK</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a3095380a704233624-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">hdrlen</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a3095380a704233624-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a3095380a704233624-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">/* 只有有足够空间就马上返回，否则就继续执行分配空间的操作 */</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a3095380a704233624-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">avail</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">addlen</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a3095380a704233624-10\"> </div><div class=\"crayon-line\" id=\"crayon-5ac9a3095380a704233624-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">len</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sdslen</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a3095380a704233624-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">sh</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">char</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">)</span><span class=\"crayon-v\">s</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">sdsHdrSize</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">oldtype</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a3095380a704233624-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">newlen</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">len</span><span class=\"crayon-o\">+</span><span class=\"crayon-v\">addlen</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a3095380a704233624-14\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">// SDS_MAX_PREALLOC == 1MB，如果修改后的长度小于1M，则分配的空间是原来的2倍，否则增加1MB的空间</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a3095380a704233624-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">newlen</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0028 seconds] -->\r\n<p></p>\n<h3 id=\"减少内存分配操作\">减少内存分配操作</h3>\n<p>sds字符串的很多操作都涉及到修改字符串内容，比如<code>sdscat</code>拼接字符串、<code>sdscpy</code>拷贝字符串等等。这时候就需要内存的分配与释放，如果每次操作都分配刚刚好的大小，那么对程序的性能必定有影响，因为内存分配涉及到系统调用以及一些复杂的算法。</p>\n<p>sds使用了空间预分配以及惰性空间释放的策略来减少内存分配操作。</p>\n<h4 id=\"空间预分配\">空间预分配</h4>\n<p>前面提到，每次涉及到字符串的修改时，都会调用<code>sdsMakeRoomFor</code>检查sds字符串，如果大小不够再进行大小的重新分配。<code>sdsMakeRoomFor</code>函数有下面这几行判断：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a30953831054101961\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n// SDS_MAX_PREALLOC == 1MB，如果修改后的长度小于1M，则分配的空间是原来的2倍，否则增加1MB的空间\r\nif (newlen</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a30953831054101961-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a30953831054101961-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a30953831054101961-1\"><span class=\"crayon-c\">// SDS_MAX_PREALLOC == 1MB，如果修改后的长度小于1M，则分配的空间是原来的2倍，否则增加1MB的空间</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a30953831054101961-2\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">newlen</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>函数判断字符串修改后的大小，如果修改后的长度小于1M，则分配给sds的空间是原来的2倍，否则增加1MB的空间。</p>\n<h4 id=\"惰性空间释放\">惰性空间释放</h4>\n<p>如果操作后减少了字符串的大小，比如下面的<code>sdstrim</code>函数，只是在最后修改len属性，不会马上释放多余的空间，而是继续保留多余的空间，这样在下次需要增加sds字符串的大小时，就不需要再为其分配空间了。当然，如果之后检查到sds的大小实在太大，也会调用<code>sdsRemoveFreeSpac</code>e函数释放多余的空间。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a30953841338213081\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsds sdstrim(sds s, const char *cset) {\r\n    char *start, *end, *sp, *ep;\r\n    size_t len;\r\n\r\n    sp = start = s;\r\n    ep = end = s+sdslen(s)-1;\r\n    /* 从头部和尾部逐个字符遍历往中间靠拢，如果字符在cest中，则继续前进 */\r\n    while(sp  sp &amp;&amp; strchr(cset, *ep)) ep--;\r\n    len = (sp &gt; ep) ? 0 : ((ep-sp)+1); // 全部被去除了，长度就是0\r\n    if (s != sp) memmove(s, sp, len); // 拷贝内容\r\n    s[len] = '\\0';\r\n    sdssetlen(s,len);\r\n    return s;\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a30953841338213081-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a30953841338213081-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a30953841338213081-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a30953841338213081-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a30953841338213081-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a30953841338213081-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a30953841338213081-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a30953841338213081-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a30953841338213081-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a30953841338213081-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a30953841338213081-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a30953841338213081-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a30953841338213081-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a30953841338213081-14\">14</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a30953841338213081-1\"><span class=\"crayon-e\">sds </span><span class=\"crayon-e\">sdstrim</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">sds</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">char</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">cset</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a30953841338213081-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">char</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">start</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-st\">end</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">sp</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">ep</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a30953841338213081-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">size_t </span><span class=\"crayon-v\">len</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a30953841338213081-4\"> </div><div class=\"crayon-line\" id=\"crayon-5ac9a30953841338213081-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">sp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">start</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a30953841338213081-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">ep</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">end</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-o\">+</span><span class=\"crayon-e\">sdslen</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a30953841338213081-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">/* 从头部和尾部逐个字符遍历往中间靠拢，如果字符在cest中，则继续前进 */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a30953841338213081-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">while</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">sp  </span><span class=\"crayon-v\">sp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">strchr</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">cset</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">ep</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ep</span><span class=\"crayon-o\">--</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a30953841338213081-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">len</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ep</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ep</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">sp</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 全部被去除了，长度就是0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a30953841338213081-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sp</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">memmove</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sp</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">len</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// 拷贝内容</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a30953841338213081-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">len</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'\\0'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a30953841338213081-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">sdssetlen</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">len</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a30953841338213081-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a30953841338213081-14\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0035 seconds] -->\r\n<p></p>\n<h3 id=\"二进制安全\">二进制安全</h3>\n<p>二进制安全指的是只关心二进制化的字符串，不关心具体格式。只会严格的按照二进制的数据存取，不会妄图以某种特殊格式解析数据。比如遇到’\\0’字符不会停止解析。</p>\n<p>对于C字符串来说，<code>strlen</code>是判断遇到’\\0’之前的字符数量。如果需要保存二进制的数据，就不能通过传统的C字符串来保存，因为获取不到它真实的长度。而sds字符串是通过len属性保存字符串的大小，所以它是二进制安全的。</p>\n<h2 id=\"其他小函数实现\">其他小函数实现</h2>\n<p>在阅读源码的过程中，也发现了两个个人比较感兴趣趣的函数：</p>\n<blockquote>\n<ul>\n<li>sdsll2str（将long long类型的整型数字转成字符串）</li>\n<li>sdstrim （去除头部和尾部的指定字符）</li>\n</ul>\n</blockquote>\n<p>我这两个函数拉出来做了测试，在项目的<code>redis-4.0/tests</code>目录下。<code>sdstrim</code>函数的实现源码上面有列出，看看<code>sdsll2str</code>的实现：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a30953846280560221\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nint sdsll2str(char *s, long long value) {\r\n    char *p, aux;\r\n    unsigned long long v;\r\n    size_t l;\r\n\r\n    /* 通过取余数得到原字符串的逆转形式 */\r\n    v = (value</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a30953846280560221-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a30953846280560221-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a30953846280560221-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a30953846280560221-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a30953846280560221-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a30953846280560221-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a30953846280560221-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a30953846280560221-1\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sdsll2str</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">char</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">value</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a30953846280560221-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">char</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">aux</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a30953846280560221-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">unsigned</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">v</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a30953846280560221-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">size</span><span class=\"crayon-sy\">_</span>t<span class=\"crayon-h\"> </span><span class=\"crayon-v\">l</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a30953846280560221-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a30953846280560221-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-c\">/* 通过取余数得到原字符串的逆转形式 */</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a30953846280560221-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">v</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">value</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0085 seconds] -->\r\n<p>函数是通过不断取余数，得到原字符串的逆转形式，接着，通过从尾部开始将字符逐个放到字符串s中，看起来像是一个反转操作，从而实现了将整型转为字符串的操作。</p>\n<p>觉得感兴趣是因为<code>sdsll2str</code>这个函数在之前学习C语言的时候经常能看到作为问题出现，能看到如此简洁的实现，表示眼前一亮。而在PHP开发时经常使用trim函数，所以想看看它们的区别。</p>\n<h2 id=\"总结\">总结</h2>\n<p>通过详细地阅读sds的源码，不仅学习到sds的实现细节，还学习到了一些常用字符串操作函数的实现。如果只是仅仅看看数据结构的定义也可以初步了解，但是要深入了解的话还是需要详细的阅读具体函数的实现代码。还是那句，写代码的，需要阅读更多代码来增强灵感。</p>\n<p>我在github有对Redis源码更详细的注解。感兴趣的可以围观一下，给个star。<a href=\"https://github.com/hoohack/read-redis-src\">Redis4.0源码注解</a>。可以通过<a href=\"https://github.com/hoohack/read-redis-src/commits/master\">commit记录</a>查看已添加的注解。</p>\n<p>原创文章，文笔有限，才疏学浅，文中若有不正之处，万望告知。</p>\n\r\n        \r\n            <blockquote class=\"rewards\">\n        <p><strong>打赏支持我写出更多好文章，谢谢！</strong></p>\n        <a href=\"#rewardbox\" id=\"rewards-button\" class=\"fancybox\"><span class=\"btn-bluet-blue href-style\"><i class=\"fa fa-jpy\"></i> 打赏作者</span></a>\n    </blockquote>\n\n    <div id=\"rewardbox\">\n        <h4>打赏支持我写出更多好文章，谢谢！</h4>\n                <p>任选一种支付方式</p>\n                <p>\n                        <img src=\"http://jbcdn2.b0.upaiyun.com/2016/05/7aa70eaa311d5a5dec82ca0d49624741.png\">\n            \n                            <img src=\"http://jbcdn2.b0.upaiyun.com/2016/05/1a4b335ec981d013f4002205a23fedd0.jpg\">\n                    </p>\n    </div>\n\n    \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113798\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113798votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113798\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/hector\">hoohack</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/hector\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2017/07/df22a501f19a5bba1b3331e2001f8ec2.jpeg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            一个正在努力的菜鸟        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/hector\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/hector/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/hector/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 27</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://www.hoohack.me\"><i class=\"fa fa-link\"></i></a> <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/u/2388493434?is_all=1\"><i class=\"fa fa-weibo\"></i></a> <a title=\"QQ：914099943\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：hhq8307231\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a> <a title=\"GitHub主页\" target=\"_blank\" href=\"https://github.com/hoohack\"><i class=\"fa fa-github\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>\r\n\t<!-- END .entry -->\r\n\r\n\r\n<script type=\"text/javascript\">\r\nvar jiathis_config={\r\n\tdata_track_clickback:false,\r\n\ttitle:\"分享从伯乐在线看到的一篇好文章 \",\r\n\tsummary:\"《Redis源码阅读：sds字符串实现》\",\r\n\tpic:\"http://jbcdn2.b0.upaiyun.com/2016/04/49961db8952e63d98b519b76a2daa5e2.png\",\r\n\tappkey:{\r\n         \"tsina\": 1473879058    },\r\n\tralateuid:{\r\n\t\t\"tsina\": 1670481425\t},\r\n\thideMore:false\r\n}\r\n</script>\r\n<script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js?uid=1745061\" charset=\"utf-8\"></script>\r\n<!-- JiaThis Button END -->\r\n\t\t\t<div class=\"textwidget\"><p><a href=\"http://group.jobbole.com/22945/\" target=\"_blank\"><img src=\"http://wx1.sinaimg.cn/mw690/bfdcef89gy1fq547hqqaij20h803cgm9.jpg\"></a></p>\n</div>\n\t\t\r\n</div>\r\n<!-- END .post -->\r\n            <div style=\"text-align: left;\">\r\n            <h3>相关文章</h3>\r\n            <ul style=\"font-size: 13px; list-style: disc inside;\">\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"深入学习 Redis（1）：Redis 内存模型\" target=\"_blank\" href=\"http://blog.jobbole.com/113789/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">深入学习 Redis（1）：Redis 内存模型</a>\r\n                         · <a href=\"http://blog.jobbole.com/113789/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 3</a>                    </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"Redis 集群部署及踩过的坑\" target=\"_blank\" href=\"http://blog.jobbole.com/113760/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">Redis 集群部署及踩过的坑</a>\r\n                                            </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"布隆过滤器:Google Guava类库源码分析及基于Redis Bitmaps的重构\" target=\"_blank\" href=\"http://blog.jobbole.com/113396/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">布隆过滤器:Google Guava类库源码分析及基于Redis Bitmaps的重构</a>\r\n                                            </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"如何让网站不下线而从 Redis 2 迁移到 Redis 3\" target=\"_blank\" href=\"http://blog.jobbole.com/112744/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">如何让网站不下线而从 Redis 2 迁移到 Redis 3</a>\r\n                         · <a href=\"http://blog.jobbole.com/112744/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 1</a>                    </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"基于 Redis 实现分布式应用限流\" target=\"_blank\" href=\"http://blog.jobbole.com/112381/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">基于 Redis 实现分布式应用限流</a>\r\n                                            </span>\r\n                    </li>\r\n                            </ul>\r\n        </div>\r\n    \r\n    \n<div style=\"text-align: left;\">\n    <h3>可能感兴趣的话题</h3>\n    <ul style=\"font-size: 13px; list-style: disc inside;\">\n                        <li>\n                    <a href=\"http://group.jobbole.com/33039/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"Eng  ---  React ,Vue ,Angular全家桶套餐外的另一种超轻量级实现方式 (16kb)\" target=\"_blank\">Eng  ---  React ,Vue ,Angular全家桶套餐外的另一种超轻量级实...</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/33038/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"28岁刚入门，靠谱不？\" target=\"_blank\">28岁刚入门，靠谱不？</a>\n                     · <a href=\"http://group.jobbole.com/33038/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 7</a>                </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32985/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"工作四年，该如何晋级架构师？\" target=\"_blank\">工作四年，该如何晋级架构师？</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32958/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"java 的nio和网络编程nio 的区别\" target=\"_blank\">java 的nio和网络编程nio 的区别</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32933/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"工作压力大，然后出错多。。然后工作压力大。该怎么调整自己的状态……\" target=\"_blank\">工作压力大，然后出错多。。然后工作压力大。该怎么调整自己的状态……</a>\n                     · <a href=\"http://group.jobbole.com/32933/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 5</a>                </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32879/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"是去北上广深闯几年还是留在二线城市？\" target=\"_blank\">是去北上广深闯几年还是留在二线城市？</a>\n                     · <a href=\"http://group.jobbole.com/32879/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 2</a>                </li>\n                </ul>\n</div>\r\n\t\n            <div id=\"article-comment\" class=\"dot-box center-align\">\n\n                        <a href=\"http://www.jobbole.com/login?redirect=http://blog.jobbole.com/113798/\"><button type=\"button\" class=\"btn btn-non-transparent\">登录后评论</button></a>\n            \n            <a target=\"_blank\" href=\"http://www.jobbole.com/register\"><button type=\"button\" class=\"btn btn-primary\">新用户注册</button></a>\n\n            <br><br>\n            <span>直接登录</span>\n            <style type=\"text/css\">.t_login_text{margin:0; padding:0;}.t_login_button{margin:0; padding: 5px 0;}.t_login_button a{margin:0; padding-right:3px; line-height:25px}.t_login_button img{display:inline; border:none;}</style><!-- 使用社交帐号登录 来自 WordPress连接微博 插件 --><span class=\"connectBox1 t_login_button\"><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=weixin&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113798%2F\" title=\"微信\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_weixin.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=qzone&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113798%2F\" title=\"QQ\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_qzone.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=sina&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113798%2F\" title=\"新浪微博\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_sina.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=douban&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113798%2F\" title=\"豆瓣\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_douban.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=github&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113798%2F\" title=\"GitHub\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_github.png\"></a></span>        </div>\n    \n\n    <div id=\"comment_list\" class=\"comments\">\n\n        \n    </div>\n\t\t\r\n\r\n\t\r\n</div>", "tag": "IT技术-Redis", "url": "http://blog.jobbole.com/113798/", "url_object_id": "1bd4810b83c51a23ef605311000781f3", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2016/04/49961db8952e63d98b519b76a2daa5e2.png"], "front_image_path": "full/c766feed221138f7946130756cddfc7e86e388b4.jpg"}
{"title": "IT 职场新人碰到的几个常见误区", "create_date": "2018/03/29", "praise_nums": "2", "fav_nums": "2", "comments_nums": "0", "content": "<div class=\"grid-8\">\r\n\r\n\t\t\r\n\t<!-- BEGIN .post -->\r\n<div class=\"post-112038 post type-post status-publish format-standard hentry category-career tag-253 odd\" id=\"post-112038\">\r\n\t\r\n\t<!-- BEGIN .entry-header -->\r\n\t<div class=\"entry-header\">\r\n\t\r\n\t\t\t\t\r\n\t\t<h1>IT 职场新人碰到的几个常见误区</h1>\r\n\t\t\r\n\t\t\t\t\t\t\t\r\n\t</div>\r\n\t<!-- BEGIN .entry-header -->\r\n\t\r\n\t<!-- BEGIN .entry-meta -->\r\n\t<div class=\"entry-meta\">\r\n\t\r\n\t\t<p class=\"entry-meta-hide-on-mobile\">\r\n\r\n            2018/03/29 ·  <a href=\"http://blog.jobbole.com/category/career/\" rel=\"category tag\">职场</a>\r\n            \r\n            \r\n\r\n            \r\n             ·  <a href=\"http://blog.jobbole.com/tag/%e8%81%8c%e5%9c%ba/\">职场</a>\r\n            \r\n</p>\r\n\r\n<!-- JiaThis Button BEGIN -->\r\n<div class=\"jiathis_style\" style=\"display: block; margin: 0 0px; clear: both;\"><span class=\"jiathis_txt\">分享到：</span>\r\n<a class=\"jiathis_button_tsina\"></a>\r\n<a class=\"jiathis_button_weixin\"></a>\r\n<a class=\"jiathis_button_qzone\"></a>\r\n<a class=\"jiathis_button_fb\"></a>\r\n<a class=\"jiathis_button_douban\"></a>\r\n<a class=\"jiathis_button_readitlater\"></a>\r\n<a class=\"jiathis_button_evernote\"></a>\r\n<a class=\"jiathis_button_ydnote\"></a>\r\n<a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\r\n<a class=\"jiathis_counter_style\"></a>\r\n</div>\r\n<!-- JiaThis Button END -->\r\n\r\n\r\n\t</div>\r\n\t<!-- END .entry-meta -->\r\n\r\n\t<!-- BEGIN .entry -->\r\n\t<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://www.cnblogs.com/sankt/p/8658028.html\">沐榕休</a>   </div><p>自己工作 10+ 年了，大概 5 年前从技术转管理后，多少还是发现一些职场新人职业发展的问题。</p>\n<p>表现惊艳的新人肯定有，这种人往往在学校里面或者进入职场后就养成了一些非常良好的做事方式和工作习惯，工作效率高，产出多，甚至很短时间内就可以带新人，年度最佳新人当之无愧。</p>\n<p>然而表现不到位的似乎更多一些，这些员工工作时间短（比如说应届毕业生或者不到两年）尤其性格内向的往往容易掉入错误泥潭，无法自拔，而这些错误的行为会对未来的发展造成非常负面的影响，从而导致职场发展往失败的道路上越走越远。</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx2.sinaimg.cn/large/7cc829d3gy1fptsk9tvx8j20go0b441z.jpg\"></p>\n<p>我分别从以下角度来阐述一下，</p>\n<h3>1. 不愿意和同事沟通，不愿意向同事多学习</h3>\n<p>这种员工大多比较内向或者性情有点高冷，须不知三人行，必有我师。多向同事学习，互通有无，对自己以后的发展有百利而无一害。有导师制或者老员工带，情况或许会有所改善，但如果内因没有改变，最终效果依旧不容乐观。</p>\n<p>技术开发工作中遇到一些技术难题非常正常，当然独立思考固然可贵，但是公司项目往往有一定的时间限制，优先解决问题永远放在第一位，而不是一个人在那里苦苦挣扎和搜索解决方案。如果时间压力不大，多思考一下也未尝不可。考虑到交付压力，这个时候就需要积极和同事，技术经理沟通，寻找解决思路，通常情况下，积极的沟通好过自己的单打独斗。也许同事或者老板的一句话，就应了那据古诗，山重水复疑无路，柳暗花明又一村。与此同时也和同事建立了更好的友谊，在老板心里也留下了做事有方法的好印象。</p>\n<h3>2.视野狭窄，只关注自己的一亩三分地，囿于角色</h3>\n<p>这种情况其实在职场中多见不仅是初级程序员，甚至工作五年以上的程序员也有类似的问题，不是自己的事情不闻不问，而且危害更大。</p>\n<p>公司项目往往大而全，如果仅仅专注自己的那个角落，那么永远都是只见树木，不见森林。</p>\n<p>我相信没有老板会介意下面的程序员多承担一些责任，多做一些事情，最后给项目组多一些产出。</p>\n<p>既然老板不介意，那么就应该大胆的跳出自己的职责范围，多看看公司的其他项目，丰富自己的行业知识。</p>\n<p>职责外的事情，帮的上的不要躲避,，努力承担更多的东西。帮助别人就是提高自己，教学相长就是这个意思。况且你这次帮了别人，下次你的项目紧或者遇到技术难题了，受助之人肯定投桃报李，这样就形成了良性互助氛围，整个项目组的产出也同步提升了。</p>\n<p>一般来说，公司要提升一个人，最好的策略就是先让候选人做一些将来职位才需要做的事情。做的好，理所当然就要提拔。做的不好，则可以提前发现该员工的问题，暂缓提拔，需要多考察一段时间。这样的试错成本毫无疑问是最低的。</p>\n<h3>3.格局太小，对项目以外的技术视而不见，知识面陈旧，匮乏，技能极其单一</h3>\n<p>这里其实谈到了整个IT行业的问题，技术发展太快了。主要还是一个持续提升竞争力的一个话题。</p>\n<p>今天还是桌面开发，明天web开发就成为主流。</p>\n<p>好不容易掌握了关系型数据库，No-SQL成为主流。</p>\n<p>费了九牛二虎之力，熟练掌握Java, C#等静态语言，发现动态语言GO, Python成为云计算，机器学习的标配。</p>\n<p>移动开发昨天还是Object-C, Java, 今天就变成Swift, Kotlin。</p>\n<p> </p>\n<p>当然这里不是说让大家紧跟潮流，扼住时尚。那样做除了疲于奔命，累死在工作台，没有其他的结果。</p>\n<p>其实只要选择一个方向，纵深学习和积累，必有所成。</p>\n<p>比如说，你熟悉 Java, 那么学习 Kotlin 绝对驾轻就熟。</p>\n<p>你有扎实的关系型数据库基础，那么掌握 MangoDB 肯定是件轻而易举的事情。</p>\n<p>编成思想和解决问题的思路都是相通的，平时的学习和工作中要善于思考，举一反三。并且做到与时俱进，及时更新自己的知识库和技能属性，保持良好的市场竞争力。</p>\n<p>做完事情后多思考，怎样做得更好，站在更好的要求上看问题.</p>\n<p>我举两个实际案例，</p>\n<blockquote><p>程序员A在某国企里面，持续开发 Windows Form, 拖拉控件为主，对SQL Server数据库增删改查，时间长达五年之久，突然有一天打算离职，看看新的机会，以为有五年工作经验，可以很轻松找一个更好的工作。但是实际上求职之路异常艰辛，名义上的五年工作经验，其实就是极其单一的技能重复使用了五年。而且大环境也变了，主流已经是web开发，移动开发了。因为没有及时更新自己的知识库和技能储备，那么真要跳槽的时候可能已经跳不动了。</p>\n<p>程序员B在某外企，氛围比较安逸轻松，项目节奏慢，看似也作了不少项目，但做的项目几乎比较类似，难度一般，涉及面挺广，但技术点都是蜻蜓点水，浅尝辄止。这样过了三年，其实积累也是比较松散，知识的深度没有，核心技能并没有养成。</p></blockquote>\n<h3>4.对未来没有想法，不考虑三五年自己要做什么</h3>\n<p>作者本人就犯过类似的错误，幡然醒悟的时候，三年时间已经过去了。</p>\n<p>程序员的职业生涯里面最初的三年其实是一个非常重要的打磨和规划时期，如果在迷茫中度过，那么事后想起肯定会扼腕叹息，奈何流水已经东去，再无复返之理。</p>\n<p>有目标，而没有具体的计划，那么就是一个愿景而已。</p>\n<p>建议不管是初级还是高级程序员，都应该积极向前辈或者直属老板沟通，看看他们有没有值得借鉴的规划和建议。</p>\n<p>职场大忌就是被动等待命运的安排，作者本人也是在职业生涯初期等待老板来帮我规划未来，到现在为止，十年过去了，也没有等到。。。</p>\n<p>所以老板不会主动帮助你规划未来，最重要的事情还是自己对自身的要求和期望。</p>\n<p> </p>\n<h3>5.没有意识到是给自己打工还是公司打工</h3>\n<p>这也是一个非常好的话题，很多人都没有想明白，甚至包括一些工作十年之久的程序员。</p>\n<p>想明白这一点，工作积极性明显就会好太多。自我驱动, 让工作更加有趣和有意义。</p>\n<p>国内知名的互联网公司大老板说过一句话，非常值得深思。</p>\n<p>“我每年付你20万，五年也就是100万。如果你在这里混日子，那么最后吃亏的肯定是你。你的五年青春就只值100万吗？”</p>\n<p>所以职场新人的主人翁意识一定要加强，你要持续提升自己的能力，持续强化自己创造价值的能力。</p>\n<p>举个例子，比如说现在公司支付你20万每年，那么你应该有目标能给公司带来远超过20万的收益，多多益善。</p>\n<p>你有这个能力，公司肯定也会对你相应回报。如果公司不给你升职加薪，那么一走了之，潇洒痛快。优质的人才从来都是抢着要。</p>\n<h3>6.不愿意走出舒适区域，不敢尝试新的东西</h3>\n<p>这点倒是因人而异，不可强求。这个话题其实有点广义。</p>\n<p>如果你在某个方向做的非常好，而且回报也不错，那么不愿意涉足其他领域也无可厚非。</p>\n<p>这个世界唯一不变的东西就是世界一直在改变。今天还有的岗位，明天也许就要消失。世界要抛弃你，都不会打一声招呼。</p>\n<blockquote><p>举个例子，你在公司是SQL Server或者Oracle专家，但是公司计划转非关系型数据库，如果你害怕改变甚至拒绝改变，那么意味着你可能要错过另外一个全新的数据存储平台。进而错过很多机会，而那些勇于接受变化，顺应趋势的人肯定会获得更好的时代回报。</p></blockquote>\n<p>又比如说，你现在用的技术在日常项目中都刚好够用，那么从改善用户体验和使用更加主流的技术角度看，是不是应该要尝试一些新的东西，同时也刷新了自己的技术栈，一举两得，何乐而不为呢？</p>\n<blockquote><p>还有一个例子是一位资深程序员习惯了长期的慢节奏的工作氛围，因为公司改组被裁员，不过自身条件不错，很快就加入国内一家一线互联网公司，但是完全适应不了互联网快节奏，工作一段时间就以公司管理”混乱”，战略规划”经常”改变为借口离职了，接下来很长一段时间找不到一个合适自己的工作，加上中年已到，如果自身不积极调整，接下来的工作和生活肯定困难重重。</p></blockquote>\n<h3>总结</h3>\n<p>最后再简单小结一下，职场新人需要做的就是从小事做起，学会吃亏，以结果为目标导向，日常工作中积极和同事，老板沟通。</p>\n<p>工作中要善于总结方法，经常更新问题的思考模式，对职业负责，对目标负责，对自己负责，脚踏实地，主动找事情做，而不是被动等事情来找你。</p>\n<p>相信职场新人如果能成功避开上面说的几个误区，那么在职业发展道路上就可以少走一些弯路，少犯一些错误，从而更快地实现自己的小目标。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112038\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112038votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112038\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>\r\n\t<!-- END .entry -->\r\n\r\n\r\n<script type=\"text/javascript\">\r\nvar jiathis_config={\r\n\tdata_track_clickback:false,\r\n\ttitle:\"分享从伯乐在线看到的一篇好文章 \",\r\n\tsummary:\"《IT 职场新人碰到的几个常见误区》\",\r\n\tpic:\"http://wx2.sinaimg.cn/large/7cc829d3gy1fptsk9tvx8j20go0b441z.jpg\",\r\n\tappkey:{\r\n         \"tsina\": 1473879058    },\r\n\tralateuid:{\r\n\t\t\"tsina\": 1670481425\t},\r\n\thideMore:false\r\n}\r\n</script>\r\n<script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js?uid=1745061\" charset=\"utf-8\"></script>\r\n<!-- JiaThis Button END -->\r\n\t\t\t<div class=\"textwidget\"><p><a href=\"http://group.jobbole.com/22945/\" target=\"_blank\"><img src=\"http://wx1.sinaimg.cn/mw690/bfdcef89gy1fq547hqqaij20h803cgm9.jpg\"></a></p>\n</div>\n\t\t\r\n</div>\r\n<!-- END .post -->\r\n            <div style=\"text-align: left;\">\r\n            <h3>相关文章</h3>\r\n            <ul style=\"font-size: 13px; list-style: disc inside;\">\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"程序员如何规划职业路线？\" target=\"_blank\" href=\"http://blog.jobbole.com/112048/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">程序员如何规划职业路线？</a>\r\n                         · <a href=\"http://blog.jobbole.com/112048/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 4</a>                    </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"100 倍价值的工程师\" target=\"_blank\" href=\"http://blog.jobbole.com/113710/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">100 倍价值的工程师</a>\r\n                         · <a href=\"http://blog.jobbole.com/113710/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 5</a>                    </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"我只想安静地写代码，领导却跟我谈大局、讲奉献\" target=\"_blank\" href=\"http://blog.jobbole.com/113705/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">我只想安静地写代码，领导却跟我谈大局、讲奉献</a>\r\n                         · <a href=\"http://blog.jobbole.com/113705/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 3</a>                    </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"为什么程序员找不到工作：4 个恐怖故事\" target=\"_blank\" href=\"http://blog.jobbole.com/113652/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">为什么程序员找不到工作：4 个恐怖故事</a>\r\n                         · <a href=\"http://blog.jobbole.com/113652/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 7</a>                    </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"一个技术大牛对程序员招聘的吐槽和建议\" target=\"_blank\" href=\"http://blog.jobbole.com/113532/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">一个技术大牛对程序员招聘的吐槽和建议</a>\r\n                         · <a href=\"http://blog.jobbole.com/113532/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 24</a>                    </span>\r\n                    </li>\r\n                            </ul>\r\n        </div>\r\n    \r\n    \n<div style=\"text-align: left;\">\n    <h3>可能感兴趣的话题</h3>\n    <ul style=\"font-size: 13px; list-style: disc inside;\">\n                        <li>\n                    <a href=\"http://group.jobbole.com/33039/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"Eng  ---  React ,Vue ,Angular全家桶套餐外的另一种超轻量级实现方式 (16kb)\" target=\"_blank\">Eng  ---  React ,Vue ,Angular全家桶套餐外的另一种超轻量级实...</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/33038/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"28岁刚入门，靠谱不？\" target=\"_blank\">28岁刚入门，靠谱不？</a>\n                     · <a href=\"http://group.jobbole.com/33038/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 7</a>                </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32985/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"工作四年，该如何晋级架构师？\" target=\"_blank\">工作四年，该如何晋级架构师？</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32958/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"java 的nio和网络编程nio 的区别\" target=\"_blank\">java 的nio和网络编程nio 的区别</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32933/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"工作压力大，然后出错多。。然后工作压力大。该怎么调整自己的状态……\" target=\"_blank\">工作压力大，然后出错多。。然后工作压力大。该怎么调整自己的状态……</a>\n                     · <a href=\"http://group.jobbole.com/32933/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 5</a>                </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32879/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"是去北上广深闯几年还是留在二线城市？\" target=\"_blank\">是去北上广深闯几年还是留在二线城市？</a>\n                     · <a href=\"http://group.jobbole.com/32879/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 2</a>                </li>\n                </ul>\n</div>\r\n\t\n            <div id=\"article-comment\" class=\"dot-box center-align\">\n\n                        <a href=\"http://www.jobbole.com/login?redirect=http://blog.jobbole.com/112038/\"><button type=\"button\" class=\"btn btn-non-transparent\">登录后评论</button></a>\n            \n            <a target=\"_blank\" href=\"http://www.jobbole.com/register\"><button type=\"button\" class=\"btn btn-primary\">新用户注册</button></a>\n\n            <br><br>\n            <span>直接登录</span>\n            <style type=\"text/css\">.t_login_text{margin:0; padding:0;}.t_login_button{margin:0; padding: 5px 0;}.t_login_button a{margin:0; padding-right:3px; line-height:25px}.t_login_button img{display:inline; border:none;}</style><!-- 使用社交帐号登录 来自 WordPress连接微博 插件 --><span class=\"connectBox1 t_login_button\"><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=weixin&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F112038%2F\" title=\"微信\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_weixin.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=qzone&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F112038%2F\" title=\"QQ\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_qzone.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=sina&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F112038%2F\" title=\"新浪微博\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_sina.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=douban&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F112038%2F\" title=\"豆瓣\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_douban.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=github&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F112038%2F\" title=\"GitHub\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_github.png\"></a></span>        </div>\n    \n\n    <div id=\"comment_list\" class=\"comments\">\n\n        \n    </div>\n\t\t\r\n\r\n\t\r\n</div>", "tag": "职场-职场", "url": "http://blog.jobbole.com/112038/", "url_object_id": "4982221dc7233a7fb52e97b15b7f65e8", "front_image_url": ["http://wx2.sinaimg.cn/large/7cc829d3gy1fptsk9tvx8j20go0b441z.jpg"], "front_image_path": "full/031407902bdeff19a2af7d3163aefed119d82c52.jpg"}
{"title": "给初学者的 type 命令教程", "create_date": "2018/04/06", "praise_nums": "1", "fav_nums": "1", "comments_nums": "1", "content": "<div class=\"grid-8\">\r\n\r\n\t\t\r\n\t<!-- BEGIN .post -->\r\n<div class=\"post-113817 post type-post status-publish format-standard hentry category-it-tech tag-linux odd\" id=\"post-113817\">\r\n\t\r\n\t<!-- BEGIN .entry-header -->\r\n\t<div class=\"entry-header\">\r\n\t\r\n\t\t\t\t\r\n\t\t<h1>给初学者的 type 命令教程</h1>\r\n\t\t\r\n\t\t\t\t\t\t\t\r\n\t</div>\r\n\t<!-- BEGIN .entry-header -->\r\n\t\r\n\t<!-- BEGIN .entry-meta -->\r\n\t<div class=\"entry-meta\">\r\n\t\r\n\t\t<p class=\"entry-meta-hide-on-mobile\">\r\n\r\n            2018/04/06 ·  <a href=\"http://blog.jobbole.com/category/it-tech/\" rel=\"category tag\">IT技术</a>\r\n            \r\n                            · <a href=\"#article-comment\"> 1 评论 </a>\r\n            \r\n\r\n            \r\n             ·  <a href=\"http://blog.jobbole.com/tag/linux/\">Linux</a>\r\n            \r\n</p>\r\n\r\n<!-- JiaThis Button BEGIN -->\r\n<div class=\"jiathis_style\" style=\"display: block; margin: 0 0px; clear: both;\"><span class=\"jiathis_txt\">分享到：</span>\r\n<a class=\"jiathis_button_tsina\"></a>\r\n<a class=\"jiathis_button_weixin\"></a>\r\n<a class=\"jiathis_button_qzone\"></a>\r\n<a class=\"jiathis_button_fb\"></a>\r\n<a class=\"jiathis_button_douban\"></a>\r\n<a class=\"jiathis_button_readitlater\"></a>\r\n<a class=\"jiathis_button_evernote\"></a>\r\n<a class=\"jiathis_button_ydnote\"></a>\r\n<a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\r\n<a class=\"jiathis_counter_style\"></a>\r\n</div>\r\n<!-- JiaThis Button END -->\r\n\r\n\r\n\t</div>\r\n\t<!-- END .entry-meta -->\r\n\r\n\t<!-- BEGIN .entry -->\r\n\t<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.ostechnix.com/the-type-command-tutorial-with-examples-for-beginners/\">SK</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9519-1.html\">Linux中国/geekpi</a>   </div><p><code>type</code> 命令用于查找 Linux 命令的信息。顾名思义，你可以使用 <code>type</code> 命令轻松找出给定的命令是否是别名、shell 内置命令、文件、函数或关键字。另外，你也可以找到命令的实际路径。为什么有人需要找到命令类型？例如，如果你经常在共享的计算机上工作，则某些人可能会故意或意外地为特定的 Linux 命令创建别名来执行不需要的操作，例如 <code>alias ls = rm -rf /</code>。因此，在发生更糟糕的事情之前检查它们总是一个好主意。这是 <code>type</code> 命令有用的地方。</p>\n<p>让我给你看一些例子。</p>\n<p>不带任何选项运行 <code>type</code> 命令。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a2c3caaf0467225303\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ type ls\r\nls is aliased to `ls --color=auto'</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a2c3caaf0467225303-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2c3caaf0467225303-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a2c3caaf0467225303-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">type </span><span class=\"crayon-e\">ls</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2c3caaf0467225303-2\"><span class=\"crayon-e\">ls </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">aliased </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">ls</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">color</span><span class=\"crayon-o\">=</span><span class=\"crayon-i\">auto</span>'</div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>正如你在上面的输出中看到的那样，<code>ls</code> 命令已被别名为 <code>ls -color-auto</code>。但是，它是无害的。但只要想想 <code>ls</code> 如果被别名为了其他一些危险的命令。你不想那样，是吗？</p>\n<p>你可以使用 <code>-t</code> 选项仅找出 Linux 命令的类型。例如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a2c3cab08867145580\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ type -t ls\r\nalias\r\n$ type -t mkdir\r\nfile\r\n$ type -t pwd\r\nbuiltin\r\n$ type -t if\r\nkeyword\r\n$ type -t rvm\r\nfunction</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a2c3cab08867145580-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2c3cab08867145580-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2c3cab08867145580-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2c3cab08867145580-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2c3cab08867145580-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2c3cab08867145580-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2c3cab08867145580-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2c3cab08867145580-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2c3cab08867145580-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2c3cab08867145580-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a2c3cab08867145580-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">type</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ls</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2c3cab08867145580-2\"><span class=\"crayon-i\">alias</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2c3cab08867145580-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">type</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">mkdir</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2c3cab08867145580-4\"><span class=\"crayon-i\">file</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2c3cab08867145580-5\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">type</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">pwd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2c3cab08867145580-6\"><span class=\"crayon-i\">builtin</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2c3cab08867145580-7\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">type</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">if</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2c3cab08867145580-8\"><span class=\"crayon-i\">keyword</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2c3cab08867145580-9\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">type</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">rvm</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2c3cab08867145580-10\"><span class=\"crayon-t\">function</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>该命令仅显示命令的类型，例如别名。它不显示被别名的内容。如果该命令找不到，你将在终端中看不到任何内容。</p>\n<p><code>type</code> 命令的另一个有用的地方是我们可以很容易地找出给定 Linux 命令的绝对路径。为此，请使用 <code>-p</code> 选项，如下所示。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a2c3cab0c643471863\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ type -p cal\r\n/usr/bin/cal</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a2c3cab0c643471863-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2c3cab0c643471863-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a2c3cab0c643471863-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">type</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cal</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2c3cab0c643471863-2\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">cal</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>这与 <code>which ls</code> 命令类似。如果给定的命令是别名，则不会打印任何内容。</p>\n<p>要显示命令的所有信息，请使用 <code>-a</code> 选项。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a2c3cab10495500451\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ type -a ls\r\nls is aliased to `ls --color=auto'\r\nls is /usr/bin/ls\r\nls is /bin/ls</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a2c3cab10495500451-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2c3cab10495500451-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2c3cab10495500451-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2c3cab10495500451-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a2c3cab10495500451-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">type</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ls</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2c3cab10495500451-2\"><span class=\"crayon-e\">ls </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">aliased </span><span class=\"crayon-st\">to</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">ls</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">color</span><span class=\"crayon-o\">=</span><span class=\"crayon-i\">auto</span>'</div><div class=\"crayon-line\" id=\"crayon-5ac9a2c3cab10495500451-3\"><span class=\"crayon-e\">ls </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">ls</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2c3cab10495500451-4\"><span class=\"crayon-e\">ls </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ls</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>如你所见，<code>-a</code> 标志显示给定命令的类型及其绝对路径。有关更多详细信息，请参阅手册页。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a2c3cab14676409853\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ man type</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a2c3cab14676409853-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a2c3cab14676409853-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">man </span><span class=\"crayon-v\">type</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0019 seconds] -->\r\n<p>希望这有帮助。会有更多的好东西。请继续访问！</p>\n<p>干杯!</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113817\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113817votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113817\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>\r\n\t<!-- END .entry -->\r\n\r\n\r\n<script type=\"text/javascript\">\r\nvar jiathis_config={\r\n\tdata_track_clickback:false,\r\n\ttitle:\"分享从伯乐在线看到的一篇好文章 \",\r\n\tsummary:\"《给初学者的 type 命令教程》\",\r\n\tpic:\"http://jbcdn2.b0.upaiyun.com/2018/01/1b8322e1daff605d71fc81e724421f17.jpg\",\r\n\tappkey:{\r\n         \"tsina\": 1473879058    },\r\n\tralateuid:{\r\n\t\t\"tsina\": 1670481425\t},\r\n\thideMore:false\r\n}\r\n</script>\r\n<script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js?uid=1745061\" charset=\"utf-8\"></script>\r\n<!-- JiaThis Button END -->\r\n\t\t\t<div class=\"textwidget\"><p><a href=\"http://group.jobbole.com/22945/\" target=\"_blank\"><img src=\"http://wx1.sinaimg.cn/mw690/bfdcef89gy1fq547hqqaij20h803cgm9.jpg\"></a></p>\n</div>\n\t\t\r\n</div>\r\n<!-- END .post -->\r\n            <div style=\"text-align: left;\">\r\n            <h3>相关文章</h3>\r\n            <ul style=\"font-size: 13px; list-style: disc inside;\">\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"为初学者准备的 ln 命令教程（5 个示例）\" target=\"_blank\" href=\"http://blog.jobbole.com/113800/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">为初学者准备的 ln 命令教程（5 个示例）</a>\r\n                                            </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"如何在 Linux 上安装应用程序\" target=\"_blank\" href=\"http://blog.jobbole.com/113793/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">如何在 Linux 上安装应用程序</a>\r\n                         · <a href=\"http://blog.jobbole.com/113793/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 1</a>                    </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"Linux 中的“大内存页”（hugepage）是个什么？\" target=\"_blank\" href=\"http://blog.jobbole.com/113782/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">Linux 中的“大内存页”（hugepage）是个什么？</a>\r\n                                            </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"du 及 df 命令的使用（附带示例）\" target=\"_blank\" href=\"http://blog.jobbole.com/113780/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">du 及 df 命令的使用（附带示例）</a>\r\n                                            </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"Linux 新用户？来试试这 8 款重要的软件\" target=\"_blank\" href=\"http://blog.jobbole.com/113775/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">Linux 新用户？来试试这 8 款重要的软件</a>\r\n                                            </span>\r\n                    </li>\r\n                            </ul>\r\n        </div>\r\n    \r\n    \n<div style=\"text-align: left;\">\n    <h3>可能感兴趣的话题</h3>\n    <ul style=\"font-size: 13px; list-style: disc inside;\">\n                        <li>\n                    <a href=\"http://group.jobbole.com/33039/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"Eng  ---  React ,Vue ,Angular全家桶套餐外的另一种超轻量级实现方式 (16kb)\" target=\"_blank\">Eng  ---  React ,Vue ,Angular全家桶套餐外的另一种超轻量级实...</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/33038/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"28岁刚入门，靠谱不？\" target=\"_blank\">28岁刚入门，靠谱不？</a>\n                     · <a href=\"http://group.jobbole.com/33038/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 7</a>                </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32985/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"工作四年，该如何晋级架构师？\" target=\"_blank\">工作四年，该如何晋级架构师？</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32958/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"java 的nio和网络编程nio 的区别\" target=\"_blank\">java 的nio和网络编程nio 的区别</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32933/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"工作压力大，然后出错多。。然后工作压力大。该怎么调整自己的状态……\" target=\"_blank\">工作压力大，然后出错多。。然后工作压力大。该怎么调整自己的状态……</a>\n                     · <a href=\"http://group.jobbole.com/32933/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 5</a>                </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32879/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"是去北上广深闯几年还是留在二线城市？\" target=\"_blank\">是去北上广深闯几年还是留在二线城市？</a>\n                     · <a href=\"http://group.jobbole.com/32879/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 2</a>                </li>\n                </ul>\n</div>\r\n\t\n            <div id=\"article-comment\" class=\"dot-box center-align\">\n\n                        <a href=\"http://www.jobbole.com/login?redirect=http://blog.jobbole.com/113817/\"><button type=\"button\" class=\"btn btn-non-transparent\">登录后评论</button></a>\n            \n            <a target=\"_blank\" href=\"http://www.jobbole.com/register\"><button type=\"button\" class=\"btn btn-primary\">新用户注册</button></a>\n\n            <br><br>\n            <span>直接登录</span>\n            <style type=\"text/css\">.t_login_text{margin:0; padding:0;}.t_login_button{margin:0; padding: 5px 0;}.t_login_button a{margin:0; padding-right:3px; line-height:25px}.t_login_button img{display:inline; border:none;}</style><!-- 使用社交帐号登录 来自 WordPress连接微博 插件 --><span class=\"connectBox1 t_login_button\"><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=weixin&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113817%2F\" title=\"微信\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_weixin.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=qzone&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113817%2F\" title=\"QQ\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_qzone.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=sina&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113817%2F\" title=\"新浪微博\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_sina.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=douban&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113817%2F\" title=\"豆瓣\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_douban.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=github&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113817%2F\" title=\"GitHub\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_github.png\"></a></span>        </div>\n    \n\n    <div id=\"comment_list\" class=\"comments\">\n\n                    <h5 id=\"comments\" class=\"sub-title\"><i class=\"glyphicon\"></i>最新评论</h5>\n            <ul class=\"cmnt-list\">\n\n                        <li id=\"comment-162390\" class=\"comment cmnt odd\">\n    \n    <div class=\"cmnt-box\">\n        <div class=\"cmnt-header\">\n                            <a href=\"http://www.jobbole.com/members/wx2327917560\" class=\"cmnt-img\"><img width=\"37\" height=\"37\" src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\" alt=\"\"></a>\n                <div class=\"cmnt-meta\">\n                    <span><a href=\"http://www.jobbole.com/members/wx2327917560\">岳明</a><label class=\"comment_author_data\"> </label></span>\n                    <span class=\"c-title\">\n                                             </span>\n\n                    <span class=\"c-date\">\n                        <a href=\"http://blog.jobbole.com/113817/#comment-162390\">2 小时前</a>\n                    </span>\n\n                    \n                    \n                </div>\n                    </div>\n        <div class=\"cmnt-body\">\n            <p>\n                </p><p>不错不错</p>\n            \n                    </div>\n                    <div class=\"cmnt-footer\">\n\n                \n                <p class=\"c-like\">\n                    <a title=\"赞同\" alt=\"赞同\" class=\"162390voteflag  t-up  href-style vote-comment-up  register-user-only   \" data-comment-id=\"162390\"><i class=\"fa fa-thumbs-o-up\"></i> <span id=\"162390voteuptotal\"> 赞</span></a>\n\n                    \n                    <a rel=\"nofollow\" class=\"comment-reply-link register-user-only\" href=\"http://blog.jobbole.com/113817/?replytocom=162390#respond\" data-onclick='return addComment.moveForm( \"comment-162390\", \"162390\", \"respond\", \"113817\" )' aria-label=\"回复给岳明\">回复 <i class=\"fa fa-reply\"></i></a>\n                </p>\n            </div>\n            </div>\n    </li>\n<!-- #comment-## -->\n            </ul>\n        \n    </div>\n\t\t\r\n\r\n\t\r\n</div>", "tag": "IT技术-Linux", "url": "http://blog.jobbole.com/113817/", "url_object_id": "3ddc63f75c52601a85de2d939777f079", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/01/1b8322e1daff605d71fc81e724421f17.jpg"], "front_image_path": "full/14452eea6b79bce0219227f298ad827f2ba7112d.jpg"}
{"title": "程序员如何规划职业路线？", "create_date": "2018/03/13", "praise_nums": "1", "fav_nums": "4", "comments_nums": "4", "content": "<div class=\"grid-8\">\r\n\r\n\t\t\r\n\t<!-- BEGIN .post -->\r\n<div class=\"post-112048 post type-post status-publish format-standard hentry category-career tag-368 tag-253 odd\" id=\"post-112048\">\r\n\t\r\n\t<!-- BEGIN .entry-header -->\r\n\t<div class=\"entry-header\">\r\n\t\r\n\t\t\t\t\r\n\t\t<h1>程序员如何规划职业路线？</h1>\r\n\t\t\r\n\t\t\t\t\t\t\t\r\n\t</div>\r\n\t<!-- BEGIN .entry-header -->\r\n\t\r\n\t<!-- BEGIN .entry-meta -->\r\n\t<div class=\"entry-meta\">\r\n\t\r\n\t\t<p class=\"entry-meta-hide-on-mobile\">\r\n\r\n            2018/03/13 ·  <a href=\"http://blog.jobbole.com/category/career/\" rel=\"category tag\">职场</a>\r\n            \r\n                            · <a href=\"#article-comment\"> 4 评论 </a>\r\n            \r\n\r\n            \r\n             ·  <a href=\"http://blog.jobbole.com/tag/%e7%a8%8b%e5%ba%8f%e5%91%98/\">程序员</a>, <a href=\"http://blog.jobbole.com/tag/%e8%81%8c%e5%9c%ba/\">职场</a>\r\n            \r\n</p>\r\n\r\n<!-- JiaThis Button BEGIN -->\r\n<div class=\"jiathis_style\" style=\"display: block; margin: 0 0px; clear: both;\"><span class=\"jiathis_txt\">分享到：</span>\r\n<a class=\"jiathis_button_tsina\"></a>\r\n<a class=\"jiathis_button_weixin\"></a>\r\n<a class=\"jiathis_button_qzone\"></a>\r\n<a class=\"jiathis_button_fb\"></a>\r\n<a class=\"jiathis_button_douban\"></a>\r\n<a class=\"jiathis_button_readitlater\"></a>\r\n<a class=\"jiathis_button_evernote\"></a>\r\n<a class=\"jiathis_button_ydnote\"></a>\r\n<a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\r\n<a class=\"jiathis_counter_style\"></a>\r\n</div>\r\n<!-- JiaThis Button END -->\r\n\r\n\r\n\t</div>\r\n\t<!-- END .entry-meta -->\r\n\r\n\t<!-- BEGIN .entry -->\r\n\t<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://my.oschina.net/huangyong/blog/1633257\">黄勇</a>   </div><p>社区中并不缺少有关软件工程师职业发展的文章，甚至可以说是泛滥。很多人都能在这个话题上说两句，三五年工作经验的编程老鸟也好，架构师也好，技术 VP 也好，CTO 也好，都有各自的看法与实践经验。没有哪一套方法是适用于所有人的，这一套软件工程师职业发展纲要，也不过是在你踽踽前行的路上，迷茫时可用来参考借鉴。你的核心竞争力，永远是你的自身实力。切记！</p>\n<h1 id=\"h1_0\">一、专业技能学习捷径</h1>\n<h2 id=\"h2_1\">1、爱上你的编码神器</h2>\n<p>众所周知，软件工程师要做的工作就是写代码，准确地说，你的目标应该是写出满足业务需求并且无法找出 Bug 的代码，而不是写一大堆没用的文字。既然你的任务是写出高质量的代码，那么你首先应该训练的就是打字速度，你需要掌握键盘盲打技能，甚至还要爱上你的“编码神器”，并做到将此工具的用法烂熟于心，闭上眼睛都能正确敲中你想要的快捷键。</p>\n<h2 id=\"h2_2\">2、熟悉底层技术原理</h2>\n<p>当你完全驾驭了计算机的输入设备以后，你需要进一步了解计算机的内部工作原理，不是让你把机器大卸八块，而是你需要全面了解计算机的组成结构与工作原理。如果你不是计算机科班出生也没关系，在网上买一本关于计算机组成原理的书自学即可。你无需做到精通，能全面了解即可，因为接下来你需要在编程的世界中，慢慢去体会计算机的工作感受，你就是计算机的管理者。</p>\n<h2 id=\"h2_3\">3、深入一门编程语言</h2>\n<p>好了，现在是时候学习一门编程语言了，最好的选择是 Java，为什么呢？原因很简单，因为市场需求量最大，我敢保证，你学 Java 肯定比学 PHP 更容易找到工作（希望 PHP 程序员们淡定一些，其实我始终认为 PHP 是世界上最好的编程语言）。当你在学习 Java 时，首先需要掌握它啰里吧嗦的编程语法，此时没有什么比写一个“Hello World”来得更爽快一些。随后你需要深刻理解的是 Java 的面向对象概念（每次我说到面向对象，总会被一些单身汉吐槽，其实我想说，对象是可以 new 出来的），这些概念看上去比较虚，但是它们却能撑起一个强大的软件架构。所以，在面向对象技术上面花再多功夫都不为过，因为它能训练我们对业务的抽象能力，就像当初我们学习数学一样，它能训练我们的逻辑思维能力。</p>\n<h2 id=\"h2_4\">4、选择一位对的老师</h2>\n<p>看书、看视频、看源码、看技术文档，其实这些都是较为低效的学习方法，掌握编程技能的捷径就是拜一位资深的程序员为师，你可以尊称他为“码神”，记得一定要把他伺候好，让他愿意传授一些编程技能给你，其实也就是一个微笑外加一顿小龙虾的事情，他就能被你征服。一定要看他写的代码，思考为什么他会这样写，一定要将你不理解的地方记录下来，并且在下班之前紧紧地抓住他，让他一次给你讲个够，此时你一定会有一种打通任督二脉的畅快之感。所谓“师傅领进门，修行在个人”，你需要比你师傅更加努力，甚至十倍于他人的付出，才能在编程之路上尝到甜头。此时你需要学习更加高深的武功，研究更加优秀的源码，实践更有挑战的项目，还需要花整块时间，系统地看技术文档以及技术参考书。假如你想成为架构师，不妨看看我所著的《架构探险》这本书，也许它会对你的专业技能有所帮助。</p>\n<h2 id=\"h2_5\">5、乐于分享你的技能</h2>\n<p>你最好要让自己变成一位豁达开朗之人，千万不要吝啬，一定要懂得分享你所学的专业技能。可以尝试做点自己的开源项目，并让这个开源项目变得更加开放，不妨结合开源，写点技术博客，并厚着脸皮给你身边的朋友阅读。这件事情一定要持之以恒，不要担心有人吐槽你，你肯定会被吐槽，那是因为大家在关注你，此时你需要更加努力，让自己变得足够专业。当你成为真正的“大神”时，就不会有人再吐槽你了，他们只会吐槽自己的技术不如你，此时你将得到的是无限的膜拜和称赞。相信我，这绝不是奇迹。在学习专业技能之路上，多一点自信，多一点勤奋，多一点思考，再争取一点机会，你就会成功。</p>\n<h1 id=\"h1_6\">二、不可或缺的软技能</h1>\n<h2 id=\"h2_7\">1、软技能 ≠ 务虚</h2>\n<p>如果将专业技能比喻为“硬技能”，那么在我们的职场中，与专业性无关的技能就可以归纳为“软技能”了。但每当我提到软技能时，难免会让人误解为这是“务虚”的一种功夫，我们虽然是“吃软饭的”（做软件开发的），但我们却十分讨厌虚伪。没错！我也很厌恶虚伪之人，尤其是在职场中遇到这样的人物，我从心底鄙视他们，但我从来不会和他们发生任何冲突，反而还能和他们愉快地共事，这种本领靠的就是软技能。</p>\n<p>软件工程师每天都在和机器打交道，机器是没有感情的，你告诉它是0，它一定不会认为是1。但我们与人打交道却不一样，你告诉他是真，他却可能认为是假。与人打交道，正是软件工程师们最为欠缺的方面，有些软件工程师甚至害怕与人交流，害怕在公开场合讲话，害怕抛头露面，害怕做一些组织性的工作。如果你也有以上这些心里负担，那么恭喜你！因为你即将从本文中找到克服这些困难的灵丹妙药，至少我希望是这样。</p>\n<p>需要强调的是，软技能是一种职场必备的核心技能，我敢直言，如果缺乏这方面的技能，你的职业生涯将会变得非常糟糕。软技能包括的方面非常广泛，沟通、协调、组织、气场这些都是最基本的软技能，甚至情商也是一种软技能，会不会讲话，听不听得明白，这些都是软技能。那么我们不妨先从沟通这项软技能开始吧，因为我认为他是软件工程师最重要的软技能之一。</p>\n<h2 id=\"h2_8\">2、口语流利 ≠ 会沟通</h2>\n<p>很多人都容易将沟通理解为讲话，说一个人语言很流利，很会讲话，口若悬河，夸夸其谈，其实并非他的沟通能力很强。我认为，沟通可以理解为两方面，即“沟”和“通”。“沟”指的是你将心中所想很清晰地表达出来给对方听，考验的是你的表达能力；“通”指的是让你确信对方是否真明白你所表达的意思，考验的是你的倾听能力。所以，我们很多时候都是在“沟”，往往忽略了“通”，从而形成了“沟而不通”的情况，因此，现在全世界人民都在提倡如何“有效沟通”。还是用一个示例来说话吧。</p>\n<p>当领导交给你一项棘手的工作，但你不知道如何开始进行这项工作，此时你应该如何应对当前的挑战呢？绝大多数人会硬着头皮去做，他们希望通过自己的努力，可以顺利完成任务，但结果往往却无法让领导满意。少数人会主动向领导咨询，以寻求领导对自己的帮助。此时应该如何与领导对话呢？似乎并非很多人都清楚。下面这段话是我的套路，仅供参考。</p>\n<blockquote><p>我：勇哥（他是我的领导），最近我遇到了一点麻烦的事情，想听听您的看法（勾起领导的兴趣，让他认真听我说下去，记得一定要说“您”，而不是“你”）。</p>\n<p>领导：哦？说来听听（证明领导此时不忙，他有时间让我占用，如果他此时很忙，你应该能感受出来的）。</p>\n<p>我：感谢您对我的信任，昨天您交给我一项任务，回到家我一直都在想这项任务，我在想……（一定要对领导表示感激，是他给了我这次锻炼自己的机会，并强调我是“回到家”都在思考，而不是只在在公司里思考，道理你懂的）</p>\n<p>领导：可能是我没说清楚，你把这项任务想复杂了，其实……（可见这是一位 nice 的领导，跟着他，你能学到很多东西）</p>\n<p>我：我还想再清楚一下，您期待这项工作的结果是怎样的？（一定要明确领导想要的结果，他只会为结果买单）</p>\n<p>领导：我希望……（领导娓娓道来，此处省略1万字，你千万不要打断领导的讲话，他讲累了自然就会停，你只需要认真听他怎么讲）</p>\n<p>我：好的，我明白了，您希望我……（一定要学会复述领导讲过的话，而且要用自己的理解来表达，不要当复读机）</p>\n<p>领导：没错，就是这样。（领导表示认可了，此时你应该表示给领导一个微笑，让他感到欣慰）</p>\n<p>我：感谢勇哥！如果我在执行过程中遇到问题，可以再向您请教吗？（一定要感谢，而且要表现出虚心向领导请教，为下一次求救做好准备）</p>\n<p>领导：当然，随时交流。（你真心拿他当领导，他才会无条件帮助你，你不懂得用好这位领导，那是你自己的损失）</p></blockquote>\n<p>沟通是不是很有趣？其实沟通是一门学问，我们花一辈子时间都在学习，都在改进自己的沟通方式，目的仅为愉快地和身边的人一起“玩耍”，让此生感到愉悦。</p>\n<p>当你已经掌握了必备的专业技能，也具备了让你脱颖而出的软技能，那么接下来你将思考的是自己该走那条路了，继续做软件工程师，还是做软件工程师的 leader？下面这段话将告诉你答案。</p>\n<h1 id=\"h1_9\">三、正确制定职业路线</h1>\n<h2 id=\"h2_10\">1、给自己提几个问题</h2>\n<p>首先要澄清的是：我并非职业导师，更不是人生教父，所有的路都由你自己选择，我的责任是告诉你，我认为行之有效的方法。</p>\n<p>当你正走在职场的十字路口徘徊，思考走技术，还是走管理？我的答案只有一个：根据你自己的优势来决定。合理利用好自己的优势，会让自己走的更加顺畅，让自己无怨无悔。还是举一个例子来说明吧。</p>\n<p>前段时间有位朋友在微信上私聊我，他也遇到了这个问题，继续做技术，还是转管理？我当时是这样问他的，但我希望你可以用这样的方式来问自己。</p>\n<blockquote><p>我：你工作多久了？</p>\n<p>朋友：时间不长，写了10年的代码。</p>\n<p>我：那相当资深啊，现在还对写代码有激情吗？</p>\n<p>朋友：喜欢写，周末有时都会宅在家里写。</p>\n<p>我：那你还在纠结什么呢？</p>\n<p>朋友：我都工作10年了，身边的人要么当 CTO，要么做总监，自己却还在撸代码，我现在到底该不该转管理？</p>\n<p>我：你为什么会考虑转管理？说说你在管理上的优势吧。</p>\n<p>朋友：我觉得自己对技术有一定深度，可以帮助团队解决一些技术难题。</p>\n<p>我：如果你团队中有位小伙伴遇到一个很棘手的技术问题，没辙了，你会做些什么？</p>\n<p>朋友：撸起袖子，就地帮他解决掉。</p>\n<p>我：建议你走技术专家路线，这条路也许更加适合你。</p>\n<p>朋友：……</p></blockquote>\n<h2 id=\"h2_11\">2、转管理之前，先理解管理</h2>\n<p>当我们在纠结是否应该转管理时，不妨首先理解一下什么是管理？以及什么是管理者？只有当我们正确理解了这些概念以后，再来思考自己是否具备这样的特征，才能顺利帮助自己转型。</p>\n<p>管理（management）是协调和监督他人的工作，从而使他人的工作可以有效率且有成效地完成。效率（efficiency）指的是以尽可能少的投入，以获得尽可能多的产出，效率常常被说成“正确地做事”，即不浪费资源。成效（effectiveness）常常被称为“做正确的事”，即做那些可以实现目标的工作活动。管理者（manager）就是完成所有管理工作，并使组织目标能够实现的人。管理者的工作包括计划（planning）、组织（organizing）、领导（leading）和控制（controlling）四种职能。</p>\n<p>以上都是管理学告诉我们的知识，如果你想成为一名管理者，那么你必须首先正确理解这些概念的真实含义，才能完全驾驭管理者的岗位，否则你会从管理岗位上摔下来，自己一定伤得不轻。</p>\n<p>如果你想成为一名优秀的管理者，那么你需要做些什么呢？</p>\n<ul>\n<li>亲自且专业地给团队激励。</li>\n<li>激励团队完成你无法独立完成的任务。</li>\n<li>对问题提供指导和指引。</li>\n<li>对团队的表现给予反馈。</li>\n<li>帮助团队改善绩效。</li>\n<li>使团队对组织的改变知情。</li>\n<li>改善团队小伙伴们的生活。</li>\n</ul>\n<p>如果团队和你共事过，那么团队应该觉得他们是幸运的，因为你能够让他们更加愉快和高效地工作。</p>\n<h1 id=\"h1_12\">写在最后</h1>\n<p>不论选择技术还是管理，在任何时候都不要放弃你的硬技能，因为它是你的“生存之本”，同时你也需要具备强大的软技能，因为它是你的“发展之源”。</p>\n<p>学习硬技能其实是有捷径的，你无需一味地学习这些知识点，更多的其实是与人交流以及加以应用。软技能其实是可以训练的，你只需抓住一切可以抓住的机会，有意识地加以训练和反思，你就能悟出很多宝贵的经验。软件开发是一门艺术，你需要能够静得下心，不断地优化和雕琢你的作品，因此你需要具备工匠精神。如果你想成为一名工匠领袖，那么你就应该比他人思考得更多、更高、更深、更全面，你需要更多的软技能。你只有认识到自己的优势，才能正确地选择自己的职业路线。</p>\n<p>祝你成功！</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112048\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112048votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112048\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 4 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>\r\n\t<!-- END .entry -->\r\n\r\n\r\n<script type=\"text/javascript\">\r\nvar jiathis_config={\r\n\tdata_track_clickback:false,\r\n\ttitle:\"分享从伯乐在线看到的一篇好文章 \",\r\n\tsummary:\"《程序员如何规划职业路线？》\",\r\n\tpic:\"http://jbcdn2.b0.upaiyun.com/2017/03/4f255bd43f956c3db484a99d448b198e.jpg\",\r\n\tappkey:{\r\n         \"tsina\": 1473879058    },\r\n\tralateuid:{\r\n\t\t\"tsina\": 1670481425\t},\r\n\thideMore:false\r\n}\r\n</script>\r\n<script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js?uid=1745061\" charset=\"utf-8\"></script>\r\n<!-- JiaThis Button END -->\r\n\t\t\t<div class=\"textwidget\"><p><a href=\"http://group.jobbole.com/22945/\" target=\"_blank\"><img src=\"http://wx1.sinaimg.cn/mw690/bfdcef89gy1fq547hqqaij20h803cgm9.jpg\"></a></p>\n</div>\n\t\t\r\n</div>\r\n<!-- END .post -->\r\n            <div style=\"text-align: left;\">\r\n            <h3>相关文章</h3>\r\n            <ul style=\"font-size: 13px; list-style: disc inside;\">\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"IT 职场新人碰到的几个常见误区\" target=\"_blank\" href=\"http://blog.jobbole.com/112038/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">IT 职场新人碰到的几个常见误区</a>\r\n                                            </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"100 倍价值的工程师\" target=\"_blank\" href=\"http://blog.jobbole.com/113710/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">100 倍价值的工程师</a>\r\n                         · <a href=\"http://blog.jobbole.com/113710/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 5</a>                    </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"我只想安静地写代码，领导却跟我谈大局、讲奉献\" target=\"_blank\" href=\"http://blog.jobbole.com/113705/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">我只想安静地写代码，领导却跟我谈大局、讲奉献</a>\r\n                         · <a href=\"http://blog.jobbole.com/113705/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 3</a>                    </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"为什么程序员找不到工作：4 个恐怖故事\" target=\"_blank\" href=\"http://blog.jobbole.com/113652/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">为什么程序员找不到工作：4 个恐怖故事</a>\r\n                         · <a href=\"http://blog.jobbole.com/113652/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 7</a>                    </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"一个技术大牛对程序员招聘的吐槽和建议\" target=\"_blank\" href=\"http://blog.jobbole.com/113532/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">一个技术大牛对程序员招聘的吐槽和建议</a>\r\n                         · <a href=\"http://blog.jobbole.com/113532/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 24</a>                    </span>\r\n                    </li>\r\n                            </ul>\r\n        </div>\r\n    \r\n    \n<div style=\"text-align: left;\">\n    <h3>可能感兴趣的话题</h3>\n    <ul style=\"font-size: 13px; list-style: disc inside;\">\n                        <li>\n                    <a href=\"http://group.jobbole.com/33039/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"Eng  ---  React ,Vue ,Angular全家桶套餐外的另一种超轻量级实现方式 (16kb)\" target=\"_blank\">Eng  ---  React ,Vue ,Angular全家桶套餐外的另一种超轻量级实...</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/33038/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"28岁刚入门，靠谱不？\" target=\"_blank\">28岁刚入门，靠谱不？</a>\n                     · <a href=\"http://group.jobbole.com/33038/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 7</a>                </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32985/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"工作四年，该如何晋级架构师？\" target=\"_blank\">工作四年，该如何晋级架构师？</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32958/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"java 的nio和网络编程nio 的区别\" target=\"_blank\">java 的nio和网络编程nio 的区别</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32933/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"工作压力大，然后出错多。。然后工作压力大。该怎么调整自己的状态……\" target=\"_blank\">工作压力大，然后出错多。。然后工作压力大。该怎么调整自己的状态……</a>\n                     · <a href=\"http://group.jobbole.com/32933/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 5</a>                </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32879/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"是去北上广深闯几年还是留在二线城市？\" target=\"_blank\">是去北上广深闯几年还是留在二线城市？</a>\n                     · <a href=\"http://group.jobbole.com/32879/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 2</a>                </li>\n                </ul>\n</div>\r\n\t\n            <div id=\"article-comment\" class=\"dot-box center-align\">\n\n                        <a href=\"http://www.jobbole.com/login?redirect=http://blog.jobbole.com/112048/\"><button type=\"button\" class=\"btn btn-non-transparent\">登录后评论</button></a>\n            \n            <a target=\"_blank\" href=\"http://www.jobbole.com/register\"><button type=\"button\" class=\"btn btn-primary\">新用户注册</button></a>\n\n            <br><br>\n            <span>直接登录</span>\n            <style type=\"text/css\">.t_login_text{margin:0; padding:0;}.t_login_button{margin:0; padding: 5px 0;}.t_login_button a{margin:0; padding-right:3px; line-height:25px}.t_login_button img{display:inline; border:none;}</style><!-- 使用社交帐号登录 来自 WordPress连接微博 插件 --><span class=\"connectBox1 t_login_button\"><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=weixin&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F112048%2F\" title=\"微信\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_weixin.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=qzone&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F112048%2F\" title=\"QQ\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_qzone.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=sina&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F112048%2F\" title=\"新浪微博\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_sina.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=douban&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F112048%2F\" title=\"豆瓣\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_douban.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=github&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F112048%2F\" title=\"GitHub\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_github.png\"></a></span>        </div>\n    \n\n    <div id=\"comment_list\" class=\"comments\">\n\n                    <h5 id=\"comments\" class=\"sub-title\"><i class=\"glyphicon\"></i>最新评论</h5>\n            <ul class=\"cmnt-list\">\n\n                        <li id=\"comment-162336\" class=\"comment cmnt odd\">\n    \n    <div class=\"cmnt-box\">\n        <div class=\"cmnt-header\">\n                            <a href=\"http://www.jobbole.com/members/onice\" class=\"cmnt-img\"><img width=\"37\" height=\"37\" src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\" alt=\"\"></a>\n                <div class=\"cmnt-meta\">\n                    <span><a href=\"http://www.jobbole.com/members/onice\">onice</a><label class=\"comment_author_data\"> （ <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/onice/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 1</a> ）</label></span>\n                    <span class=\"c-title\">\n                                             </span>\n\n                    <span class=\"c-date\">\n                        <a href=\"http://blog.jobbole.com/112048/#comment-162336\">03/16</a>\n                    </span>\n\n                    \n                    \n                </div>\n                    </div>\n        <div class=\"cmnt-body\">\n            <p>\n                </p><p>我觉得讲得很好啊，受益匪浅</p>\n            \n                    </div>\n                    <div class=\"cmnt-footer\">\n\n                \n                <p class=\"c-like\">\n                    <a title=\"赞同\" alt=\"赞同\" class=\"162336voteflag  t-up  href-style vote-comment-up  register-user-only   \" data-comment-id=\"162336\"><i class=\"fa fa-thumbs-o-up\"></i> <span id=\"162336voteuptotal\"> 赞</span></a>\n\n                    \n                    <a rel=\"nofollow\" class=\"comment-reply-link register-user-only\" href=\"http://blog.jobbole.com/112048/?replytocom=162336#respond\" data-onclick='return addComment.moveForm( \"comment-162336\", \"162336\", \"respond\", \"112048\" )' aria-label=\"回复给onice\">回复 <i class=\"fa fa-reply\"></i></a>\n                </p>\n            </div>\n            </div>\n    </li>\n<!-- #comment-## -->\n        <li id=\"comment-162352\" class=\"comment cmnt even\">\n    \n    <div class=\"cmnt-box\">\n        <div class=\"cmnt-header\">\n                            <a href=\"http://www.jobbole.com/members/%E8%8B%A5%E5%85%AE\" class=\"cmnt-img\"><img width=\"37\" height=\"37\" src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\" alt=\"\"></a>\n                <div class=\"cmnt-meta\">\n                    <span><a href=\"http://www.jobbole.com/members/%E8%8B%A5%E5%85%AE\">若兮</a><label class=\"comment_author_data\"> </label></span>\n                    <span class=\"c-title\">\n                        python爬虫工程师                    </span>\n\n                    <span class=\"c-date\">\n                        <a href=\"http://blog.jobbole.com/112048/#comment-162352\">03/23</a>\n                    </span>\n\n                    \n                    \n                </div>\n                    </div>\n        <div class=\"cmnt-body\">\n            <p>\n                </p><p>求师傅</p>\n            \n                    </div>\n                    <div class=\"cmnt-footer\">\n\n                \n                <p class=\"c-like\">\n                    <a title=\"赞同\" alt=\"赞同\" class=\"162352voteflag  t-up  href-style vote-comment-up  register-user-only   \" data-comment-id=\"162352\"><i class=\"fa fa-thumbs-o-up\"></i> <span id=\"162352voteuptotal\"> 赞</span></a>\n\n                    \n                    <a rel=\"nofollow\" class=\"comment-reply-link register-user-only\" href=\"http://blog.jobbole.com/112048/?replytocom=162352#respond\" data-onclick='return addComment.moveForm( \"comment-162352\", \"162352\", \"respond\", \"112048\" )' aria-label=\"回复给若兮\">回复 <i class=\"fa fa-reply\"></i></a>\n                </p>\n            </div>\n            </div>\n    </li>\n<!-- #comment-## -->\n        <li id=\"comment-162357\" class=\"comment cmnt odd\">\n    \n    <div class=\"cmnt-box\">\n        <div class=\"cmnt-header\">\n                            <a href=\"http://www.jobbole.com/members/q2911053410\" class=\"cmnt-img\"><img width=\"37\" height=\"37\" src=\"http://q.qlogo.cn/qqapp/208656/2A7D28B31833C25226A440FB143C272D/100\" alt=\"\"></a>\n                <div class=\"cmnt-meta\">\n                    <span><a href=\"http://www.jobbole.com/members/q2911053410\">飞雨星辰</a><label class=\"comment_author_data\"> </label></span>\n                    <span class=\"c-title\">\n                                             </span>\n\n                    <span class=\"c-date\">\n                        <a href=\"http://blog.jobbole.com/112048/#comment-162357\">03/25</a>\n                    </span>\n\n                    \n                    \n                </div>\n                    </div>\n        <div class=\"cmnt-body\">\n            <p>\n                </p><p>写的很专业，获益匪浅</p>\n            \n                    </div>\n                    <div class=\"cmnt-footer\">\n\n                \n                <p class=\"c-like\">\n                    <a title=\"赞同\" alt=\"赞同\" class=\"162357voteflag  t-up  href-style vote-comment-up  register-user-only   \" data-comment-id=\"162357\"><i class=\"fa fa-thumbs-o-up\"></i> <span id=\"162357voteuptotal\"> 赞</span></a>\n\n                    \n                    <a rel=\"nofollow\" class=\"comment-reply-link register-user-only\" href=\"http://blog.jobbole.com/112048/?replytocom=162357#respond\" data-onclick='return addComment.moveForm( \"comment-162357\", \"162357\", \"respond\", \"112048\" )' aria-label=\"回复给飞雨星辰\">回复 <i class=\"fa fa-reply\"></i></a>\n                </p>\n            </div>\n            </div>\n    </li>\n<!-- #comment-## -->\n        <li id=\"comment-162389\" class=\"comment cmnt even\">\n    \n    <div class=\"cmnt-box\">\n        <div class=\"cmnt-header\">\n                            <a href=\"http://www.jobbole.com/members/dawntrees\" class=\"cmnt-img\"><img width=\"37\" height=\"37\" src=\"http://q.qlogo.cn/qqapp/208656/4C3074273382BB57B04D54A6ADD6442F/100\" alt=\"\"></a>\n                <div class=\"cmnt-meta\">\n                    <span><a href=\"http://www.jobbole.com/members/dawntrees\">东篱</a><label class=\"comment_author_data\"> </label></span>\n                    <span class=\"c-title\">\n                                             </span>\n\n                    <span class=\"c-date\">\n                        <a href=\"http://blog.jobbole.com/112048/#comment-162389\">23 小时前</a>\n                    </span>\n\n                    \n                    \n                </div>\n                    </div>\n        <div class=\"cmnt-body\">\n            <p>\n                </p><p>说的有道理</p>\n            \n                    </div>\n                    <div class=\"cmnt-footer\">\n\n                \n                <p class=\"c-like\">\n                    <a title=\"赞同\" alt=\"赞同\" class=\"162389voteflag  t-up  href-style vote-comment-up  register-user-only   \" data-comment-id=\"162389\"><i class=\"fa fa-thumbs-o-up\"></i> <span id=\"162389voteuptotal\"> 赞</span></a>\n\n                    \n                    <a rel=\"nofollow\" class=\"comment-reply-link register-user-only\" href=\"http://blog.jobbole.com/112048/?replytocom=162389#respond\" data-onclick='return addComment.moveForm( \"comment-162389\", \"162389\", \"respond\", \"112048\" )' aria-label=\"回复给东篱\">回复 <i class=\"fa fa-reply\"></i></a>\n                </p>\n            </div>\n            </div>\n    </li>\n<!-- #comment-## -->\n            </ul>\n        \n    </div>\n\t\t\r\n\r\n\t\r\n</div>", "tag": "职场-程序员-职场", "url": "http://blog.jobbole.com/112048/", "url_object_id": "c8f7206fc12fb03862d494d19208fd22", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/03/4f255bd43f956c3db484a99d448b198e.jpg"], "front_image_path": "full/d102994dcc342e0686843d89a7518432502d5ff3.jpg"}
{"title": "如何实现一个基本的微信文章分类器", "create_date": "2018/04/04", "praise_nums": "1", "fav_nums": "1", "comments_nums": "0", "content": "<div class=\"grid-8\">\r\n\r\n\t\t\r\n\t<!-- BEGIN .post -->\r\n<div class=\"post-113691 post type-post status-publish format-standard hentry category-it-tech tag-5725 tag-machinelearning odd\" id=\"post-113691\">\r\n\t\r\n\t<!-- BEGIN .entry-header -->\r\n\t<div class=\"entry-header\">\r\n\t\r\n\t\t\t\t\r\n\t\t<h1>如何实现一个基本的微信文章分类器</h1>\r\n\t\t\r\n\t\t\t\t\t\t\t\r\n\t</div>\r\n\t<!-- BEGIN .entry-header -->\r\n\t\r\n\t<!-- BEGIN .entry-meta -->\r\n\t<div class=\"entry-meta\">\r\n\t\r\n\t\t<p class=\"entry-meta-hide-on-mobile\">\r\n\r\n            2018/04/04 ·  <a href=\"http://blog.jobbole.com/category/it-tech/\" rel=\"category tag\">IT技术</a>\r\n            \r\n            \r\n\r\n            \r\n             ·  <a href=\"http://blog.jobbole.com/tag/%e6%96%87%e6%9c%ac%e5%88%86%e7%b1%bb/\">文本分类</a>, <a href=\"http://blog.jobbole.com/tag/machinelearning/\">机器学习</a>\r\n            \r\n</p>\r\n\r\n<!-- JiaThis Button BEGIN -->\r\n<div class=\"jiathis_style\" style=\"display: block; margin: 0 0px; clear: both;\"><span class=\"jiathis_txt\">分享到：</span>\r\n<a class=\"jiathis_button_tsina\"></a>\r\n<a class=\"jiathis_button_weixin\"></a>\r\n<a class=\"jiathis_button_qzone\"></a>\r\n<a class=\"jiathis_button_fb\"></a>\r\n<a class=\"jiathis_button_douban\"></a>\r\n<a class=\"jiathis_button_readitlater\"></a>\r\n<a class=\"jiathis_button_evernote\"></a>\r\n<a class=\"jiathis_button_ydnote\"></a>\r\n<a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\r\n<a class=\"jiathis_counter_style\"></a>\r\n</div>\r\n<!-- JiaThis Button END -->\r\n\r\n\r\n\t</div>\r\n\t<!-- END .entry-meta -->\r\n\r\n\t<!-- BEGIN .entry -->\r\n\t<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文作者： <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/2653yy\">fullstackyang</a> 。未经作者许可，禁止转载！<br>欢迎加入伯乐在线 <a href=\"http://blog.jobbole.com/99322\" target=\"_blank\">专栏作者</a>。</div><p>微信公众号发布的文章和一般门户网站的新闻文本类型有所不同，通常不能用现有的文本分类器直接对这些文章进行分类，不过文本分类的原理是相通的，本文以微信公众号文章为对象，介绍朴素贝叶斯分类器的实现过程。</p>\n<p>文本分类的科学原理和数学证明在网上有很多，这里就不做赘述，本文尽量使用通熟易懂的表述方式，简明扼要地梳理一下文本分类器的各个知识点。</p>\n<p>参考了一下Github，发现少有Java 8风格的实现，所以这里的实现尽量利用Java 8的特性，相比之前优势有很多，例如stream在统计聚合等运算上比较方便，代码不仅简洁，而且更加语义化，另外在多线程并行控制上也省去不少的工作。</p>\n<p>本项目的地址：<a href=\"https://github.com/fullstackyang/article-classifier\">https://github.com/fullstacky…</a></p>\n<h1>一、文本分类器的概述</h1>\n<p>文本分类器可以看作是一个预测函数，在给定的文本时，在预定的类别集合中，判断该文本最可能属于哪个类。</p>\n<p>这里需要注意两个问题：</p>\n<ul>\n<li>在文本中含有比较多的标点符号和停用词（的，是，了等），直接使用整段文本处理肯定会产生很多不必要的计算，而且计算量也非常大，因此需要把给定的文本有效地进行表示，也就是选择一系列的特征词来代表这篇文本，这些特征词既可以比较好地反应所属文本的内容，又可以对不同文本有比较好的区分能力。</li>\n<li>在进行文本表示之后，如何对这些特征词进行预测，这就是分类器的算法设计问题了，比较常见的模型有朴素贝叶斯，基于支持向量机（SVM），K-近邻（KNN），决策树等分类算法。这里我们选择简单易懂的朴素贝叶斯算法。在机器学习中，朴素贝叶斯建模属于有监督学习，因此需要收集大量的文本作为训练语料，并标注分类结果</li>\n</ul>\n<p>综上，实现一个分类器通常分为以下几个步骤：</p>\n<ol>\n<li>收集并处理训练语料，以及最后测试用的测试语料</li>\n<li>在训练集上进行特征选择，得到一系列的特征项（词），这些特征项组成了所谓的特征空间</li>\n<li>为了表示某个特征项在不同文档中的重要程度，计算该特征项的权重，常用的计算方法有TF-IDF，本文采用的是“经典”朴素贝叶斯模型，这里不考虑特征项的权重（当然，一定要做也可以）</li>\n<li>训练模型，对于朴素贝叶斯模型来说，主要的是计算每个特征项在不同类别中的条件概率，这点下面再做解释。</li>\n<li>预测文本，模型训练完成之后可以保存到文件中，在预测时直接读入模型的数据进行计算。</li>\n</ol>\n<h1>二、准备训练语料</h1>\n<p>这里需要的语料就是微信公众号的文章，我们可以抓取搜狗微信搜索网站（<a href=\"http://weixin.sogou.com/\">http://weixin.sogou.com/</a>）首页上已经分类好的文章，直接采用其分类结果，这样也省去了标注的工作。至于如何开发爬虫去抓取文章，这里就不再讨论了。</p>\n<p><img src=\"http://www.fullstackyang.com/wp-content/uploads/2018/02/QQ20180228-161923.png\" width=\"936\" height=\"245\"></p>\n<p>“热门”这类别下的文章不具有一般性，因此不把它当作一个类别。剔除“热门”类别之后，最终我们抓取了30410篇文章，总共20个类别，每个类别的文章数并不均衡，其中最多 的是“养生堂”类别，有2569篇文章，最少的是“军事”类别，有654篇，大体符合微信上文章的分布情况。在保存时，我们保留了文章的标题，公众号名称，文章正文。</p>\n<h1>三、特征选择</h1>\n<p>如前文所述，特征选择的目的是降低特征空间的维度，避免维度灾难。简单地说，假设我们选择了2万个特征词，也就是说计算机通过学习，得到了一张有2万个词的“单词表”，以后它遇到的所有文本可以够用这张单词表中的词去表示其内容大意。这些特征词针对不同的类别有一定的区分能力，举例来说，“歼击机”可能来自“军事”，“越位”可能来自“体育”，“涨停”可能来自“财经”等等，而通常中文词汇量要比这个数字大得多，一本常见的汉语词典收录的词条数可达数十万。</p>\n<p>常见的特征选择方法有两个，信息增益法和卡方检验法。</p>\n<h2>3.1 信息增益</h2>\n<p>信息增益法的衡量标准是，这个特征项可以为分类系统带来多少信息量，所谓的信息增益就是该特征项包含的能够帮预测类别的信息量，这里所说的信息量可以用熵来衡量，计算信息增益时还需要引入条件熵的概念，公式如下</p>\n<p><img src=\"http://www.fullstackyang.com/wp-content/uploads/2018/02/IG.png\" width=\"967\" height=\"287\"></p>\n<p>可能有些见到公式就头大的小伙伴不太友好，不过这个公式虽然看起来有点复杂，其实在计算中还是比较简单的，解释一下：</p>\n<p>P(Cj)：Cj类文档在整个语料中出现的概率；</p>\n<p>P(ti)：语料中包含特征项ti的文档的概率，取反就是不包含特征项ti的文档的概率；</p>\n<p>P(Cj|ti)：文档包含特征项ti且属于Cj类的条件概率，取反就是文档不包含特征项ti且属于Cj类的条件概率</p>\n<p>上面几个概率值，都可以比较方便地从训练语料上统计得到。若还有不明白的小伙伴，推荐阅读这篇博客：<a href=\"http://www.blogjava.net/zhenandaci/archive/2009/03/24/261701.html\">文本分类入门（十一）特征选择方法之信息增益</a></p>\n<h2>3.2 卡方检验</h2>\n<p>卡方检验，基于χ2统计量(CHI)来衡量特征项ti和类别Cj之间的相关联程度，CHI统计值越高，该特征项与该类的相关性越大，如果两者相互独立，则CHI统计值接近零。计算时需要根据一张相依表（contingency table），公式也比较简单：</p>\n<p><img class=\"aligncenter\" src=\"http://www.fullstackyang.com/wp-content/uploads/2018/02/ct.png\" width=\"1061\" height=\"183\"></p>\n<p><img class=\"aligncenter\" src=\"http://www.fullstackyang.com/wp-content/uploads/2018/02/chi.png\" width=\"517\" height=\"90\"></p>\n<p>其中N就是文档总数，如果想继续讨论这个公式，推荐阅读这篇博客：<a href=\"http://www.deeplearn.me/1446.html\">特征选择（3）-卡方检验</a></p>\n<h2>3.3 算法实现</h2>\n<p>不论何种方式都需要对每个特征项进行估算，然后根据所得的数值进行筛选，通常可以设定一个阈值，低于阈值的特征项可以直接从特征空间中移除，另外也可以按照数值从高到低排序，并指定选择前N个。这里我们采用后者，总共截取前2万个特征项。</p>\n<p>特征选择实现类的代码如下，其中，不同特征选择方法需实现Strategy接口，以获得不同方法计算得到的估值，这里在截取特征项时为了避免不必要的麻烦，剔除了字符串长度为1的词。</p>\n<p>Doc对象表示一篇文档，其中包含了该文档的所属分类，以及分词结果（已经滤掉了停用词等），即Term集合；</p>\n<p>Term对象主要包含3个字段，词本身的字符串，词性（用于过滤），词频TF；</p>\n<p>Feature表示特征项，一个特征项对应一个Term对象，还包含两个hashmap，一个用来统计不同类别下该特征项出现的文档数量（categoryDocCounter），另一个用来统计不同类别下该特征项出现的频度（categoryTermCounter）（对应朴素贝叶斯两种不同模型，下文详述）</p>\n<p><strong>统计时引入FeatureCounter对象，使用stream的reduce方法进行归约。主要的思想就是把每一个文档中的Term集合，映射为Term和Feature的键值对，然后再和已有的Map进行合并，合并时如果遇到相同的Term，则调用Feature的Merge方法，该方法会将双方term的词频，以及categoryDocCounter和categoryTermCounter中的统计结果进行累加。最终将所有文档全部统计完成返回Feature集合。</strong></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a2ed69953341747349\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n@AllArgsConstructor\r\npublic class FeatureSelection {\r\n\r\n    interface Strategy {\r\n        Feature estimate(Feature feature);\r\n    }\r\n\r\n    private final Strategy strategy;\r\n    private final static int FEATURE_SIZE = 20000;\r\n\r\n    public List select(List docs) {\r\n        return createFeatureSpace(docs.stream())\r\n                .stream()\r\n                .map(strategy::estimate)\r\n                .filter(f -&gt; f.getTerm().getWord().length() &gt; 1)\r\n                .sorted(comparing(Feature::getScore).reversed())\r\n                .limit(FEATURE_SIZE)\r\n                .collect(toList());\r\n    }\r\n\r\n    private Collection createFeatureSpace(Stream docs) {\r\n\r\n        @AllArgsConstructor\r\n        class FeatureCounter {\r\n            private final Map featureMap;\r\n\r\n            private FeatureCounter accumulate(Doc doc) {\r\n                Map temp = doc.getTerms().parallelStream()\r\n                        .map(t -&gt; new Feature(t, doc.getCategory()))\r\n                        .collect(toMap(Feature::getTerm, Function.identity()));\r\n                if (!featureMap.isEmpty())\r\n                    featureMap.values().forEach(f -&gt; temp.merge(f.getTerm(), f, Feature::merge));\r\n                return new FeatureCounter(temp);\r\n            }\r\n\r\n            private FeatureCounter combine(FeatureCounter featureCounter) {\r\n                Map temp = Maps.newHashMap(featureMap);\r\n                featureCounter.featureMap.values().forEach(f -&gt; temp.merge(f.getTerm(), f, Feature::merge));\r\n                return new FeatureCounter(temp);\r\n            }\r\n        }\r\n\r\n        FeatureCounter counter = docs.parallel()\r\n                .reduce(new FeatureCounter(Maps.newHashMap()),\r\n                        FeatureCounter::accumulate,\r\n                        FeatureCounter::combine);\r\n        return counter.featureMap.values();\r\n    }\r\n}\r\npublic class Feature {\r\n...\r\n    public Feature merge(Feature feature) {\r\n        if (this.term.equals(feature.getTerm())) {\r\n            this.term.setTf(this.term.getTf() + feature.getTerm().getTf());\r\n            feature.getCategoryDocCounter()\r\n                    .forEach((k, v) -&gt; categoryDocCounter.merge(k, v, (oldValue, newValue) -&gt; oldValue + newValue));\r\n            feature.getCategoryTermCounter()\r\n                    .forEach((k, v) -&gt; categoryTermCounter.merge(k, v, (oldValue, newValue) -&gt; oldValue + newValue));\r\n        }\r\n        return this;\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69953341747349-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69953341747349-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69953341747349-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69953341747349-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69953341747349-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69953341747349-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69953341747349-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69953341747349-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69953341747349-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69953341747349-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69953341747349-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69953341747349-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69953341747349-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69953341747349-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69953341747349-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69953341747349-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69953341747349-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69953341747349-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69953341747349-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69953341747349-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69953341747349-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69953341747349-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69953341747349-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69953341747349-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69953341747349-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69953341747349-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69953341747349-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69953341747349-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69953341747349-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69953341747349-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69953341747349-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69953341747349-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69953341747349-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69953341747349-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69953341747349-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69953341747349-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69953341747349-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69953341747349-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69953341747349-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69953341747349-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69953341747349-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69953341747349-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69953341747349-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69953341747349-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69953341747349-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69953341747349-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69953341747349-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69953341747349-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69953341747349-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69953341747349-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69953341747349-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69953341747349-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69953341747349-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69953341747349-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69953341747349-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69953341747349-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69953341747349-57\">57</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69953341747349-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69953341747349-59\">59</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69953341747349-60\">60</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69953341747349-61\">61</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69953341747349-62\">62</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69953341747349-1\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">AllArgsConstructor</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69953341747349-2\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">FeatureSelection</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69953341747349-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69953341747349-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">interface</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Strategy</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69953341747349-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">Feature </span><span class=\"crayon-e\">estimate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">Feature </span><span class=\"crayon-v\">feature</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69953341747349-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69953341747349-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69953341747349-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">final</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Strategy </span><span class=\"crayon-v\">strategy</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69953341747349-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">final</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">FEATURE_SIZE</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20000</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69953341747349-10\"> </div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69953341747349-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">List </span><span class=\"crayon-e\">select</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">List </span><span class=\"crayon-v\">docs</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69953341747349-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">createFeatureSpace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">docs</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">stream</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69953341747349-13\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">stream</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69953341747349-14\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">map</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">strategy</span><span class=\"crayon-o\">::</span><span class=\"crayon-v\">estimate</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69953341747349-15\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">filter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">f</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getTerm</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getWord</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">length</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69953341747349-16\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">sorted</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">comparing</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Feature</span><span class=\"crayon-o\">::</span><span class=\"crayon-v\">getScore</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">reversed</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69953341747349-17\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">limit</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">FEATURE_SIZE</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69953341747349-18\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">collect</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">toList</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69953341747349-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69953341747349-20\"> </div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69953341747349-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Collection </span><span class=\"crayon-e\">createFeatureSpace</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">Stream </span><span class=\"crayon-v\">docs</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69953341747349-22\"> </div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69953341747349-23\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">AllArgsConstructor</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69953341747349-24\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">FeatureCounter</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69953341747349-25\"><span class=\"crayon-h\">            </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">final</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Map </span><span class=\"crayon-v\">featureMap</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69953341747349-26\"> </div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69953341747349-27\"><span class=\"crayon-h\">            </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">FeatureCounter </span><span class=\"crayon-e\">accumulate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">Doc </span><span class=\"crayon-v\">doc</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69953341747349-28\"><span class=\"crayon-h\">                </span><span class=\"crayon-e\">Map </span><span class=\"crayon-v\">temp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">doc</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getTerms</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">parallelStream</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69953341747349-29\"><span class=\"crayon-h\">                        </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">map</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Feature</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">t</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">doc</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getCategory</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69953341747349-30\"><span class=\"crayon-h\">                        </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">collect</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">toMap</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Feature</span><span class=\"crayon-o\">::</span><span class=\"crayon-v\">getTerm</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Function</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">identity</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69953341747349-31\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">!</span><span class=\"crayon-v\">featureMap</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">isEmpty</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69953341747349-32\"><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">featureMap</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">values</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-st\">forEach</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">f</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">temp</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">merge</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getTerm</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Feature</span><span class=\"crayon-o\">::</span><span class=\"crayon-v\">merge</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69953341747349-33\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">FeatureCounter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">temp</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69953341747349-34\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69953341747349-35\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69953341747349-36\"><span class=\"crayon-h\">            </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">FeatureCounter </span><span class=\"crayon-e\">combine</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">FeatureCounter </span><span class=\"crayon-v\">featureCounter</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69953341747349-37\"><span class=\"crayon-h\">                </span><span class=\"crayon-e\">Map </span><span class=\"crayon-v\">temp</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Maps</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">newHashMap</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">featureMap</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69953341747349-38\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">featureCounter</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">featureMap</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">values</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-st\">forEach</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">f</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">temp</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">merge</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getTerm</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Feature</span><span class=\"crayon-o\">::</span><span class=\"crayon-v\">merge</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69953341747349-39\"><span class=\"crayon-h\">                </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">FeatureCounter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">temp</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69953341747349-40\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69953341747349-41\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69953341747349-42\"> </div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69953341747349-43\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">FeatureCounter </span><span class=\"crayon-v\">counter</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">docs</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">parallel</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69953341747349-44\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">reduce</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">FeatureCounter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Maps</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">newHashMap</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69953341747349-45\"><span class=\"crayon-h\">                        </span><span class=\"crayon-v\">FeatureCounter</span><span class=\"crayon-o\">::</span><span class=\"crayon-v\">accumulate</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69953341747349-46\"><span class=\"crayon-h\">                        </span><span class=\"crayon-v\">FeatureCounter</span><span class=\"crayon-o\">::</span><span class=\"crayon-v\">combine</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69953341747349-47\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">counter</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">featureMap</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">values</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69953341747349-48\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69953341747349-49\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69953341747349-50\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Feature</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69953341747349-51\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69953341747349-52\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Feature </span><span class=\"crayon-e\">merge</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">Feature </span><span class=\"crayon-v\">feature</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69953341747349-53\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">term</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">equals</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">feature</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getTerm</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69953341747349-54\"><span class=\"crayon-h\">            </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">term</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setTf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">term</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getTf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">feature</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getTerm</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getTf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69953341747349-55\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">feature</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getCategoryDocCounter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69953341747349-56\"><span class=\"crayon-h\">                    </span><span class=\"crayon-sy\">.</span><span class=\"crayon-st\">forEach</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">k</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">v</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">categoryDocCounter</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">merge</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">k</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">v</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">oldValue</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">newValue</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">oldValue</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">newValue</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69953341747349-57\"><span class=\"crayon-h\">            </span><span class=\"crayon-v\">feature</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getCategoryTermCounter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69953341747349-58\"><span class=\"crayon-h\">                    </span><span class=\"crayon-sy\">.</span><span class=\"crayon-st\">forEach</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">k</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">v</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">categoryTermCounter</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">merge</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">k</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">v</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">oldValue</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">newValue</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">oldValue</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">newValue</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69953341747349-59\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69953341747349-60\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69953341747349-61\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69953341747349-62\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0115 seconds] -->\r\n<p>信息增益实现如下，在计算条件熵时，利用了stream的collect方法，将包含和不包含特征项的两种情况用一个hashmap分开再进行归约。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a2ed69967497468950\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n@AllArgsConstructor\r\npublic class IGStrategy implements FeatureSelection.Strategy {\r\n\r\n    private final Collection categories;\r\n\r\n    private final int total;\r\n\r\n    public Feature estimate(Feature feature) {\r\n        double totalEntropy = calcTotalEntropy();\r\n        double conditionalEntrogy = calcConditionEntropy(feature);\r\n        feature.setScore(totalEntropy - conditionalEntrogy);\r\n        return feature;\r\n    }\r\n\r\n    private double calcTotalEntropy() {\r\n        return Calculator.entropy(categories.stream().map(c -&gt; (double) c.getDocCount() / total).collect(toList()));\r\n    }\r\n\r\n    private double calcConditionEntropy(Feature feature) {\r\n        int featureCount = feature.getFeatureCount();\r\n        double Pfeature = (double) featureCount / total;\r\n\r\n        Map&gt; Pcondition = categories.parallelStream().collect(() -&gt; new HashMap&gt;() {{\r\n                    put(true, Lists.newArrayList());\r\n                    put(false, Lists.newArrayList());\r\n                }}, (map, category) -&gt; {\r\n                    int countDocWithFeature = feature.getDocCountByCategory(category);\r\n                    //出现该特征词且属于类别key的文档数量/出现该特征词的文档总数量\r\n                    map.get(true).add((double) countDocWithFeature / featureCount);\r\n                    //未出现该特征词且属于类别key的文档数量/未出现该特征词的文档总数量\r\n                    map.get(false).add((double) (category.getDocCount() - countDocWithFeature) / (total - featureCount));\r\n                },\r\n                (map1, map2) -&gt; {\r\n                    map1.get(true).addAll(map2.get(true));\r\n                    map1.get(false).addAll(map2.get(false));\r\n                }\r\n        );\r\n        return Calculator.conditionalEntrogy(Pfeature, Pcondition.get(true), Pcondition.get(false));\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69967497468950-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69967497468950-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69967497468950-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69967497468950-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69967497468950-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69967497468950-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69967497468950-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69967497468950-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69967497468950-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69967497468950-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69967497468950-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69967497468950-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69967497468950-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69967497468950-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69967497468950-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69967497468950-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69967497468950-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69967497468950-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69967497468950-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69967497468950-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69967497468950-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69967497468950-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69967497468950-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69967497468950-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69967497468950-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69967497468950-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69967497468950-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69967497468950-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69967497468950-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69967497468950-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69967497468950-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69967497468950-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69967497468950-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69967497468950-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69967497468950-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69967497468950-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69967497468950-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69967497468950-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69967497468950-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69967497468950-40\">40</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69967497468950-1\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">AllArgsConstructor</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69967497468950-2\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">IGStrategy </span><span class=\"crayon-r\">implements</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">FeatureSelection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">Strategy</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69967497468950-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69967497468950-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">final</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Collection </span><span class=\"crayon-v\">categories</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69967497468950-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69967497468950-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">final</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">total</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69967497468950-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69967497468950-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Feature </span><span class=\"crayon-e\">estimate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">Feature </span><span class=\"crayon-v\">feature</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69967497468950-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">double</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">totalEntropy</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">calcTotalEntropy</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69967497468950-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">double</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">conditionalEntrogy</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">calcConditionEntropy</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">feature</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69967497468950-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">feature</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setScore</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">totalEntropy</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">conditionalEntrogy</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69967497468950-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">feature</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69967497468950-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69967497468950-14\"> </div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69967497468950-15\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">double</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">calcTotalEntropy</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69967497468950-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Calculator</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">entropy</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">categories</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">stream</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">map</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">double</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getDocCount</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">total</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">collect</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">toList</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69967497468950-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69967497468950-18\"> </div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69967497468950-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">double</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">calcConditionEntropy</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">Feature </span><span class=\"crayon-v\">feature</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69967497468950-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">featureCount</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">feature</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getFeatureCount</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69967497468950-21\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">double</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Pfeature</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">double</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">featureCount</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">total</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69967497468950-22\"> </div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69967497468950-23\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">Map</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Pcondition</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">categories</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">parallelStream</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">collect</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">HashMap</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69967497468950-24\"><span class=\"crayon-h\">                    </span><span class=\"crayon-e\">put</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Lists</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">newArrayList</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69967497468950-25\"><span class=\"crayon-h\">                    </span><span class=\"crayon-e\">put</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Lists</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">newArrayList</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69967497468950-26\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">map</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">category</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69967497468950-27\"><span class=\"crayon-h\">                    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">countDocWithFeature</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">feature</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getDocCountByCategory</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">category</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69967497468950-28\"><span class=\"crayon-h\">                    </span><span class=\"crayon-c\">//出现该特征词且属于类别key的文档数量/出现该特征词的文档总数量</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69967497468950-29\"><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">map</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">add</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">double</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">countDocWithFeature</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">featureCount</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69967497468950-30\"><span class=\"crayon-h\">                    </span><span class=\"crayon-c\">//未出现该特征词且属于类别key的文档数量/未出现该特征词的文档总数量</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69967497468950-31\"><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">map</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">add</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">double</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">category</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getDocCount</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">countDocWithFeature</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">total</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">featureCount</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69967497468950-32\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69967497468950-33\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">map1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">map2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69967497468950-34\"><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">map1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">addAll</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">map2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69967497468950-35\"><span class=\"crayon-h\">                    </span><span class=\"crayon-v\">map1</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">addAll</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">map2</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69967497468950-36\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69967497468950-37\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69967497468950-38\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Calculator</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">conditionalEntrogy</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Pfeature</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Pcondition</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Pcondition</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">false</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69967497468950-39\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69967497468950-40\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0081 seconds] -->\r\n<p>卡方检验实现如下，每个特征项要在每个类别上分别计算CHI值，最终保留其最大值</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a2ed6996f057479914\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n@AllArgsConstructor\r\npublic class ChiSquaredStrategy implements Strategy {\r\n\r\n    private final Collection categories;\r\n\r\n    private final int total;\r\n\r\n    @ Override\r\n    public Feature estimate(Feature feature) {\r\n\r\n        class ContingencyTable {\r\n            private final int A, B, C, D;\r\n\r\n            private ContingencyTable(Feature feature, Category category) {\r\n                A = feature.getDocCountByCategory(category);\r\n                B = feature.getFeatureCount() - A;\r\n                C = category.getDocCount() - A;\r\n                D = total - A - B - C;\r\n            }\r\n        }\r\n\r\n        Double chisquared = categories.stream()\r\n                .map(c -&gt; new ContingencyTable(feature, c))\r\n                .map(ct -&gt; Calculator.chisquare(ct.A, ct.B, ct.C, ct.D))\r\n                .max(Comparator.comparingDouble(Double::valueOf)).get();\r\n        feature.setScore(chisquared);\r\n        return feature;\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed6996f057479914-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed6996f057479914-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed6996f057479914-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed6996f057479914-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed6996f057479914-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed6996f057479914-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed6996f057479914-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed6996f057479914-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed6996f057479914-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed6996f057479914-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed6996f057479914-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed6996f057479914-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed6996f057479914-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed6996f057479914-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed6996f057479914-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed6996f057479914-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed6996f057479914-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed6996f057479914-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed6996f057479914-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed6996f057479914-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed6996f057479914-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed6996f057479914-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed6996f057479914-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed6996f057479914-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed6996f057479914-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed6996f057479914-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed6996f057479914-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed6996f057479914-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed6996f057479914-29\">29</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a2ed6996f057479914-1\"><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">AllArgsConstructor</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed6996f057479914-2\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ChiSquaredStrategy</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">implements</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Strategy</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed6996f057479914-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed6996f057479914-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">final</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Collection </span><span class=\"crayon-v\">categories</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed6996f057479914-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed6996f057479914-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">final</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">total</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed6996f057479914-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed6996f057479914-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">@</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Override</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed6996f057479914-9\"><span class=\"crayon-e\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Feature </span><span class=\"crayon-e\">estimate</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">Feature </span><span class=\"crayon-v\">feature</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed6996f057479914-10\"> </div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed6996f057479914-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ContingencyTable</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed6996f057479914-12\"><span class=\"crayon-h\">            </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">final</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">C</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">D</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed6996f057479914-13\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed6996f057479914-14\"><span class=\"crayon-h\">            </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ContingencyTable</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">Feature </span><span class=\"crayon-v\">feature</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Category </span><span class=\"crayon-v\">category</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed6996f057479914-15\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">feature</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getDocCountByCategory</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">category</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed6996f057479914-16\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">B</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">feature</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getFeatureCount</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed6996f057479914-17\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">C</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">category</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getDocCount</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed6996f057479914-18\"><span class=\"crayon-h\">                </span><span class=\"crayon-v\">D</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">total</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">B</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">C</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed6996f057479914-19\"><span class=\"crayon-h\">            </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed6996f057479914-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed6996f057479914-21\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed6996f057479914-22\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">Double</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">chisquared</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">categories</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">stream</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed6996f057479914-23\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">map</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ContingencyTable</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">feature</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed6996f057479914-24\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">map</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ct</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Calculator</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">chisquare</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ct</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ct</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ct</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">C</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ct</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">D</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed6996f057479914-25\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">max</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Comparator</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">comparingDouble</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">Double</span><span class=\"crayon-o\">::</span><span class=\"crayon-v\">valueOf</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed6996f057479914-26\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">feature</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setScore</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">chisquared</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed6996f057479914-27\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">feature</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed6996f057479914-28\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed6996f057479914-29\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0050 seconds] -->\r\n<p></p>\n<h1>四、朴素贝叶斯模型</h1>\n<h2>4.1 原理简介</h2>\n<p>朴素贝叶斯模型之所以称之“朴素”，是因为其假设特征之间是相互独立的，在文本分类中，也就是说，一篇文档中出现的词都是相互独立，彼此没有关联，显然文档中出现的词都是有逻辑性的，这种假设在现实中几乎是不成立的，但是这种假设却大大简化了计算，根据贝叶斯公式，文档Doc属于类别Ci的概率为：</p>\n<p><img class=\"aligncenter\" src=\"http://www.fullstackyang.com/wp-content/uploads/2018/03/nb.png\" width=\"405\" height=\"86\"></p>\n<p>P(Ci|Doc)是所求的后验概率，我们在判定分类时，根据每个类别计算P(Ci|Doc)，最终把P(Ci|Doc)取得最大值的那个分类作为文档的类别。其中，P(Doc)对于类别Ci来说是常量，在比较大小时可以不用参与计算，而P(Ci)表示类别Ci出现的概率，我们称之为先验概率，这可以方便地从训练集中统计得出，至于P(Doc|Ci)，也就是类别的条件概率，如果没有朴素贝叶斯的假设，那么计算是非常困难的。</p>\n<p>举例来说，假设有一篇文章，内容为“王者荣耀：两款传说品质皮肤将优化，李白最新模型海报爆料”，经过特征选择，文档可以表示为Doc=(王者荣耀，传说，品质，皮肤，优化，李白，最新，模型，海报，爆料)，那么在预测时需要计算P(王者荣耀，传说，品质，皮肤，优化，李白，最新，模型，海报，爆料|Ci)，这样一个条件概率是不可计算的，因为第一个特征取值为“王者荣耀”，第二个特征取值“传说”……第十个特征取值“爆料”的文档很可能为没有，那么概率就为零，而基于朴素贝叶斯的假设，这个条件概率可以转化为：</p>\n<p>P(王者荣耀，传说，品质，皮肤，优化，李白，最新，模型，海报，爆料|Ci)=P(王者荣耀|Ci)<em>P(传说|Ci)……</em>P(爆料|Ci)</p>\n<p>于是我们就可以统计这些特征词在每个类别中出现的概率了，在这个例子中，游戏类别中“王者荣耀”这个特征项会频繁出现，因此P(王者荣耀|游戏)的条件概率要明显高于其他类别，这就是朴素贝叶斯模型的朴素之处，粗鲁的聪明。</p>\n<h2>4.2 多项式模型与伯努利模型</h2>\n<p>在具体实现中，朴素贝叶斯又可以分为两种模型，多项式模型（Multinomial）和伯努利模型（Bernoulli），另外还有高斯模型，主要用于处理连续型变量，在文本分类中不讨论。</p>\n<p>多项式模型和伯努利模型的区别在于对词频的考察，在多项式模型中文档中特征项的频度是参与计算的，这对于长文本来说是比较公平的，例如上面的例子，“王者荣耀”在游戏类的文档中频度会比较高，而伯努利模型中，所有特征词都均等地对待，只要出现就记为1，未出现就记为0，两者公式如下：</p>\n<p><img class=\"aligncenter\" src=\"http://www.fullstackyang.com/wp-content/uploads/2018/03/nb-b-m.png\" width=\"755\" height=\"238\"></p>\n<p>在伯努利模型计算公式中，N(Doc(tj)|Ci)表示Ci类文档中特征tj出现的文档数，|D|表示类别Ci的文档数，P(Ci)可以用类别Ci的文档数/文档总数来计算，</p>\n<p>在多项式模型计算公式中，TF(ti,Doc)是文档Doc中特征ti出现的频度，TF(ti,Ci)就表示类别Ci中特征ti出现的频度，|V|表示特征空间的大小，也就是特征选择之后，不同（即去掉重复之后）的特征项的总个数，而P(Ci)可以用类别Ci中特征词的总数/所有特征词的总数，所有特征词的总数也就是所有特征词的词频之和。</p>\n<p>至于分子和分母都加上一定的常量，这是为了防止数据稀疏而产生结果为零的现象，这种操作称为拉普拉斯平滑，至于背后的原理，推荐阅读这篇博客：<a href=\"https://zhuanlan.zhihu.com/p/24291822\">贝叶斯统计观点下的拉普拉斯平滑</a></p>\n<h2>4.3 算法实现</h2>\n<p>这里使用了枚举类来封装两个模型，并实现了分类器NaiveBayesClassifier和训练器NaiveBayesLearner中的两个接口，其中Pprior和Pcondition是训练器所需的方法，前者用来计算先验概率，后者用来计算不同特征项在不同类别下的条件概率；getConditionProbability是分类器所需的方法，NaiveBayesKnowledgeBase对象是模型数据的容器，它的getPconditionByWord方法就是用于查询不同特征词在不同类别下的条件概率</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a2ed69977260993410\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npublic enum NaiveBayesModels implements NaiveBayesClassifier.Model, NaiveBayesLearner.Model {\r\n    Bernoulli {\r\n        @ Override\r\n        public double Pprior(int total, Category category) {\r\n            int Nc = category.getDocCount();\r\n            return Math.log((double) Nc / total);\r\n        }\r\n\r\n        @ Override\r\n        public double Pcondition(Feature feature, Category category, double smoothing) {\r\n            int Ncf = feature.getDocCountByCategory(category);\r\n            int Nc = category.getDocCount();\r\n            return Math.log((double) (1 + Ncf) / (Nc + smoothing));\r\n        }\r\n\r\n        @ Override\r\n        public List getConditionProbability(String category, List terms, final NaiveBayesKnowledgeBase knowledgeBase) {\r\n            return terms.stream().map(term -&gt; knowledgeBase.getPconditionByWord(category, term.getWord())).collect(toList());\r\n        }\r\n    },\r\n    Multinomial {\r\n        @ Override\r\n        public double Pprior(int total, Category category) {\r\n            int Nt = category.getTermCount();\r\n            return Math.log((double) Nt / total);\r\n        }\r\n\r\n        @ Override\r\n        public double Pcondition(Feature feature, Category category, double smoothing) {\r\n            int Ntf = feature.getTermCountByCategory(category);\r\n            int Nt = category.getTermCount();\r\n            return Math.log((double) (1 + Ntf) / (Nt + smoothing));\r\n        }\r\n\r\n        @ Override\r\n        public List getConditionProbability(String category, List terms, final NaiveBayesKnowledgeBase knowledgeBase) {\r\n            return terms.stream().map(term -&gt; term.getTf() * knowledgeBase.getPconditionByWord(category, term.getWord())).collect(toList());\r\n        }\r\n    };\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69977260993410-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69977260993410-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69977260993410-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69977260993410-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69977260993410-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69977260993410-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69977260993410-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69977260993410-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69977260993410-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69977260993410-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69977260993410-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69977260993410-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69977260993410-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69977260993410-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69977260993410-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69977260993410-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69977260993410-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69977260993410-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69977260993410-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69977260993410-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69977260993410-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69977260993410-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69977260993410-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69977260993410-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69977260993410-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69977260993410-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69977260993410-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69977260993410-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69977260993410-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69977260993410-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69977260993410-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69977260993410-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69977260993410-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69977260993410-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69977260993410-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69977260993410-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69977260993410-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69977260993410-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69977260993410-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69977260993410-40\">40</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69977260993410-1\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">enum</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">NaiveBayesModels </span><span class=\"crayon-r\">implements</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">NaiveBayesClassifier</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Model</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">NaiveBayesLearner</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">Model</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69977260993410-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">Bernoulli</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69977260993410-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">@</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Override</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69977260993410-4\"><span class=\"crayon-e\">        </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">double</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Pprior</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">total</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Category </span><span class=\"crayon-v\">category</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69977260993410-5\"><span class=\"crayon-h\">            </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Nc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">category</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getDocCount</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69977260993410-6\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Math</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">double</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Nc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">total</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69977260993410-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69977260993410-8\"> </div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69977260993410-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">@</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Override</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69977260993410-10\"><span class=\"crayon-e\">        </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">double</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Pcondition</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">Feature </span><span class=\"crayon-v\">feature</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Category </span><span class=\"crayon-v\">category</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">double</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">smoothing</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69977260993410-11\"><span class=\"crayon-h\">            </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Ncf</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">feature</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getDocCountByCategory</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">category</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69977260993410-12\"><span class=\"crayon-h\">            </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Nc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">category</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getDocCount</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69977260993410-13\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Math</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">double</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Ncf</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Nc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">smoothing</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69977260993410-14\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69977260993410-15\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69977260993410-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">@</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Override</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69977260993410-17\"><span class=\"crayon-e\">        </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">List </span><span class=\"crayon-e\">getConditionProbability</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">category</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">List </span><span class=\"crayon-v\">terms</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">final</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">NaiveBayesKnowledgeBase </span><span class=\"crayon-v\">knowledgeBase</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69977260993410-18\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">terms</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">stream</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">map</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">term</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">knowledgeBase</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getPconditionByWord</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">category</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">term</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getWord</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">collect</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">toList</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69977260993410-19\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69977260993410-20\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69977260993410-21\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">Multinomial</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69977260993410-22\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">@</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Override</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69977260993410-23\"><span class=\"crayon-e\">        </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">double</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Pprior</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">total</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Category </span><span class=\"crayon-v\">category</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69977260993410-24\"><span class=\"crayon-h\">            </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Nt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">category</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getTermCount</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69977260993410-25\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Math</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">double</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Nt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">total</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69977260993410-26\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69977260993410-27\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69977260993410-28\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">@</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Override</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69977260993410-29\"><span class=\"crayon-e\">        </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">double</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Pcondition</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">Feature </span><span class=\"crayon-v\">feature</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Category </span><span class=\"crayon-v\">category</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">double</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">smoothing</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69977260993410-30\"><span class=\"crayon-h\">            </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Ntf</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">feature</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getTermCountByCategory</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">category</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69977260993410-31\"><span class=\"crayon-h\">            </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Nt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">category</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getTermCount</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69977260993410-32\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Math</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">log</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">double</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Ntf</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Nt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">smoothing</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69977260993410-33\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69977260993410-34\"> </div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69977260993410-35\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">@</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Override</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69977260993410-36\"><span class=\"crayon-e\">        </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">List </span><span class=\"crayon-e\">getConditionProbability</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">category</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">List </span><span class=\"crayon-v\">terms</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">final</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">NaiveBayesKnowledgeBase </span><span class=\"crayon-v\">knowledgeBase</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69977260993410-37\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">terms</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">stream</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">map</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">term</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">term</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getTf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">knowledgeBase</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getPconditionByWord</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">category</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">term</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getWord</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">collect</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">toList</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69977260993410-38\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69977260993410-39\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69977260993410-40\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0086 seconds] -->\r\n<p></p>\n<h2>五、训练模型</h2>\n<p>根据朴素贝叶斯模型的定义，训练模型的过程就是计算每个类的先验概率，以及每个特征项在不同类别下的条件概率，NaiveBayesKnowledgeBase对象将训练器在训练时得到的结果都保存起来，训练完成时写入文件，启动分类时从文件中读入数据交由分类器使用，那么在分类时就可以直接参与到计算过程中。</p>\n<p>训练器的实现如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a2ed69980537646793\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npublic class NaiveBayesLearner {\r\n    ……\r\n    ……\r\n    public NaiveBayesLearner statistics() {\r\n        log.info(\"开始统计...\");\r\n        this.total = total();\r\n        log.info(\"total : \" + total);\r\n        this.categorySet = trainSet.getCategorySet();\r\n        featureSet.forEach(f -&gt; f.getCategoryTermCounter().forEach((category, count) -&gt; category.setTermCount(category.getTermCount() + count)));\r\n        return this;\r\n    }\r\n\r\n    public NaiveBayesKnowledgeBase build() {\r\n        this.knowledgeBase.setCategories(createCategorySummaries(categorySet));\r\n        this.knowledgeBase.setFeatures(createFeatureSummaries(featureSet, categorySet));\r\n        return knowledgeBase;\r\n    }\r\n\r\n    private Map createFeatureSummaries(final Set featureSet, final Set categorySet) {\r\n        return featureSet.parallelStream()\r\n                .map(f -&gt; knowledgeBase.createFeatureSummary(f, getPconditions(f, categorySet)))\r\n                .collect(toMap(NaiveBayesKnowledgeBase.FeatureSummary::getWord, Function.identity()));\r\n    }\r\n\r\n    private Map createCategorySummaries(final Set categorySet) {\r\n        return categorySet.stream().collect(toMap(Category::getName, c -&gt; model.Pprior(total, c)));\r\n    }\r\n\r\n    private Map getPconditions(final Feature feature, final Set categorySet) {\r\n        final double smoothing = smoothing();\r\n        return categorySet.stream()\r\n                .collect(toMap(Category::getName, c -&gt; model.Pcondition(feature, c, smoothing)));\r\n    }\r\n\r\n    private int total() {\r\n        if (model == Multinomial)\r\n            return featureSet.parallelStream().map(Feature::getTerm).mapToInt(Term::getTf).sum();//总词频数\r\n        else if (model == Bernoulli)\r\n            return trainSet.getTotalDoc();//总文档数\r\n        return 0;\r\n    }\r\n\r\n    private double smoothing() {\r\n        if (model == Multinomial)\r\n            return this.featureSet.size();\r\n        else if (model == Bernoulli)\r\n            return 2.0;\r\n        return 0.0;\r\n    }\r\n\r\n    public static void main(String[] args) {\r\n        TrainSet trainSet = new TrainSet(System.getProperty(\"user.dir\") + \"/trainset/\");\r\n\r\n        log.info(\"特征选择开始...\");\r\n        FeatureSelection featureSelection = new FeatureSelection(new ChiSquaredStrategy(trainSet.getCategorySet(), trainSet.getTotalDoc()));\r\n        List features = featureSelection.select(trainSet.getDocs());\r\n        log.info(\"特征选择完成,特征数:[\" + features.size() + \"]\");\r\n\r\n        NaiveBayesModels model = NaiveBayesModels.Multinomial;\r\n        NaiveBayesLearner learner = new NaiveBayesLearner(model, trainSet, Sets.newHashSet(features));\r\n        learner.statistics().build().write(model.getModelPath());\r\n        log.info(\"模型文件写入完成,路径:\" + model.getModelPath());\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69980537646793-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69980537646793-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69980537646793-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69980537646793-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69980537646793-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69980537646793-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69980537646793-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69980537646793-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69980537646793-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69980537646793-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69980537646793-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69980537646793-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69980537646793-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69980537646793-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69980537646793-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69980537646793-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69980537646793-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69980537646793-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69980537646793-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69980537646793-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69980537646793-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69980537646793-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69980537646793-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69980537646793-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69980537646793-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69980537646793-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69980537646793-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69980537646793-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69980537646793-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69980537646793-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69980537646793-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69980537646793-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69980537646793-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69980537646793-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69980537646793-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69980537646793-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69980537646793-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69980537646793-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69980537646793-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69980537646793-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69980537646793-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69980537646793-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69980537646793-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69980537646793-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69980537646793-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69980537646793-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69980537646793-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69980537646793-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69980537646793-49\">49</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69980537646793-50\">50</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69980537646793-51\">51</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69980537646793-52\">52</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69980537646793-53\">53</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69980537646793-54\">54</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69980537646793-55\">55</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69980537646793-56\">56</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69980537646793-57\">57</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69980537646793-58\">58</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69980537646793-59\">59</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69980537646793-60\">60</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69980537646793-61\">61</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69980537646793-62\">62</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69980537646793-63\">63</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69980537646793-64\">64</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69980537646793-1\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">NaiveBayesLearner</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69980537646793-2\"><span class=\"crayon-h\">    </span>……</div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69980537646793-3\"><span class=\"crayon-h\">    </span>……</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69980537646793-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">NaiveBayesLearner </span><span class=\"crayon-e\">statistics</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69980537646793-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">log</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">info</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"开始统计...\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69980537646793-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">total</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">total</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69980537646793-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">log</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">info</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"total : \"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">total</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69980537646793-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">categorySet</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">trainSet</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getCategorySet</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69980537646793-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">featureSet</span><span class=\"crayon-sy\">.</span><span class=\"crayon-st\">forEach</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">f</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getCategoryTermCounter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-st\">forEach</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">category</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">count</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">category</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setTermCount</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">category</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getTermCount</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">count</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69980537646793-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69980537646793-11\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69980537646793-12\"> </div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69980537646793-13\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">NaiveBayesKnowledgeBase </span><span class=\"crayon-e\">build</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69980537646793-14\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">knowledgeBase</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setCategories</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">createCategorySummaries</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">categorySet</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69980537646793-15\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">knowledgeBase</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">setFeatures</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">createFeatureSummaries</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">featureSet</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">categorySet</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69980537646793-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">knowledgeBase</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69980537646793-17\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69980537646793-18\"> </div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69980537646793-19\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Map </span><span class=\"crayon-e\">createFeatureSummaries</span><span class=\"crayon-sy\">(</span><span class=\"crayon-m\">final</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Set </span><span class=\"crayon-v\">featureSet</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">final</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Set </span><span class=\"crayon-v\">categorySet</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69980537646793-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">featureSet</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">parallelStream</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69980537646793-21\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">map</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">f</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">knowledgeBase</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">createFeatureSummary</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getPconditions</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">categorySet</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69980537646793-22\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">collect</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">toMap</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">NaiveBayesKnowledgeBase</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">FeatureSummary</span><span class=\"crayon-o\">::</span><span class=\"crayon-v\">getWord</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Function</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">identity</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69980537646793-23\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69980537646793-24\"> </div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69980537646793-25\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Map </span><span class=\"crayon-e\">createCategorySummaries</span><span class=\"crayon-sy\">(</span><span class=\"crayon-m\">final</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Set </span><span class=\"crayon-v\">categorySet</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69980537646793-26\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">categorySet</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">stream</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">collect</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">toMap</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Category</span><span class=\"crayon-o\">::</span><span class=\"crayon-v\">getName</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">model</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Pprior</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">total</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69980537646793-27\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69980537646793-28\"> </div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69980537646793-29\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Map </span><span class=\"crayon-e\">getPconditions</span><span class=\"crayon-sy\">(</span><span class=\"crayon-m\">final</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Feature </span><span class=\"crayon-v\">feature</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">final</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Set </span><span class=\"crayon-v\">categorySet</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69980537646793-30\"><span class=\"crayon-h\">        </span><span class=\"crayon-m\">final</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">double</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">smoothing</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">smoothing</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69980537646793-31\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">categorySet</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">stream</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69980537646793-32\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">collect</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">toMap</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Category</span><span class=\"crayon-o\">::</span><span class=\"crayon-v\">getName</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">model</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Pcondition</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">feature</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">smoothing</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69980537646793-33\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69980537646793-34\"> </div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69980537646793-35\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">total</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69980537646793-36\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">model</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Multinomial</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69980537646793-37\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">featureSet</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">parallelStream</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">map</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Feature</span><span class=\"crayon-o\">::</span><span class=\"crayon-v\">getTerm</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">mapToInt</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Term</span><span class=\"crayon-o\">::</span><span class=\"crayon-v\">getTf</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">sum</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//总词频数</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69980537646793-38\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">model</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Bernoulli</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69980537646793-39\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">trainSet</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getTotalDoc</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-c\">//总文档数</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69980537646793-40\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69980537646793-41\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69980537646793-42\"> </div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69980537646793-43\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">double</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">smoothing</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69980537646793-44\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">model</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Multinomial</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69980537646793-45\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">featureSet</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">size</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69980537646793-46\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">else</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">model</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Bernoulli</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69980537646793-47\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69980537646793-48\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69980537646793-49\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69980537646793-50\"> </div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69980537646793-51\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">args</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69980537646793-52\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">TrainSet </span><span class=\"crayon-v\">trainSet</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">TrainSet</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getProperty</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"user.dir\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"/trainset/\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69980537646793-53\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69980537646793-54\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">log</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">info</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"特征选择开始...\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69980537646793-55\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">FeatureSelection </span><span class=\"crayon-v\">featureSelection</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">FeatureSelection</span><span class=\"crayon-sy\">(</span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ChiSquaredStrategy</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">trainSet</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getCategorySet</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">trainSet</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getTotalDoc</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69980537646793-56\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">List </span><span class=\"crayon-v\">features</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">featureSelection</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">select</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">trainSet</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getDocs</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69980537646793-57\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">log</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">info</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"特征选择完成,特征数:[\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">features</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">size</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"]\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69980537646793-58\"> </div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69980537646793-59\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">NaiveBayesModels </span><span class=\"crayon-v\">model</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">NaiveBayesModels</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">Multinomial</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69980537646793-60\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">NaiveBayesLearner </span><span class=\"crayon-v\">learner</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">NaiveBayesLearner</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">model</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">trainSet</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Sets</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">newHashSet</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">features</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69980537646793-61\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">learner</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">statistics</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">build</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">write</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">model</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getModelPath</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69980537646793-62\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">log</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">info</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"模型文件写入完成,路径:\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">model</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getModelPath</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69980537646793-63\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69980537646793-64\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0131 seconds] -->\r\n<p>在main函数中执行整个训练过程，首先执行特征选择，这里使用卡方检验法，然后将得到特征空间，朴素贝叶斯模型（多项式模型），以及训练集TrainSet对象作为参数，初始化训练器，接着训练器开始进行统计的工作，事实上有一部分的统计工作，在初始化训练集对象时，就已经完成了，例如总文档数，每个类别下的文档数等，这些可以直接拿过来使用，最终将数据都装载到NaiveBayesKnowledgeBase对象当中去，并写入文件，格式为第一行是不同类别的先验概率，余下每一行对应一个特征项，每一列对应不同类别的条件概率值。</p>\n<h1>六，测试模型</h1>\n<p>分类器预测过程就相对于比较简单了，通过NaiveBayesKnowledgeBase读入数据，然后将指定的文本进行分词，匹配特征项，然后计算在不同类别下的后验概率，返回取得最大值对应的那个类别。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a2ed69986897079118\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npublic class NaiveBayesClassifier {\r\n    ……\r\n    private final Model model;\r\n\r\n    private final NaiveBayesKnowledgeBase knowledgeBase;\r\n\r\n    public NaiveBayesClassifier(Model model) {\r\n        this.model = model;\r\n        this.knowledgeBase = new NaiveBayesKnowledgeBase(model.getModelPath());\r\n    }\r\n\r\n    public String predict(String content) {\r\n        Set allFeatures = knowledgeBase.getFeatures().keySet();\r\n        List terms = NLPTools.instance().segment(content).stream()\r\n                .filter(t -&gt; allFeatures.contains(t.getWord())).distinct().collect(toList());\r\n\r\n        @AllArgsConstructor\r\n        class Result {\r\n            final String category;\r\n            final double probability;\r\n        }\r\n\r\n        Result result = knowledgeBase.getCategories().keySet().stream()\r\n                .map(c -&gt; new Result(c, Calculator.Ppost(knowledgeBase.getCategoryProbability(c),\r\n                        model.getConditionProbability(c, terms, knowledgeBase))))\r\n                .max(Comparator.comparingDouble(r -&gt; r.probability)).get();\r\n        return result.category;\r\n    }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69986897079118-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69986897079118-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69986897079118-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69986897079118-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69986897079118-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69986897079118-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69986897079118-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69986897079118-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69986897079118-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69986897079118-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69986897079118-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69986897079118-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69986897079118-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69986897079118-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69986897079118-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69986897079118-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69986897079118-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69986897079118-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69986897079118-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69986897079118-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69986897079118-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69986897079118-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69986897079118-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69986897079118-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69986897079118-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69986897079118-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69986897079118-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a2ed69986897079118-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a2ed69986897079118-29\">29</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69986897079118-1\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">NaiveBayesClassifier</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69986897079118-2\"><span class=\"crayon-h\">    </span>……</div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69986897079118-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">final</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Model </span><span class=\"crayon-v\">model</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69986897079118-4\"> </div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69986897079118-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">private</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">final</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">NaiveBayesKnowledgeBase </span><span class=\"crayon-v\">knowledgeBase</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69986897079118-6\"> </div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69986897079118-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">NaiveBayesClassifier</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">Model </span><span class=\"crayon-v\">model</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69986897079118-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">model</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">model</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69986897079118-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-r\">this</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">knowledgeBase</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">NaiveBayesKnowledgeBase</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">model</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getModelPath</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69986897079118-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69986897079118-11\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69986897079118-12\"><span class=\"crayon-h\">    </span><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">predict</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">content</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69986897079118-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">Set </span><span class=\"crayon-v\">allFeatures</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">knowledgeBase</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getFeatures</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">keySet</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69986897079118-14\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">List </span><span class=\"crayon-v\">terms</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">NLPTools</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">instance</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">segment</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">content</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">stream</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69986897079118-15\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">filter</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">allFeatures</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">contains</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getWord</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">distinct</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">collect</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">toList</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69986897079118-16\"> </div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69986897079118-17\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">@</span><span class=\"crayon-e\">AllArgsConstructor</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69986897079118-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Result</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69986897079118-19\"><span class=\"crayon-h\">            </span><span class=\"crayon-m\">final</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">category</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69986897079118-20\"><span class=\"crayon-h\">            </span><span class=\"crayon-m\">final</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">double</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">probability</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69986897079118-21\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69986897079118-22\"> </div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69986897079118-23\"><span class=\"crayon-h\">        </span><span class=\"crayon-e\">Result </span><span class=\"crayon-v\">result</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">knowledgeBase</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getCategories</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">keySet</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">stream</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69986897079118-24\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">map</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Result</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Calculator</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Ppost</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">knowledgeBase</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getCategoryProbability</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69986897079118-25\"><span class=\"crayon-h\">                        </span><span class=\"crayon-v\">model</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">getConditionProbability</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">terms</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">knowledgeBase</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69986897079118-26\"><span class=\"crayon-h\">                </span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">max</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">Comparator</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">comparingDouble</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">r</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">r</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">probability</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">get</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69986897079118-27\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">result</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">category</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a2ed69986897079118-28\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a2ed69986897079118-29\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0052 seconds] -->\r\n<p>在实际测试时，我们又单独抓取了搜狗微信搜索网站上的文章，按照100篇一组，一共30组进行分类的测试，最终结果每一组的准确率均在90%以上，最高达98%，效果良好。当然正规的评测需要同时评估准确率和召回率，这里就偷懒不做了。</p>\n<p>另外还需要说明一点的是，由于训练集是来源于搜狗微信搜索网站的文章，类别仅限于这20个，这不足以覆盖所有微信公众号文章的类别，因此在测试其他来源的微信文章准确率一定会有所影响。当然如果有更加丰富的微信文章训练集的话，也可以利用这个模型重新训练，那么效果也会越来越好。</p>\n<h1>七、参考文献与引用</h1>\n<ol>\n<li>宗成庆. 统计自然语言处理[M]. 清华大学出版社, 2013.</li>\n<li>T.M.Mitchell. 机器学习[M]. 机械工业出版社, 2003.</li>\n<li>吴军. 数学之美[M]. 人民邮电出版社, 2012.</li>\n<li>Raoul-Gabriel Urma, Mario Fusco, Alan Mycroft. Java 8 实战[M]. 人民邮电出版社, 2016.</li>\n<li>Ansj中文分词器，<a href=\"https://github.com/NLPchina/ansj_seg\">https://github.com/NLPchina/a…</a></li>\n<li>HanLP中文分词器，<a href=\"https://github.com/hankcs/HanLP\">https://github.com/hankcs/HanLP</a></li>\n</ol>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113691\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113691votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113691\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/2653yy\">fullstackyang</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/2653yy\">\r\n\t\t\t<img src=\"http://tp2.sinaimg.cn/2233098320/180/0/1\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            会当凌绝顶，一览众山小——全栈之路        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/2653yy\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/2653yy/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/2653yy/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 7</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://www.fullstackyang.com\"><i class=\"fa fa-link\"></i></a> <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/2653yy\"><i class=\"fa fa-weibo\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>\r\n\t<!-- END .entry -->\r\n\r\n\r\n<script type=\"text/javascript\">\r\nvar jiathis_config={\r\n\tdata_track_clickback:false,\r\n\ttitle:\"分享从伯乐在线看到的一篇好文章 \",\r\n\tsummary:\"《如何实现一个基本的微信文章分类器》\",\r\n\tpic:\"http://jbcdn2.b0.upaiyun.com/2016/09/3fb6592ac92133a71f0ae78e43683e83.jpg\",\r\n\tappkey:{\r\n         \"tsina\": 1473879058    },\r\n\tralateuid:{\r\n\t\t\"tsina\": 1670481425\t},\r\n\thideMore:false\r\n}\r\n</script>\r\n<script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js?uid=1745061\" charset=\"utf-8\"></script>\r\n<!-- JiaThis Button END -->\r\n\t\t\t<div class=\"textwidget\"><p><a href=\"http://group.jobbole.com/22945/\" target=\"_blank\"><img src=\"http://wx1.sinaimg.cn/mw690/bfdcef89gy1fq547hqqaij20h803cgm9.jpg\"></a></p>\n</div>\n\t\t\r\n</div>\r\n<!-- END .post -->\r\n            <div style=\"text-align: left;\">\r\n            <h3>相关文章</h3>\r\n            <ul style=\"font-size: 13px; list-style: disc inside;\">\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"AI 从业者都会用到的 10 个深度学习方法\" target=\"_blank\" href=\"http://blog.jobbole.com/113740/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">AI 从业者都会用到的 10 个深度学习方法</a>\r\n                                            </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"做 ML 有关的工作，需要哪些技能？\" target=\"_blank\" href=\"http://blog.jobbole.com/113592/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">做 ML 有关的工作，需要哪些技能？</a>\r\n                         · <a href=\"http://blog.jobbole.com/113592/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 11</a>                    </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"如果你还不了解机器学习的简史，请看这篇文章\" target=\"_blank\" href=\"http://blog.jobbole.com/113180/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">如果你还不了解机器学习的简史，请看这篇文章</a>\r\n                         · <a href=\"http://blog.jobbole.com/113180/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 9</a>                    </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"机器学习之Logistic回归算法\" target=\"_blank\" href=\"http://blog.jobbole.com/113182/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">机器学习之Logistic回归算法</a>\r\n                                            </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"2017 机器学习调查报告：Python 最火，R 极具潜力\" target=\"_blank\" href=\"http://blog.jobbole.com/112832/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">2017 机器学习调查报告：Python 最火，R 极具潜力</a>\r\n                         · <a href=\"http://blog.jobbole.com/112832/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 2</a>                    </span>\r\n                    </li>\r\n                            </ul>\r\n        </div>\r\n    \r\n    \n<div style=\"text-align: left;\">\n    <h3>可能感兴趣的话题</h3>\n    <ul style=\"font-size: 13px; list-style: disc inside;\">\n                        <li>\n                    <a href=\"http://group.jobbole.com/33039/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"Eng  ---  React ,Vue ,Angular全家桶套餐外的另一种超轻量级实现方式 (16kb)\" target=\"_blank\">Eng  ---  React ,Vue ,Angular全家桶套餐外的另一种超轻量级实...</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/33038/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"28岁刚入门，靠谱不？\" target=\"_blank\">28岁刚入门，靠谱不？</a>\n                     · <a href=\"http://group.jobbole.com/33038/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 7</a>                </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32985/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"工作四年，该如何晋级架构师？\" target=\"_blank\">工作四年，该如何晋级架构师？</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32958/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"java 的nio和网络编程nio 的区别\" target=\"_blank\">java 的nio和网络编程nio 的区别</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32933/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"工作压力大，然后出错多。。然后工作压力大。该怎么调整自己的状态……\" target=\"_blank\">工作压力大，然后出错多。。然后工作压力大。该怎么调整自己的状态……</a>\n                     · <a href=\"http://group.jobbole.com/32933/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 5</a>                </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32879/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"是去北上广深闯几年还是留在二线城市？\" target=\"_blank\">是去北上广深闯几年还是留在二线城市？</a>\n                     · <a href=\"http://group.jobbole.com/32879/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 2</a>                </li>\n                </ul>\n</div>\r\n\t\n            <div id=\"article-comment\" class=\"dot-box center-align\">\n\n                        <a href=\"http://www.jobbole.com/login?redirect=http://blog.jobbole.com/113691/\"><button type=\"button\" class=\"btn btn-non-transparent\">登录后评论</button></a>\n            \n            <a target=\"_blank\" href=\"http://www.jobbole.com/register\"><button type=\"button\" class=\"btn btn-primary\">新用户注册</button></a>\n\n            <br><br>\n            <span>直接登录</span>\n            <style type=\"text/css\">.t_login_text{margin:0; padding:0;}.t_login_button{margin:0; padding: 5px 0;}.t_login_button a{margin:0; padding-right:3px; line-height:25px}.t_login_button img{display:inline; border:none;}</style><!-- 使用社交帐号登录 来自 WordPress连接微博 插件 --><span class=\"connectBox1 t_login_button\"><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=weixin&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113691%2F\" title=\"微信\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_weixin.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=qzone&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113691%2F\" title=\"QQ\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_qzone.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=sina&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113691%2F\" title=\"新浪微博\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_sina.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=douban&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113691%2F\" title=\"豆瓣\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_douban.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=github&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113691%2F\" title=\"GitHub\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_github.png\"></a></span>        </div>\n    \n\n    <div id=\"comment_list\" class=\"comments\">\n\n        \n    </div>\n\t\t\r\n\r\n\t\r\n</div>", "tag": "IT技术-文本分类-机器学习", "url": "http://blog.jobbole.com/113691/", "url_object_id": "56e79f596a3a59be443b4a4f909b938a", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2016/09/3fb6592ac92133a71f0ae78e43683e83.jpg"], "front_image_path": "full/9a51fcef743ae4aca8b8c39bcc18e02a01782e9c.jpg"}
{"title": "在 Linux 中自动配置 IPv6 地址", "create_date": "2018/03/14", "praise_nums": "1", "fav_nums": "2", "comments_nums": "1", "content": "<div class=\"grid-8\">\r\n\r\n\t\t\r\n\t<!-- BEGIN .post -->\r\n<div class=\"post-113771 post type-post status-publish format-standard hentry category-it-tech tag-ipv6 tag-linux odd\" id=\"post-113771\">\r\n\t\r\n\t<!-- BEGIN .entry-header -->\r\n\t<div class=\"entry-header\">\r\n\t\r\n\t\t\t\t\r\n\t\t<h1>在 Linux 中自动配置 IPv6 地址</h1>\r\n\t\t\r\n\t\t\t\t\t\t\t\r\n\t</div>\r\n\t<!-- BEGIN .entry-header -->\r\n\t\r\n\t<!-- BEGIN .entry-meta -->\r\n\t<div class=\"entry-meta\">\r\n\t\r\n\t\t<p class=\"entry-meta-hide-on-mobile\">\r\n\r\n            2018/03/14 ·  <a href=\"http://blog.jobbole.com/category/it-tech/\" rel=\"category tag\">IT技术</a>\r\n            \r\n                            · <a href=\"#article-comment\"> 1 评论 </a>\r\n            \r\n\r\n            \r\n             ·  <a href=\"http://blog.jobbole.com/tag/ipv6/\">IPv6</a>, <a href=\"http://blog.jobbole.com/tag/linux/\">Linux</a>\r\n            \r\n</p>\r\n\r\n<!-- JiaThis Button BEGIN -->\r\n<div class=\"jiathis_style\" style=\"display: block; margin: 0 0px; clear: both;\"><span class=\"jiathis_txt\">分享到：</span>\r\n<a class=\"jiathis_button_tsina\"></a>\r\n<a class=\"jiathis_button_weixin\"></a>\r\n<a class=\"jiathis_button_qzone\"></a>\r\n<a class=\"jiathis_button_fb\"></a>\r\n<a class=\"jiathis_button_douban\"></a>\r\n<a class=\"jiathis_button_readitlater\"></a>\r\n<a class=\"jiathis_button_evernote\"></a>\r\n<a class=\"jiathis_button_ydnote\"></a>\r\n<a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\r\n<a class=\"jiathis_counter_style\"></a>\r\n</div>\r\n<!-- JiaThis Button END -->\r\n\r\n\r\n\t</div>\r\n\t<!-- END .entry-meta -->\r\n\r\n\t<!-- BEGIN .entry -->\r\n\t<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.linux.com/learn/intro-to-linux/2017/12/ipv6-auto-configuration-linux\">Carla Schroder</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9434-1.html\">Linux中国/qhwdw</a>   </div><p>在 <a href=\"https://www.linux.com/learn/intro-to-linux/2017/11/testing-ipv6-networking-kvm-part-1\">KVM 中测试 IPv6 网络：第 1 部分</a> 一文中，我们学习了关于唯一本地地址unique local addresses（ULA）的相关内容。在本文中，我们将学习如何为 ULA 自动配置 IP 地址。</p>\n<h3 id=\"toc_1\">何时使用唯一本地地址</h3>\n<p>唯一本地地址unique local addresses（ULA）使用 <code>fd00::/8</code> 地址块，它类似于我们常用的 IPv4 的私有地址：<code>10.0.0.0/8</code>、<code>172.16.0.0/12</code>、以及 <code>192.168.0.0/16</code>。但它们并不能直接替换。IPv4 的私有地址分类和网络地址转换（NAT）功能是为了缓解 IPv4 地址短缺的问题，这是个明智的解决方案，它延缓了本该被替换的 IPv4 的生命周期。IPv6 也支持 NAT，但是我想不出使用它的理由。IPv6 的地址数量远远大于 IPv4；它是不一样的，因此需要做不一样的事情。</p>\n<p>那么，ULA 存在的意义是什么呢？尤其是在我们已经有了本地链路地址link-local addresses（<code>fe80::/10</code>）时，到底需不需要我们去配置它们呢？它们之间（LCTT 译注：指的是唯一本地地址和本地链路地址）有两个重要的区别。一是，本地链路地址是不可路由的，因此，你不能跨子网使用它。二是，ULA 是你自己管理的；你可以自己选择它用于子网的地址范围，并且它们是可路由的。</p>\n<p>使用 ULA 的另一个好处是，如果你只是在局域网中“混日子”的话，你不需要为它们分配全局单播 IPv6 地址。当然了，如果你的 ISP 已经为你分配了 IPv6 的全局单播地址global unicast addresses，就不需要使用 ULA 了。你也可以在同一个网络中混合使用全局单播地址和 ULA，但是，我想不出这样使用的一个好理由，并且要一定确保你不使用网络地址转换（NAT）以使 ULA 可公共访问。在我看来，这是很愚蠢的行为。</p>\n<p>ULA 是仅为私有网络使用的，并且应该阻止其流出你的网络，不允许进入因特网。这很简单，在你的边界设备上只要阻止整个 <code>fd00::/8</code> 范围的 IPv6 地址即可实现。</p>\n<h3 id=\"toc_2\">地址自动配置</h3>\n<p>ULA 不像本地链路地址那样自动配置的，但是使用 radvd 设置自动配置是非常容易的，radva 是路由器公告守护程序。在你开始之前，运行 <code>ifconfig</code> 或者 <code>ip addr show</code> 去查看你现有的 IP 地址。</p>\n<p>在生产系统上使用时，你应该将 radvd 安装在一台单独的路由器上，如果只是测试使用，你可以将它安装在你的网络中的任意 Linux PC 上。在我的小型 KVM 测试实验室中，我使用 <code>apt-get install radvd</code> 命令把它安装在 Ubuntu 上。安装完成之后，我先不启动它，因为它还没有配置文件：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a375382c2705619479\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo systemctl status radvd\r\n● radvd.service - LSB: Router Advertising Daemon\r\n   Loaded: loaded (/etc/init.d/radvd; bad; vendor preset: enabled)\r\n   Active: active (exited) since Mon 2017-12-11 20:08:25 PST; 4min 59s ago\r\n     Docs: man:systemd-sysv-generator(8)\r\n\r\nDec 11 20:08:25 ubunut1 systemd[1]: Starting LSB: Router Advertising Daemon...\r\nDec 11 20:08:25 ubunut1 radvd[3541]: Starting radvd:\r\nDec 11 20:08:25 ubunut1 radvd[3541]: * /etc/radvd.conf does not exist or is empty.\r\nDec 11 20:08:25 ubunut1 radvd[3541]: * See /usr/share/doc/radvd/README.Debian\r\nDec 11 20:08:25 ubunut1 radvd[3541]: * radvd will *not* be started.\r\nDec 11 20:08:25 ubunut1 systemd[1]: Started LSB: Router Advertising Daemon.\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a375382c2705619479-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a375382c2705619479-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a375382c2705619479-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a375382c2705619479-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a375382c2705619479-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a375382c2705619479-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a375382c2705619479-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a375382c2705619479-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a375382c2705619479-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a375382c2705619479-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a375382c2705619479-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a375382c2705619479-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a375382c2705619479-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a375382c2705619479-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">systemctl </span><span class=\"crayon-e\">status </span><span class=\"crayon-i\">radvd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a375382c2705619479-2\">●<span class=\"crayon-h\"> </span><span class=\"crayon-v\">radvd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">service</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">LSB</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Router </span><span class=\"crayon-e\">Advertising </span><span class=\"crayon-e\">Daemon</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a375382c2705619479-3\"><span class=\"crayon-e\">   </span><span class=\"crayon-v\">Loaded</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">loaded</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">etc</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">init</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">d</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">radvd</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bad</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">vendor </span><span class=\"crayon-v\">preset</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">enabled</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a375382c2705619479-4\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">Active</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">active</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">exited</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">since </span><span class=\"crayon-i\">Mon</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2017</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">12</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">25</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">PST</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4min</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">59s</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ago</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a375382c2705619479-5\"><span class=\"crayon-e\">     </span><span class=\"crayon-v\">Docs</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">man</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">systemd</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">sysv</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">generator</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a375382c2705619479-6\"> </div><div class=\"crayon-line\" id=\"crayon-5ac9a375382c2705619479-7\"><span class=\"crayon-i\">Dec</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">25</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ubunut1 </span><span class=\"crayon-v\">systemd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Starting </span><span class=\"crayon-v\">LSB</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Router </span><span class=\"crayon-e\">Advertising </span><span class=\"crayon-v\">Daemon</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a375382c2705619479-8\"><span class=\"crayon-i\">Dec</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">25</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ubunut1 </span><span class=\"crayon-v\">radvd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3541</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Starting </span><span class=\"crayon-v\">radvd</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a375382c2705619479-9\"><span class=\"crayon-i\">Dec</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">25</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ubunut1 </span><span class=\"crayon-v\">radvd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3541</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">etc</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">radvd</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">conf </span><span class=\"crayon-e\">does </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">exist </span><span class=\"crayon-st\">or</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">empty</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a375382c2705619479-10\"><span class=\"crayon-i\">Dec</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">25</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ubunut1 </span><span class=\"crayon-v\">radvd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3541</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">See</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">share</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">doc</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">radvd</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">README</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">Debian</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a375382c2705619479-11\"><span class=\"crayon-i\">Dec</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">25</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ubunut1 </span><span class=\"crayon-v\">radvd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">3541</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">radvd </span><span class=\"crayon-e \">will *</span><span class=\"crayon-st\">not</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">be </span><span class=\"crayon-v\">started</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a375382c2705619479-12\"><span class=\"crayon-i\">Dec</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">25</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ubunut1 </span><span class=\"crayon-v\">systemd</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Started </span><span class=\"crayon-v\">LSB</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Router </span><span class=\"crayon-e\">Advertising </span><span class=\"crayon-v\">Daemon</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a375382c2705619479-13\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0053 seconds] -->\r\n<p>这些所有的消息有点让人困惑，实际上 radvd 并没有运行，你可以使用经典命令 <code>ps | grep radvd</code> 来验证这一点。因此，我们现在需要去创建 <code>/etc/radvd.conf</code> 文件。拷贝这个示例，将第一行的网络接口名替换成你自己的接口名字：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a375382cd692331831\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ninterface ens7 {\r\n  AdvSendAdvert on;\r\n  MinRtrAdvInterval 3;\r\n  MaxRtrAdvInterval 10;\r\n  prefix fd7d:844d:3e17:f3ae::/64\r\n        {\r\n                AdvOnLink on;\r\n                AdvAutonomous on;\r\n        };\r\n\r\n};\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a375382cd692331831-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a375382cd692331831-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a375382cd692331831-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a375382cd692331831-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a375382cd692331831-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a375382cd692331831-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a375382cd692331831-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a375382cd692331831-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a375382cd692331831-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a375382cd692331831-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a375382cd692331831-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a375382cd692331831-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a375382cd692331831-1\"><span class=\"crayon-t\">interface</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ens7</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a375382cd692331831-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">AdvSendAdvert </span><span class=\"crayon-v\">on</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a375382cd692331831-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-i\">MinRtrAdvInterval</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a375382cd692331831-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-i\">MaxRtrAdvInterval</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a375382cd692331831-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">prefix </span><span class=\"crayon-v\">fd7d</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">844d</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">3e17</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">f3ae</span><span class=\"crayon-o\">::</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">64</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a375382cd692331831-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a375382cd692331831-7\"><span class=\"crayon-h\">                </span><span class=\"crayon-e\">AdvOnLink </span><span class=\"crayon-v\">on</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a375382cd692331831-8\"><span class=\"crayon-h\">                </span><span class=\"crayon-e\">AdvAutonomous </span><span class=\"crayon-v\">on</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a375382cd692331831-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a375382cd692331831-10\"> </div><div class=\"crayon-line\" id=\"crayon-5ac9a375382cd692331831-11\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a375382cd692331831-12\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>前缀（<code>prefix</code>）定义了你的网络地址，它是地址的前 64 位。前两个字符必须是 <code>fd</code>，前缀接下来的剩余部分你自己定义它，最后的 64 位留空，因为 radvd 将去分配最后的 64 位。前缀后面的 16 位用来定义子网，剩余的地址定义为主机地址。你的子网必须总是 <code>/64</code>。RFC 4193 要求地址必须随机生成；查看 <a href=\"https://www.linux.com/learn/intro-to-linux/2017/11/testing-ipv6-networking-kvm-part-1\">在 KVM 中测试 IPv6 Networking：第 1 部分</a> 学习创建和管理 ULAs 的更多知识。</p>\n<h3 id=\"toc_3\">IPv6 转发</h3>\n<p>IPv6 转发必须要启用。下面的命令去启用它，重启后生效：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a375382d2019522094\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo sysctl -w net.ipv6.conf.all.forwarding=1\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a375382d2019522094-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a375382d2019522094-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a375382d2019522094-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">sysctl</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">w</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">net</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">ipv6</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">conf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">all</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">forwarding</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a375382d2019522094-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>取消注释或者添加如下的行到 <code>/etc/sysctl.conf</code> 文件中，以使它永久生效：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a375382d6135083991\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nnet.ipv6.conf.all.forwarding = 1\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a375382d6135083991-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a375382d6135083991-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a375382d6135083991-1\"><span class=\"crayon-v\">net</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">ipv6</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">conf</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">all</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">forwarding</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a375382d6135083991-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>启动 radvd 守护程序：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a375382d9643703817\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo systemctl stop radvd\r\n$ sudo systemctl start radvd\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a375382d9643703817-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a375382d9643703817-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a375382d9643703817-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a375382d9643703817-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">systemctl </span><span class=\"crayon-e\">stop </span><span class=\"crayon-i\">radvd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a375382d9643703817-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">systemctl </span><span class=\"crayon-e\">start </span><span class=\"crayon-i\">radvd</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a375382d9643703817-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>这个示例在我的 Ubuntu 测试系统中遇到了一个怪事；radvd 总是停止，我查看它的状态却没有任何问题，做任何改变之后都需要重新启动 radvd。</p>\n<p>启动成功后没有任何输出，并且失败也是如此，因此，需要运行 <code>sudo systemctl status radvd</code> 去查看它的运行状态。如果有错误，<code>systemctl</code> 会告诉你。一般常见的错误都是 <code>/etc/radvd.conf</code> 中的语法错误。</p>\n<p>在 Twitter 上抱怨了上述问题之后，我学到了一件很酷的技巧：当你运行 <code>journalctl -xe --no-pager</code> 去调试 <code>systemctl</code> 错误时，你的输出会被换行，然后，你就可以看到错误信息。</p>\n<p>现在检查你的主机，查看它们自动分配的新地址：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a375382dd917899142\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ifconfig\r\nens7      Link encap:Ethernet  HWaddr 52:54:00:57:71:50  \r\n          [...]\r\n          inet6 addr: fd7d:844d:3e17:f3ae:9808:98d5:bea9:14d9/64 Scope:Global\r\n          [...]\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a375382dd917899142-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a375382dd917899142-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a375382dd917899142-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a375382dd917899142-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a375382dd917899142-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a375382dd917899142-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a375382dd917899142-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ifconfig</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a375382dd917899142-2\"><span class=\"crayon-e\">ens7      </span><span class=\"crayon-e\">Link </span><span class=\"crayon-v\">encap</span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">Ethernet  </span><span class=\"crayon-i\">HWaddr</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">52</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">54</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">57</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">71</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">50</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5ac9a375382dd917899142-3\"><span class=\"crayon-h\">          </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a375382dd917899142-4\"><span class=\"crayon-h\">          </span><span class=\"crayon-e\">inet6 </span><span class=\"crayon-v\">addr</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fd7d</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">844d</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">3e17</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">f3ae</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">9808</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">98d5</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">bea9</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">14d9</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">64</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Scope</span><span class=\"crayon-o\">:</span><span class=\"crayon-m\">Global</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a375382dd917899142-5\"><span class=\"crayon-h\">          </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a375382dd917899142-6\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>本文到此为止，下周继续学习如何为 ULA 管理 DNS，这样你就可以使用一个合适的主机名来代替这些长长的 IPv6 地址。</p>\n<p>通过来自 Linux 基金会和 edX 的 <a href=\"https://training.linuxfoundation.org/linux-courses/system-administration-training/introduction-to-linux\">“Linux 入门”</a> 免费课程学习更多 Linux 的知识。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113771\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113771votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113771\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>\r\n\t<!-- END .entry -->\r\n\r\n\r\n<script type=\"text/javascript\">\r\nvar jiathis_config={\r\n\tdata_track_clickback:false,\r\n\ttitle:\"分享从伯乐在线看到的一篇好文章 \",\r\n\tsummary:\"《在 Linux 中自动配置 IPv6 地址》\",\r\n\tpic:\"http://jbcdn2.b0.upaiyun.com/2018/01/1b8322e1daff605d71fc81e724421f17.jpg\",\r\n\tappkey:{\r\n         \"tsina\": 1473879058    },\r\n\tralateuid:{\r\n\t\t\"tsina\": 1670481425\t},\r\n\thideMore:false\r\n}\r\n</script>\r\n<script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js?uid=1745061\" charset=\"utf-8\"></script>\r\n<!-- JiaThis Button END -->\r\n\t\t\t<div class=\"textwidget\"><p><a href=\"http://group.jobbole.com/22945/\" target=\"_blank\"><img src=\"http://wx1.sinaimg.cn/mw690/bfdcef89gy1fq547hqqaij20h803cgm9.jpg\"></a></p>\n</div>\n\t\t\r\n</div>\r\n<!-- END .post -->\r\n            <div style=\"text-align: left;\">\r\n            <h3>相关文章</h3>\r\n            <ul style=\"font-size: 13px; list-style: disc inside;\">\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"给初学者的 type 命令教程\" target=\"_blank\" href=\"http://blog.jobbole.com/113817/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">给初学者的 type 命令教程</a>\r\n                         · <a href=\"http://blog.jobbole.com/113817/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 1</a>                    </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"为初学者准备的 ln 命令教程（5 个示例）\" target=\"_blank\" href=\"http://blog.jobbole.com/113800/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">为初学者准备的 ln 命令教程（5 个示例）</a>\r\n                                            </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"如何在 Linux 上安装应用程序\" target=\"_blank\" href=\"http://blog.jobbole.com/113793/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">如何在 Linux 上安装应用程序</a>\r\n                         · <a href=\"http://blog.jobbole.com/113793/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 1</a>                    </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"Linux 中的“大内存页”（hugepage）是个什么？\" target=\"_blank\" href=\"http://blog.jobbole.com/113782/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">Linux 中的“大内存页”（hugepage）是个什么？</a>\r\n                                            </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"du 及 df 命令的使用（附带示例）\" target=\"_blank\" href=\"http://blog.jobbole.com/113780/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">du 及 df 命令的使用（附带示例）</a>\r\n                                            </span>\r\n                    </li>\r\n                            </ul>\r\n        </div>\r\n    \r\n    \n<div style=\"text-align: left;\">\n    <h3>可能感兴趣的话题</h3>\n    <ul style=\"font-size: 13px; list-style: disc inside;\">\n                        <li>\n                    <a href=\"http://group.jobbole.com/33039/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"Eng  ---  React ,Vue ,Angular全家桶套餐外的另一种超轻量级实现方式 (16kb)\" target=\"_blank\">Eng  ---  React ,Vue ,Angular全家桶套餐外的另一种超轻量级实...</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/33038/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"28岁刚入门，靠谱不？\" target=\"_blank\">28岁刚入门，靠谱不？</a>\n                     · <a href=\"http://group.jobbole.com/33038/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 7</a>                </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32985/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"工作四年，该如何晋级架构师？\" target=\"_blank\">工作四年，该如何晋级架构师？</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32958/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"java 的nio和网络编程nio 的区别\" target=\"_blank\">java 的nio和网络编程nio 的区别</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32933/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"工作压力大，然后出错多。。然后工作压力大。该怎么调整自己的状态……\" target=\"_blank\">工作压力大，然后出错多。。然后工作压力大。该怎么调整自己的状态……</a>\n                     · <a href=\"http://group.jobbole.com/32933/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 5</a>                </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32879/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"是去北上广深闯几年还是留在二线城市？\" target=\"_blank\">是去北上广深闯几年还是留在二线城市？</a>\n                     · <a href=\"http://group.jobbole.com/32879/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 2</a>                </li>\n                </ul>\n</div>\r\n\t\n            <div id=\"article-comment\" class=\"dot-box center-align\">\n\n                        <a href=\"http://www.jobbole.com/login?redirect=http://blog.jobbole.com/113771/\"><button type=\"button\" class=\"btn btn-non-transparent\">登录后评论</button></a>\n            \n            <a target=\"_blank\" href=\"http://www.jobbole.com/register\"><button type=\"button\" class=\"btn btn-primary\">新用户注册</button></a>\n\n            <br><br>\n            <span>直接登录</span>\n            <style type=\"text/css\">.t_login_text{margin:0; padding:0;}.t_login_button{margin:0; padding: 5px 0;}.t_login_button a{margin:0; padding-right:3px; line-height:25px}.t_login_button img{display:inline; border:none;}</style><!-- 使用社交帐号登录 来自 WordPress连接微博 插件 --><span class=\"connectBox1 t_login_button\"><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=weixin&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113771%2F\" title=\"微信\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_weixin.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=qzone&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113771%2F\" title=\"QQ\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_qzone.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=sina&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113771%2F\" title=\"新浪微博\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_sina.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=douban&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113771%2F\" title=\"豆瓣\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_douban.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=github&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113771%2F\" title=\"GitHub\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_github.png\"></a></span>        </div>\n    \n\n    <div id=\"comment_list\" class=\"comments\">\n\n                    <h5 id=\"comments\" class=\"sub-title\"><i class=\"glyphicon\"></i>最新评论</h5>\n            <ul class=\"cmnt-list\">\n\n                        <li id=\"comment-162335\" class=\"comment cmnt odd\">\n    \n    <div class=\"cmnt-box\">\n        <div class=\"cmnt-header\">\n                            <a href=\"http://www.jobbole.com/members/q115370456\" class=\"cmnt-img\"><img width=\"37\" height=\"37\" src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\" alt=\"\"></a>\n                <div class=\"cmnt-meta\">\n                    <span><a href=\"http://www.jobbole.com/members/q115370456\">～</a><label class=\"comment_author_data\"> </label></span>\n                    <span class=\"c-title\">\n                                             </span>\n\n                    <span class=\"c-date\">\n                        <a href=\"http://blog.jobbole.com/113771/#comment-162335\">03/16</a>\n                    </span>\n\n                    \n                    \n                </div>\n                    </div>\n        <div class=\"cmnt-body\">\n            <p>\n                </p><p>好评</p>\n            \n                    </div>\n                    <div class=\"cmnt-footer\">\n\n                \n                <p class=\"c-like\">\n                    <a title=\"赞同\" alt=\"赞同\" class=\"162335voteflag  t-up  href-style vote-comment-up  register-user-only   \" data-comment-id=\"162335\"><i class=\"fa fa-thumbs-o-up\"></i> <span id=\"162335voteuptotal\"> 赞</span></a>\n\n                    \n                    <a rel=\"nofollow\" class=\"comment-reply-link register-user-only\" href=\"http://blog.jobbole.com/113771/?replytocom=162335#respond\" data-onclick='return addComment.moveForm( \"comment-162335\", \"162335\", \"respond\", \"113771\" )' aria-label=\"回复给～\">回复 <i class=\"fa fa-reply\"></i></a>\n                </p>\n            </div>\n            </div>\n    </li>\n<!-- #comment-## -->\n            </ul>\n        \n    </div>\n\t\t\r\n\r\n\t\r\n</div>", "tag": "IT技术-IPv6-Linux", "url": "http://blog.jobbole.com/113771/", "url_object_id": "1c7d5802b140adefb9805592b6a7e332", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/01/1b8322e1daff605d71fc81e724421f17.jpg"], "front_image_path": "full/14452eea6b79bce0219227f298ad827f2ba7112d.jpg"}
{"title": "工程师思维，做不出好产品？", "create_date": "2018/03/19", "praise_nums": "1", "fav_nums": "0", "comments_nums": "2", "content": "<div class=\"grid-8\">\r\n\r\n\t\t\r\n\t<!-- BEGIN .post -->\r\n<div class=\"post-112125 post type-post status-publish format-standard hentry category-career tag-470 odd\" id=\"post-112125\">\r\n\t\r\n\t<!-- BEGIN .entry-header -->\r\n\t<div class=\"entry-header\">\r\n\t\r\n\t\t\t\t\r\n\t\t<h1>工程师思维，做不出好产品？</h1>\r\n\t\t\r\n\t\t\t\t\t\t\t\r\n\t</div>\r\n\t<!-- BEGIN .entry-header -->\r\n\t\r\n\t<!-- BEGIN .entry-meta -->\r\n\t<div class=\"entry-meta\">\r\n\t\r\n\t\t<p class=\"entry-meta-hide-on-mobile\">\r\n\r\n            2018/03/19 ·  <a href=\"http://blog.jobbole.com/category/career/\" rel=\"category tag\">职场</a>\r\n            \r\n                            · <a href=\"#article-comment\"> 2 评论 </a>\r\n            \r\n\r\n            \r\n             ·  <a href=\"http://blog.jobbole.com/tag/%e5%b7%a5%e7%a8%8b%e5%b8%88/\">工程师</a>\r\n            \r\n</p>\r\n\r\n<!-- JiaThis Button BEGIN -->\r\n<div class=\"jiathis_style\" style=\"display: block; margin: 0 0px; clear: both;\"><span class=\"jiathis_txt\">分享到：</span>\r\n<a class=\"jiathis_button_tsina\"></a>\r\n<a class=\"jiathis_button_weixin\"></a>\r\n<a class=\"jiathis_button_qzone\"></a>\r\n<a class=\"jiathis_button_fb\"></a>\r\n<a class=\"jiathis_button_douban\"></a>\r\n<a class=\"jiathis_button_readitlater\"></a>\r\n<a class=\"jiathis_button_evernote\"></a>\r\n<a class=\"jiathis_button_ydnote\"></a>\r\n<a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\r\n<a class=\"jiathis_counter_style\"></a>\r\n</div>\r\n<!-- JiaThis Button END -->\r\n\r\n\r\n\t</div>\r\n\t<!-- END .entry-meta -->\r\n\r\n\t<!-- BEGIN .entry -->\r\n\t<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://kimix.name/%E5%B7%A5%E7%A8%8B%E5%B8%AB%E6%80%9D%E7%B6%AD%EF%BC%8C%E5%81%9A%E4%B8%8D%E5%87%BA%E5%A5%BD%E7%94%A2%E5%93%81%EF%BC%9F/\">kimix</a>   </div><p>这不是一个鸡汤文，也不是警世文，这文章没什么结论和重点，你不会从这篇文章中获得什么领悟。</p>\n<p>恭喜你，你选择继续往下看，代表你对这标题也有一定程度的好奇，或许你也有同样的疑惑？</p>\n<p>「你的想法太工程师了，不适用在「一般」用户上，怎么可能用一般用户的角度去思考产品呢？」会这样说可能是你就是从事市场或和技术半毛关系都没有的岗位上。</p>\n<p>我觉得这个指控实在很莫名其妙，农夫讲出关于种树的话，渔夫讲出关于捞鱼的话，本该是天经地义的事，然后现在我们要进森林开垦，凭什么渔夫说的就是道理，农夫说的就是歪理呢。</p>\n<p>况且重点还是，最后要操刀的是农夫啊！</p>\n<p>世间上的事，都不是完全都是两极化的对与错，一件事通常面向都会超过一个，就取决于那是站在那一面观看，我要说的正是，软件工程师如何设计好产品。</p>\n<p>马云说过一句差不多这样的话，他说：他就是 QA，他不会用的产品，大概就不是什么好产品，因为大部分人都和他一样，是一个不懂技术的人。</p>\n<p>就单凭这句话，很多人就会抛开技术思维，抛开一切，就只想自己要做的「大方向」就好，那是当然的，做为一个领导，作为一艘船的导航，确实需要一个明确的方向，大家就尽力前进。但前进的动力来自哪里呢？你可以知道人家背后有多少水手不断研究划船的方法，才可以说出这句那么铿锵有力的话。</p>\n<p>「我考第一名，我从来不念书！」</p>\n<p>马云那番话字面上理解，那个思维是成立的，但事实上，越是简单的产品，RD 就必须花更多的时间和精力去思考，如果做出「简单」而产品的「直觉和简单」仅仅只是技术演进的结果罢了，千万不要忽略过程。</p>\n<p>我只想要飞，就往断崖跳，就肯定会死的。想要飞的心情我理解，但我们能不能坐下来谈谈如何办到「飞」这回事呢？</p>\n<p>而越简单的东西，越难做出来。</p>\n<p>有一个箱子，里面很冷，食物不会坏；一个箱子，里面有画面，哎！箱子好占空间，做到跟墙一样薄行不行？我想要一个放在口袋的电脑，看到的脸就开锁，啊，要确保一定会开喔，不要让我 demo 的时候开不了。</p>\n<p>概念谁都会说，根本不需要花很多时间在这个地方上。</p>\n<p>一个好产品，重点是要解决问题，是不是废话？是。</p>\n<p>那么要解决问题，要靠技术？还是靠想法？…</p>\n<p>你开始质疑自己了吧，你没有马上选技术，或者你选了想法？</p>\n<p>因为一般人是不会有这个认知的。你不用怀疑，好产品解决问题的重点，就是技术。不是想法。这两者有什么区别？会讲不会做，就叫做想法；会讲也会做，那是技术。但产品人员最爱放在嘴巴的一句话就是「技术不难，可以做得出来」、「技术可以办到」大部分的概念都是来自于别家产品，至于如何实现，还是一种跟网恋一样的概念，还没见过本人，但是照片看起来还不错。</p>\n<p>时至今日要找出，只要好点子，就有好活路的故事太少了，技术突破不了，就是一个「和别人差不多」的东西。既然是差不多，就没有必要多一个，面对消费者，你要怎么说服人家用你家的产品呢？</p>\n<p>我写了一大堆都是在靠北，没什么重点，那我先讲一个重点。</p>\n<p>「讲 HOW 不要讲 WHAT 和 WHY」</p>\n<p>一个组织要做什么事，应该不难决定，那就是一个决定。</p>\n<p>试想想，最近我有个朋友在想开餐厅的事，我就默默的观察，他会如何思考开餐厅的流程。</p>\n<p>他从菜单一路讲到店面，从行销和定位，说到 SWOT 和五力分析。都还没说到，如何做饭这个点上。虽然只是比喻，但是你可以想像餐厅本身最关键的除了价格，就是味道，好吃！最直接的竞争力，就是要</p>\n<p>「HOW 做到很好吃」一个点就好。</p>\n<p>而 HOW 的精髓，就是技术（技巧），做菜需要技巧；写程序也需要技巧，如何用什么工具解决什么问题（这是重点，我只是没有特别强调）是很重要的一个概念。</p>\n<p>就跟为什么这个控肉饭那么好吃，它是怎么办到的？！靠，那就是靠技术啊，每天做研究啊，研究又试做啊，然后失败又再来啊，不然你以为咧。</p>\n<p>至于说，技术本身是没有意义的，除非它用来解决问题。</p>\n<p>那就是一个重点了，要讲出问题在哪里（WHAT），和为什么会发生（WHY），即便这些很有可能都是在猜的，要讲出几个点那也不是一件难的差事，只差你愿不愿意面对而已，因为就算你说错了，也没有什么证据证明你是错的，你顶多只能怀疑，这个家伙在胡说。</p>\n<p>技术本身是没有意义的，就让我想起一个名人说的话，钱本身是没有意义的，除非你利用它！说到我帐户有几万千还没开始「利用」一样。那个重点不是这句话，重点是我没有钱啊！</p>\n<p>技术本身有没有价值，我不好说，但重点是，我们要先研究出技术啊！</p>\n<p>而很多时候，我们只需要一个菜单，就那么简单。但是可怕的事还不是没有菜单，而是有菜单还有一叠厚厚的明细，随着不懂做菜的人进厨房，然后还帮你为每个做菜步骤列名时间和顺序，然后当你仔细一看，那个根本不是做菜步骤，是上菜和吃饭的步骤，里面写的跟做菜一点屁关系都没有。</p>\n<p>这群人根本不在乎怎么做菜啊。</p>\n<p>但不要误会，半点也没有怪他们「为何不关心」做菜这事上。</p>\n<p>因为很多时候，甚至极大部分时候，工程师也是不关心如何「上菜」的，也不关心味道如何，只要时间内上菜，老板没有埋怨，客户没有中毒死，更也别说口碑好不好，有的厨师本来就是抱着能吃就好的心情做菜，竟然吃不死，就是好料理啦。</p>\n<p>但这主题是说「好产品」就不是能吃就好的东西了，要对味道和整个用餐过程都很有要求。</p>\n<p>就算不是五星，也要老板亲切啊，服务态度 UX 要好，UX 不是一个人的工作，UX 是一个团队的工作，一个集体带来的效益。大部分团队就是设计出图，PM 画 flow，RD 写 code；就跟打传说有人坦克，有人输出，有人牵制，但如果要胜出，就可能互相帮打，坦克输出会补刀，输出火力也要帮忙牵制，但是如果规定了坦克就只能挨打，牵制就只能在那边躲起来发功，那就死定了。</p>\n<p>分工的结果就如参加一个比赛，的确是顺利的把比赛结束了，但也别想说有什么惊喜的表现。</p>\n<p>写程序的人就会用工具了，尤其是前端，现在光是设一个开发环境，就用了一堆东西，有些太久没有用它还更新改版了，有天有个朋友请我帮忙做个事，我就拿着笔电狂 Key，滴滴答答的，一个多小时之后，我就「yeah」喊了一声，他就问「你弄好咯，感谢啦」</p>\n<p>我说「还没，但可以开始弄了！yeah」</p>\n<p>但我以一个消费者的立场，做出产品，至于好不好，是消费者自己的看法。千万不要一直和我说你东西有多好吃，我自己有嘴巴好嘛！如果不好吃，你和我说一百遍也不会好吃啊。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112125\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112125votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112125\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>\r\n\t<!-- END .entry -->\r\n\r\n\r\n<script type=\"text/javascript\">\r\nvar jiathis_config={\r\n\tdata_track_clickback:false,\r\n\ttitle:\"分享从伯乐在线看到的一篇好文章 \",\r\n\tsummary:\"《工程师思维，做不出好产品？》\",\r\n\tpic:\"http://jbcdn2.b0.upaiyun.com/2017/07/15cdc9eaec6ba9ac858b0eaebfb6b949.jpg\",\r\n\tappkey:{\r\n         \"tsina\": 1473879058    },\r\n\tralateuid:{\r\n\t\t\"tsina\": 1670481425\t},\r\n\thideMore:false\r\n}\r\n</script>\r\n<script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js?uid=1745061\" charset=\"utf-8\"></script>\r\n<!-- JiaThis Button END -->\r\n\t\t\t<div class=\"textwidget\"><p><a href=\"http://group.jobbole.com/22945/\" target=\"_blank\"><img src=\"http://wx1.sinaimg.cn/mw690/bfdcef89gy1fq547hqqaij20h803cgm9.jpg\"></a></p>\n</div>\n\t\t\r\n</div>\r\n<!-- END .post -->\r\n            <div style=\"text-align: left;\">\r\n            <h3>相关文章</h3>\r\n            <ul style=\"font-size: 13px; list-style: disc inside;\">\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"前端工程师如何与设计师合作？\" target=\"_blank\" href=\"http://blog.jobbole.com/93863/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">前端工程师如何与设计师合作？</a>\r\n                                            </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"工程师真是好的结婚对象么？\" target=\"_blank\" href=\"http://blog.jobbole.com/86055/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">工程师真是好的结婚对象么？</a>\r\n                         · <a href=\"http://blog.jobbole.com/86055/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 1</a>                    </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"想成为一名顶级程序员，17岁开始学编程晚么？\" target=\"_blank\" href=\"http://blog.jobbole.com/85548/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">想成为一名顶级程序员，17岁开始学编程晚么？</a>\r\n                         · <a href=\"http://blog.jobbole.com/85548/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 2</a>                    </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"疯狂到相信自己能够改变世界，工程师就是这么一群人\" target=\"_blank\" href=\"http://blog.jobbole.com/84133/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">疯狂到相信自己能够改变世界，工程师就是这么一群人</a>\r\n                                            </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"一个程序员眼中的价值\" target=\"_blank\" href=\"http://blog.jobbole.com/82995/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">一个程序员眼中的价值</a>\r\n                         · <a href=\"http://blog.jobbole.com/82995/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 2</a>                    </span>\r\n                    </li>\r\n                            </ul>\r\n        </div>\r\n    \r\n    \n<div style=\"text-align: left;\">\n    <h3>可能感兴趣的话题</h3>\n    <ul style=\"font-size: 13px; list-style: disc inside;\">\n                        <li>\n                    <a href=\"http://group.jobbole.com/33039/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"Eng  ---  React ,Vue ,Angular全家桶套餐外的另一种超轻量级实现方式 (16kb)\" target=\"_blank\">Eng  ---  React ,Vue ,Angular全家桶套餐外的另一种超轻量级实...</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/33038/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"28岁刚入门，靠谱不？\" target=\"_blank\">28岁刚入门，靠谱不？</a>\n                     · <a href=\"http://group.jobbole.com/33038/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 7</a>                </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32985/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"工作四年，该如何晋级架构师？\" target=\"_blank\">工作四年，该如何晋级架构师？</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32958/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"java 的nio和网络编程nio 的区别\" target=\"_blank\">java 的nio和网络编程nio 的区别</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32933/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"工作压力大，然后出错多。。然后工作压力大。该怎么调整自己的状态……\" target=\"_blank\">工作压力大，然后出错多。。然后工作压力大。该怎么调整自己的状态……</a>\n                     · <a href=\"http://group.jobbole.com/32933/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 5</a>                </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32879/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"是去北上广深闯几年还是留在二线城市？\" target=\"_blank\">是去北上广深闯几年还是留在二线城市？</a>\n                     · <a href=\"http://group.jobbole.com/32879/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 2</a>                </li>\n                </ul>\n</div>\r\n\t\n            <div id=\"article-comment\" class=\"dot-box center-align\">\n\n                        <a href=\"http://www.jobbole.com/login?redirect=http://blog.jobbole.com/112125/\"><button type=\"button\" class=\"btn btn-non-transparent\">登录后评论</button></a>\n            \n            <a target=\"_blank\" href=\"http://www.jobbole.com/register\"><button type=\"button\" class=\"btn btn-primary\">新用户注册</button></a>\n\n            <br><br>\n            <span>直接登录</span>\n            <style type=\"text/css\">.t_login_text{margin:0; padding:0;}.t_login_button{margin:0; padding: 5px 0;}.t_login_button a{margin:0; padding-right:3px; line-height:25px}.t_login_button img{display:inline; border:none;}</style><!-- 使用社交帐号登录 来自 WordPress连接微博 插件 --><span class=\"connectBox1 t_login_button\"><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=weixin&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F112125%2F\" title=\"微信\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_weixin.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=qzone&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F112125%2F\" title=\"QQ\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_qzone.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=sina&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F112125%2F\" title=\"新浪微博\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_sina.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=douban&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F112125%2F\" title=\"豆瓣\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_douban.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=github&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F112125%2F\" title=\"GitHub\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_github.png\"></a></span>        </div>\n    \n\n    <div id=\"comment_list\" class=\"comments\">\n\n                    <h5 id=\"comments\" class=\"sub-title\"><i class=\"glyphicon\"></i>最新评论</h5>\n            <ul class=\"cmnt-list\">\n\n                        <li id=\"comment-162349\" class=\"comment cmnt odd\">\n    \n    <div class=\"cmnt-box\">\n        <div class=\"cmnt-header\">\n                            <a href=\"http://www.jobbole.com/members/q1512651460\" class=\"cmnt-img\"><img width=\"37\" height=\"37\" src=\"http://q.qlogo.cn/qqapp/208656/5EA66EC16529C4684FCE6AD92CE05AD0/100\" alt=\"\"></a>\n                <div class=\"cmnt-meta\">\n                    <span><a href=\"http://www.jobbole.com/members/q1512651460\">songgl</a><label class=\"comment_author_data\"> （ <a title=\"我的网站\" target=\"_blank\" href=\"https://javasgl.github.io/\"><i class=\"fa fa-link\"></i></a> <a title=\"GitHub主页\" target=\"_blank\" href=\"http://github.com/javasgl\"><i class=\"fa fa-github\"></i></a>  ）</label></span>\n                    <span class=\"c-title\">\n                        后端                    </span>\n\n                    <span class=\"c-date\">\n                        <a href=\"http://blog.jobbole.com/112125/#comment-162349\">03/23</a>\n                    </span>\n\n                    \n                    \n                </div>\n                    </div>\n        <div class=\"cmnt-body\">\n            <p>\n                </p><p>Chrome 浏览器 , Gmail  都是 google 工程师自己搞出来的</p>\n<p> </p>\n            \n                    </div>\n                    <div class=\"cmnt-footer\">\n\n                \n                <p class=\"c-like\">\n                    <a title=\"赞同\" alt=\"赞同\" class=\"162349voteflag  t-up  href-style vote-comment-up  register-user-only   \" data-comment-id=\"162349\"><i class=\"fa fa-thumbs-o-up\"></i> <span id=\"162349voteuptotal\"> 赞</span></a>\n\n                    \n                    <a rel=\"nofollow\" class=\"comment-reply-link register-user-only\" href=\"http://blog.jobbole.com/112125/?replytocom=162349#respond\" data-onclick='return addComment.moveForm( \"comment-162349\", \"162349\", \"respond\", \"112125\" )' aria-label=\"回复给songgl\">回复 <i class=\"fa fa-reply\"></i></a>\n                </p>\n            </div>\n            </div>\n    </li>\n<!-- #comment-## -->\n        <li id=\"comment-162363\" class=\"comment cmnt even\">\n    \n    <div class=\"cmnt-box\">\n        <div class=\"cmnt-header\">\n                            <a href=\"http://www.jobbole.com/members/wx206602871\" class=\"cmnt-img\"><img width=\"37\" height=\"37\" src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\" alt=\"\"></a>\n                <div class=\"cmnt-meta\">\n                    <span><a href=\"http://www.jobbole.com/members/wx206602871\">令狐</a><label class=\"comment_author_data\"> </label></span>\n                    <span class=\"c-title\">\n                        互联网                    </span>\n\n                    <span class=\"c-date\">\n                        <a href=\"http://blog.jobbole.com/112125/#comment-162363\">03/27</a>\n                    </span>\n\n                    \n                    \n                </div>\n                    </div>\n        <div class=\"cmnt-body\">\n            <p>\n                </p><p>嗯……就我的从业经验来看，部分工程师做功能比较“糙”，不太在意细节、讲究美感，功能倒是实现了，但是在一些细节交互方面可能差强人意，当然这也可能是因为开发时间紧所导致的，我本人也是做开发的，这是讲一讲我所遇到过的一些情况，工程师们有则改之，无则加勉，一起加油！</p>\n            \n                    </div>\n                    <div class=\"cmnt-footer\">\n\n                \n                <p class=\"c-like\">\n                    <a title=\"赞同\" alt=\"赞同\" class=\"162363voteflag  t-up  href-style vote-comment-up  register-user-only   \" data-comment-id=\"162363\"><i class=\"fa fa-thumbs-o-up\"></i> <span id=\"162363voteuptotal\"> 赞</span></a>\n\n                    \n                    <a rel=\"nofollow\" class=\"comment-reply-link register-user-only\" href=\"http://blog.jobbole.com/112125/?replytocom=162363#respond\" data-onclick='return addComment.moveForm( \"comment-162363\", \"162363\", \"respond\", \"112125\" )' aria-label=\"回复给令狐\">回复 <i class=\"fa fa-reply\"></i></a>\n                </p>\n            </div>\n            </div>\n    </li>\n<!-- #comment-## -->\n            </ul>\n        \n    </div>\n\t\t\r\n\r\n\t\r\n</div>", "tag": "职场-工程师", "url": "http://blog.jobbole.com/112125/", "url_object_id": "c04253a00ce7d51d704df4838a462dc1", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/07/15cdc9eaec6ba9ac858b0eaebfb6b949.jpg"], "front_image_path": "full/d6573fc92df4aa98014ce9dc55320411b7b5bf1d.jpg"}
{"title": "MySQL 的索引是什么？怎么优化？", "create_date": "2018/04/08", "praise_nums": "1", "fav_nums": "0", "comments_nums": "0", "content": "<div class=\"grid-8\">\r\n\r\n\t\t\r\n\t<!-- BEGIN .post -->\r\n<div class=\"post-113826 post type-post status-publish format-standard hentry category-it-tech tag-mysql tag-database odd\" id=\"post-113826\">\r\n\t\r\n\t<!-- BEGIN .entry-header -->\r\n\t<div class=\"entry-header\">\r\n\t\r\n\t\t\t\t\r\n\t\t<h1>MySQL 的索引是什么？怎么优化？</h1>\r\n\t\t\r\n\t\t\t\t\t\t\t\r\n\t</div>\r\n\t<!-- BEGIN .entry-header -->\r\n\t\r\n\t<!-- BEGIN .entry-meta -->\r\n\t<div class=\"entry-meta\">\r\n\t\r\n\t\t<p class=\"entry-meta-hide-on-mobile\">\r\n\r\n            2018/04/08 ·  <a href=\"http://blog.jobbole.com/category/it-tech/\" rel=\"category tag\">IT技术</a>\r\n            \r\n            \r\n\r\n            \r\n             ·  <a href=\"http://blog.jobbole.com/tag/mysql/\">MySQL</a>, <a href=\"http://blog.jobbole.com/tag/database/\">数据库</a>\r\n            \r\n</p>\r\n\r\n<!-- JiaThis Button BEGIN -->\r\n<div class=\"jiathis_style\" style=\"display: block; margin: 0 0px; clear: both;\"><span class=\"jiathis_txt\">分享到：</span>\r\n<a class=\"jiathis_button_tsina\"></a>\r\n<a class=\"jiathis_button_weixin\"></a>\r\n<a class=\"jiathis_button_qzone\"></a>\r\n<a class=\"jiathis_button_fb\"></a>\r\n<a class=\"jiathis_button_douban\"></a>\r\n<a class=\"jiathis_button_readitlater\"></a>\r\n<a class=\"jiathis_button_evernote\"></a>\r\n<a class=\"jiathis_button_ydnote\"></a>\r\n<a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\r\n<a class=\"jiathis_counter_style\"></a>\r\n</div>\r\n<!-- JiaThis Button END -->\r\n\r\n\r\n\t</div>\r\n\t<!-- END .entry-meta -->\r\n\r\n\t<!-- BEGIN .entry -->\r\n\t<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://my.oschina.net/liughDevelop/blog/1788148\">我叫刘半仙</a>   </div><p>索引类似大学图书馆建书目索引，可以提高数据检索的效率，降低数据库的IO成本。MySQL在300万条记录左右性能开始逐渐下降，虽然官方文档说500~800w记录，所以大数据量建立索引是非常有必要的。MySQL提供了Explain，用于显示SQL执行的详细信息，可以进行索引的优化。</p>\n<h2 id=\"h2_0\"><strong>一、导致SQL执行慢的原因：</strong></h2>\n<p>1.硬件问题。如网络速度慢，内存不足，I/O吞吐量小，磁盘空间满了等。</p>\n<p>2.没有索引或者索引失效。（一般在互联网公司，DBA会在半夜把表锁了，重新建立一遍索引，因为当你删除某个数据的时候，索引的树结构就不完整了。所以互联网公司的数据做的是假删除.一是为了做数据分析,二是为了不破坏索引 ）</p>\n<p>3.数据过多（分库分表）</p>\n<p>4.服务器调优及各个参数设置（调整my.cnf）</p>\n<h2 id=\"h2_1\"><strong>二、分析原因时，一定要找切入点：</strong></h2>\n<p>1.先观察，开启慢查询日志，设置相应的阈值（比如超过3秒就是慢SQL），在生产环境跑上个一天过后，看看哪些SQL比较慢。</p>\n<p>2.Explain和慢SQL分析。比如SQL语句写的烂，索引没有或失效，关联查询太多（有时候是设计缺陷或者不得以的需求）等等。</p>\n<p>3.Show Profile是比Explain更近一步的执行细节，可以查询到执行每一个SQL都干了什么事，这些事分别花了多少秒。</p>\n<p>4.找DBA或者运维对MySQL进行服务器的参数调优。</p>\n<h2 id=\"h2_2\"><strong>三、什么是索引？</strong></h2>\n<p>MySQL官方对索引的定义为：索引(Index)是帮助MySQL高效获取数据的数据结构。我们可以简单理解为：<strong>快速查找排好序的一种数据结构。</strong>Mysql索引主要有两种结构：B+Tree索引和Hash索引。我们平常所说的索引，如果没有特别指明，一般都是指B树结构组织的索引(B+Tree索引)。索引如图所示：</p>\n<p><img class=\"aligncenter\" src=\"https://static.oschina.net/uploads/space/2018/0401/112127_Ikol_3577599.png\" width=\"698\" height=\"338\"></p>\n<p>最外层浅蓝色磁盘块1里有数据17、35（深蓝色）和指针P1、P2、P3（黄色）。P1指针表示小于17的磁盘块，P2是在17-35之间，P3指向大于35的磁盘块。真实数据存在于子叶节点也就是最底下的一层3、5、9、10、13……非叶子节点不存储真实的数据，只存储指引搜索方向的数据项，如17、35。</p>\n<p>查找过程：例如搜索28数据项，首先加载磁盘块1到内存中，发生一次I/O，用二分查找确定在P2指针。接着发现28在26和30之间，通过P2指针的地址加载磁盘块3到内存，发生第二次I/O。用同样的方式找到磁盘块8，发生第三次I/O。</p>\n<p>真实的情况是，上面3层的B+Tree可以表示上百万的数据，上百万的数据只发生了三次I/O而不是上百万次I/O，时间提升是巨大的。</p>\n<h2 id=\"h2_3\"><strong>四、Explain分析</strong></h2>\n<p>前文铺垫完成，进入实操部分，先来插入测试需要的数据：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9bee1aefff006306027\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nCREATE TABLE `user_info` (\r\n  `id`   BIGINT(20)  NOT NULL AUTO_INCREMENT,\r\n  `name` VARCHAR(50) NOT NULL DEFAULT '',\r\n  `age`  INT(11)              DEFAULT NULL,\r\n  PRIMARY KEY (`id`),\r\n  KEY `name_index` (`name`)\r\n)ENGINE = InnoDB DEFAULT CHARSET = utf8;\r\n\r\nINSERT INTO user_info (name, age) VALUES ('xys', 20);\r\nINSERT INTO user_info (name, age) VALUES ('a', 21);\r\nINSERT INTO user_info (name, age) VALUES ('b', 23);\r\nINSERT INTO user_info (name, age) VALUES ('c', 50);\r\nINSERT INTO user_info (name, age) VALUES ('d', 15);\r\nINSERT INTO user_info (name, age) VALUES ('e', 20);\r\nINSERT INTO user_info (name, age) VALUES ('f', 21);\r\nINSERT INTO user_info (name, age) VALUES ('g', 23);\r\nINSERT INTO user_info (name, age) VALUES ('h', 50);\r\nINSERT INTO user_info (name, age) VALUES ('i', 15);\r\n\r\nCREATE TABLE `order_info` (\r\n  `id`           BIGINT(20)  NOT NULL AUTO_INCREMENT,\r\n  `user_id`      BIGINT(20)           DEFAULT NULL,\r\n  `product_name` VARCHAR(50) NOT NULL DEFAULT '',\r\n  `productor`    VARCHAR(30)          DEFAULT NULL,\r\n  PRIMARY KEY (`id`),\r\n  KEY `user_product_detail_index` (`user_id`, `product_name`, `productor`)\r\n)ENGINE = InnoDB DEFAULT CHARSET = utf8;\r\n\r\nINSERT INTO order_info (user_id, product_name, productor) VALUES (1, 'p1', 'WHH');\r\nINSERT INTO order_info (user_id, product_name, productor) VALUES (1, 'p2', 'WL');\r\nINSERT INTO order_info (user_id, product_name, productor) VALUES (1, 'p1', 'DX');\r\nINSERT INTO order_info (user_id, product_name, productor) VALUES (2, 'p1', 'WHH');\r\nINSERT INTO order_info (user_id, product_name, productor) VALUES (2, 'p5', 'WL');\r\nINSERT INTO order_info (user_id, product_name, productor) VALUES (3, 'p3', 'MA');\r\nINSERT INTO order_info (user_id, product_name, productor) VALUES (4, 'p1', 'WHH');\r\nINSERT INTO order_info (user_id, product_name, productor) VALUES (6, 'p1', 'WHH');\r\nINSERT INTO order_info (user_id, product_name, productor) VALUES (9, 'p8', 'TE');</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9bee1aefff006306027-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9bee1aefff006306027-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9bee1aefff006306027-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9bee1aefff006306027-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ac9bee1aefff006306027-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9bee1aefff006306027-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ac9bee1aefff006306027-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9bee1aefff006306027-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ac9bee1aefff006306027-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9bee1aefff006306027-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ac9bee1aefff006306027-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9bee1aefff006306027-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ac9bee1aefff006306027-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9bee1aefff006306027-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ac9bee1aefff006306027-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9bee1aefff006306027-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5ac9bee1aefff006306027-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9bee1aefff006306027-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5ac9bee1aefff006306027-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9bee1aefff006306027-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5ac9bee1aefff006306027-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9bee1aefff006306027-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5ac9bee1aefff006306027-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9bee1aefff006306027-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5ac9bee1aefff006306027-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9bee1aefff006306027-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5ac9bee1aefff006306027-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9bee1aefff006306027-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5ac9bee1aefff006306027-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9bee1aefff006306027-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5ac9bee1aefff006306027-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9bee1aefff006306027-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5ac9bee1aefff006306027-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9bee1aefff006306027-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5ac9bee1aefff006306027-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9bee1aefff006306027-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5ac9bee1aefff006306027-37\">37</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9bee1aefff006306027-1\"><span class=\"crayon-e\">CREATE </span><span class=\"crayon-i\">TABLE</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">user_info</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9bee1aefff006306027-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\">   </span><span class=\"crayon-e\">BIGINT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">20</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AUTO_INCREMENT</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5ac9bee1aefff006306027-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">VARCHAR</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">50</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9bee1aefff006306027-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">age</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\">  </span><span class=\"crayon-t\">INT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">              </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5ac9bee1aefff006306027-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">PRIMARY </span><span class=\"crayon-e\">KEY</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9bee1aefff006306027-6\"><span class=\"crayon-h\">  </span><span class=\"crayon-i\">KEY</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">name_index</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ac9bee1aefff006306027-7\"><span class=\"crayon-sy\">)</span><span class=\"crayon-v\">ENGINE</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">InnoDB </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">CHARSET</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">utf8</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9bee1aefff006306027-8\"> </div><div class=\"crayon-line\" id=\"crayon-5ac9bee1aefff006306027-9\"><span class=\"crayon-e\">INSERT </span><span class=\"crayon-e\">INTO </span><span class=\"crayon-e\">user_info</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">age</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">VALUES</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'xys'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9bee1aefff006306027-10\"><span class=\"crayon-e\">INSERT </span><span class=\"crayon-e\">INTO </span><span class=\"crayon-e\">user_info</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">age</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">VALUES</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'a'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">21</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9bee1aefff006306027-11\"><span class=\"crayon-e\">INSERT </span><span class=\"crayon-e\">INTO </span><span class=\"crayon-e\">user_info</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">age</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">VALUES</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'b'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">23</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9bee1aefff006306027-12\"><span class=\"crayon-e\">INSERT </span><span class=\"crayon-e\">INTO </span><span class=\"crayon-e\">user_info</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">age</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">VALUES</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'c'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">50</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9bee1aefff006306027-13\"><span class=\"crayon-e\">INSERT </span><span class=\"crayon-e\">INTO </span><span class=\"crayon-e\">user_info</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">age</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">VALUES</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'d'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9bee1aefff006306027-14\"><span class=\"crayon-e\">INSERT </span><span class=\"crayon-e\">INTO </span><span class=\"crayon-e\">user_info</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">age</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">VALUES</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'e'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9bee1aefff006306027-15\"><span class=\"crayon-e\">INSERT </span><span class=\"crayon-e\">INTO </span><span class=\"crayon-e\">user_info</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">age</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">VALUES</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'f'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">21</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9bee1aefff006306027-16\"><span class=\"crayon-e\">INSERT </span><span class=\"crayon-e\">INTO </span><span class=\"crayon-e\">user_info</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">age</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">VALUES</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'g'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">23</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9bee1aefff006306027-17\"><span class=\"crayon-e\">INSERT </span><span class=\"crayon-e\">INTO </span><span class=\"crayon-e\">user_info</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">age</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">VALUES</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'h'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">50</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9bee1aefff006306027-18\"><span class=\"crayon-e\">INSERT </span><span class=\"crayon-e\">INTO </span><span class=\"crayon-e\">user_info</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">age</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">VALUES</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">'i'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9bee1aefff006306027-19\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9bee1aefff006306027-20\"><span class=\"crayon-e\">CREATE </span><span class=\"crayon-i\">TABLE</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">order_info</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-5ac9bee1aefff006306027-21\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\">           </span><span class=\"crayon-e\">BIGINT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">20</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">AUTO_INCREMENT</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9bee1aefff006306027-22\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">user_id</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\">      </span><span class=\"crayon-e\">BIGINT</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">20</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">           </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5ac9bee1aefff006306027-23\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">product_name</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">VARCHAR</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">50</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">NOT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">''</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9bee1aefff006306027-24\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">productor</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\">    </span><span class=\"crayon-e\">VARCHAR</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">30</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">          </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">NULL</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5ac9bee1aefff006306027-25\"><span class=\"crayon-h\">  </span><span class=\"crayon-e\">PRIMARY </span><span class=\"crayon-e\">KEY</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9bee1aefff006306027-26\"><span class=\"crayon-h\">  </span><span class=\"crayon-i\">KEY</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">user_product_detail_index</span><span class=\"crayon-sy\">`</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">user_id</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">product_name</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">productor</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ac9bee1aefff006306027-27\"><span class=\"crayon-sy\">)</span><span class=\"crayon-v\">ENGINE</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">InnoDB </span><span class=\"crayon-st\">DEFAULT</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">CHARSET</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">utf8</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9bee1aefff006306027-28\"> </div><div class=\"crayon-line\" id=\"crayon-5ac9bee1aefff006306027-29\"><span class=\"crayon-e\">INSERT </span><span class=\"crayon-e\">INTO </span><span class=\"crayon-e\">order_info</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">user_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">product_name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">productor</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">VALUES</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'p1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'WHH'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9bee1aefff006306027-30\"><span class=\"crayon-e\">INSERT </span><span class=\"crayon-e\">INTO </span><span class=\"crayon-e\">order_info</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">user_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">product_name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">productor</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">VALUES</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'p2'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'WL'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9bee1aefff006306027-31\"><span class=\"crayon-e\">INSERT </span><span class=\"crayon-e\">INTO </span><span class=\"crayon-e\">order_info</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">user_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">product_name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">productor</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">VALUES</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'p1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'DX'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9bee1aefff006306027-32\"><span class=\"crayon-e\">INSERT </span><span class=\"crayon-e\">INTO </span><span class=\"crayon-e\">order_info</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">user_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">product_name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">productor</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">VALUES</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'p1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'WHH'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9bee1aefff006306027-33\"><span class=\"crayon-e\">INSERT </span><span class=\"crayon-e\">INTO </span><span class=\"crayon-e\">order_info</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">user_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">product_name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">productor</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">VALUES</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'p5'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'WL'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9bee1aefff006306027-34\"><span class=\"crayon-e\">INSERT </span><span class=\"crayon-e\">INTO </span><span class=\"crayon-e\">order_info</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">user_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">product_name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">productor</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">VALUES</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'p3'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'MA'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9bee1aefff006306027-35\"><span class=\"crayon-e\">INSERT </span><span class=\"crayon-e\">INTO </span><span class=\"crayon-e\">order_info</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">user_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">product_name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">productor</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">VALUES</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'p1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'WHH'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9bee1aefff006306027-36\"><span class=\"crayon-e\">INSERT </span><span class=\"crayon-e\">INTO </span><span class=\"crayon-e\">order_info</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">user_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">product_name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">productor</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">VALUES</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'p1'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'WHH'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9bee1aefff006306027-37\"><span class=\"crayon-e\">INSERT </span><span class=\"crayon-e\">INTO </span><span class=\"crayon-e\">order_info</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">user_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">product_name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">productor</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">VALUES</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'p8'</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'TE'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0120 seconds] -->\r\n<p>初体验，执行Explain的效果：</p>\n<p><img src=\"https://static.oschina.net/uploads/space/2018/0401/121439_Z3a2_3577599.png\" width=\"892\" height=\"149\"></p>\n<p>索引使用情况在possible_keys、key和key_len三列，接下来我们先从左到右依次讲解。</p>\n<h3 id=\"h3_4\">1.id</h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9bee1af00e311858086\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n--id相同,执行顺序由上而下\r\nexplain select u.*,o.* from user_info u,order_info o where u.id=o.user_id;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9bee1af00e311858086-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9bee1af00e311858086-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9bee1af00e311858086-1\"><span class=\"crayon-o\">--</span><span class=\"crayon-i\">id</span>相同<span class=\"crayon-sy\">,</span>执行顺序由上而下</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9bee1af00e311858086-2\"><span class=\"crayon-e\">explain </span><span class=\"crayon-i\">select</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">u</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">o</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from </span><span class=\"crayon-v\">user</span><span class=\"crayon-sy\">_</span>info<span class=\"crayon-h\"> </span><span class=\"crayon-v\">u</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">order</span><span class=\"crayon-sy\">_</span>info<span class=\"crayon-h\"> </span><span class=\"crayon-i\">o</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">where</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">u</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">id</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">o</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">user_id</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"https://static.oschina.net/uploads/space/2018/0401/120821_19p8_3577599.png\" width=\"905\" height=\"174\"></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9bee1af012983667893\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n--id不同,值越大越先被执行\r\nexplain select * from  user_info  where id=(select user_id from order_info where  product_name ='p8');</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9bee1af012983667893-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9bee1af012983667893-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9bee1af012983667893-1\"><span class=\"crayon-o\">--</span><span class=\"crayon-i\">id</span>不同<span class=\"crayon-sy\">,</span>值越大越先被执行</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9bee1af012983667893-2\"><span class=\"crayon-e\">explain </span><span class=\"crayon-e \">select *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from  </span><span class=\"crayon-e\">user_info  </span><span class=\"crayon-e\">where </span><span class=\"crayon-v\">id</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">select </span><span class=\"crayon-e\">user_id </span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">order_info </span><span class=\"crayon-e\">where  </span><span class=\"crayon-v\">product_name</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'p8'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"https://static.oschina.net/uploads/space/2018/0401/121702_Iwdh_3577599.png\" width=\"931\" height=\"170\"></p>\n<h3 id=\"h3_5\">2.select_type</h3>\n<p>可以看id的执行实例，总共有以下几种类型：</p>\n<ul>\n<li>SIMPLE： 表示此查询不包含 UNION 查询或子查询</li>\n<li>PRIMARY： 表示此查询是最外层的查询</li>\n<li>SUBQUERY： 子查询中的第一个 SELECT</li>\n<li>UNION： 表示此查询是 UNION 的第二或随后的查询</li>\n<li>DEPENDENT UNION： UNION 中的第二个或后面的查询语句, 取决于外面的查询</li>\n<li>UNION RESULT, UNION 的结果</li>\n<li>DEPENDENT SUBQUERY: 子查询中的第一个 SELECT, 取决于外面的查询. 即子查询依赖于外层查询的结果.</li>\n<li>DERIVED：衍生，表示导出表的SELECT（FROM子句的子查询）</li>\n</ul>\n<h3 id=\"h3_6\">3.table</h3>\n<p>table表示查询涉及的表或衍生的表：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9bee1af017596518621\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nexplain select tt.* from (select u.* from user_info u,order_info o where u.id=o.user_id and u.id=1) tt</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9bee1af017596518621-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9bee1af017596518621-1\"><span class=\"crayon-e\">explain </span><span class=\"crayon-e\">select </span><span class=\"crayon-v\">tt</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">select</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">u</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from </span><span class=\"crayon-v\">user</span><span class=\"crayon-sy\">_</span>info<span class=\"crayon-h\"> </span><span class=\"crayon-v\">u</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">order</span><span class=\"crayon-sy\">_</span>info<span class=\"crayon-h\"> </span><span class=\"crayon-i\">o</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">where</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">u</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">id</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">o</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">user_id </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">u</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">id</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tt</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p><img src=\"https://static.oschina.net/uploads/space/2018/0401/122403_q7HH_3577599.png\" width=\"898\" height=\"181\"></p>\n<p>id为1的&lt;derived2&gt;的表示id为2的u和o表衍生出来的。</p>\n<h3 id=\"h3_7\">4.type</h3>\n<p>type 字段比较重要，它提供了判断查询是否高效的重要依据依据。 通过 type 字段，我们判断此次查询是 全表扫描 还是 索引扫描等。</p>\n<p><img src=\"https://static.oschina.net/uploads/space/2018/0401/123445_DS5A_3577599.png\" width=\"1011\" height=\"173\"><br>\ntype 常用的取值有:</p>\n<ul>\n<li>system: 表中只有一条数据， 这个类型是特殊的 const 类型。</li>\n<li>const: 针对主键或唯一索引的等值查询扫描，最多只返回一行数据。 const 查询速度非常快， 因为它仅仅读取一次即可。例如下面的这个查询，它使用了主键索引，因此 type 就是 const 类型的：explain select * from user_info where id = 2；</li>\n<li>eq_ref: 此类型通常出现在多表的 join 查询，表示对于前表的每一个结果，都只能匹配到后表的一行结果。并且查询的比较操作通常是 =，查询效率较高。例如：explain select * from user_info, order_info where user_info.id = order_info.user_id;</li>\n<li>ref: 此类型通常出现在多表的 join 查询，针对于非唯一或非主键索引，或者是使用了 最左前缀 规则索引的查询。例如下面这个例子中， 就使用到了 ref 类型的查询：explain select * from user_info, order_info where user_info.id = order_info.user_id AND order_info.user_id = 5</li>\n<li>range: 表示使用索引范围查询，通过索引字段范围获取表中部分数据记录。这个类型通常出现在 =, &lt;&gt;, &gt;, &gt;=, &lt;, &lt;=, IS NULL, &lt;=&gt;, BETWEEN, IN() 操作中。例如下面的例子就是一个范围查询：explain select * from user_info  where id between 2 and 8；</li>\n<li>index: 表示全索引扫描(full index scan)，和 ALL 类型类似，只不过 ALL 类型是全表扫描，而 index 类型则仅仅扫描所有的索引， 而不扫描数据。index 类型通常出现在：所要查询的数据直接在索引树中就可以获取到, 而不需要扫描数据。当是这种情况时，Extra 字段 会显示 Using index。</li>\n<li>ALL: 表示全表扫描，这个类型的查询是性能最差的查询之一。通常来说， 我们的查询不应该出现 ALL 类型的查询，因为这样的查询在数据量大的情况下，对数据库的性能是巨大的灾难。 如一个查询是 ALL 类型查询， 那么一般来说可以对相应的字段添加索引来避免。</li>\n</ul>\n<p>通常来说, 不同的 type 类型的性能关系如下:<br>\n<strong>ALL &lt; index &lt; range ~ index_merge &lt; ref &lt; eq_ref &lt; const &lt; system</strong><br>\nALL 类型因为是全表扫描， 因此在相同的查询条件下，它是速度最慢的。而 index 类型的查询虽然不是全表扫描，但是它扫描了所有的索引，因此比 ALL 类型的稍快.后面的几种类型都是利用了索引来查询数据，因此可以过滤部分或大部分数据，因此查询效率就比较高了。</p>\n<h3 id=\"h3_8\">5.possible_keys</h3>\n<p>它表示 mysql 在查询时，可能使用到的索引。 注意，即使有些索引在 possible_keys 中出现，但是并不表示此索引会真正地被 mysql 使用到。 mysql 在查询时具体使用了哪些索引，由 key 字段决定。</p>\n<h3 id=\"h3_9\">6.key</h3>\n<p>此字段是 mysql 在当前查询时所真正使用到的索引。比如请客吃饭,possible_keys是应到多少人，key是实到多少人。当我们没有建立索引时：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9bee1af01e599954521\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nexplain select o.* from order_info o where  o.product_name= 'p1' and  o.productor='whh';\r\ncreate index idx_name_productor on order_info(productor);\r\ndrop index idx_name_productor on order_info;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9bee1af01e599954521-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9bee1af01e599954521-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9bee1af01e599954521-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9bee1af01e599954521-1\"><span class=\"crayon-e\">explain </span><span class=\"crayon-i\">select</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">o</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from </span><span class=\"crayon-v\">order</span><span class=\"crayon-sy\">_</span>info<span class=\"crayon-h\"> </span><span class=\"crayon-i\">o</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">where</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">o</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">product_name</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'p1'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">o</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">productor</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'whh'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9bee1af01e599954521-2\"><span class=\"crayon-e\">create </span><span class=\"crayon-e\">index </span><span class=\"crayon-e\">idx_name_productor </span><span class=\"crayon-e\">on </span><span class=\"crayon-e\">order_info</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">productor</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9bee1af01e599954521-3\"><span class=\"crayon-e\">drop </span><span class=\"crayon-e\">index </span><span class=\"crayon-e\">idx_name_productor </span><span class=\"crayon-e\">on </span><span class=\"crayon-v\">order_info</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p><img src=\"https://static.oschina.net/uploads/space/2018/0401/125327_FPOE_3577599.png\" width=\"1035\" height=\"174\"></p>\n<p>建立复合索引后再查询：</p>\n<p><img src=\"https://static.oschina.net/uploads/space/2018/0401/125433_FYqv_3577599.png\" width=\"1070\" height=\"176\"></p>\n<h3 id=\"h3_10\">7.key_len</h3>\n<p>表示查询优化器使用了索引的字节数，这个字段可以评估组合索引是否完全被使用。</p>\n<h3 id=\"h3_11\">8.ref</h3>\n<p>这个表示显示索引的哪一列被使用了，如果可能的话,是一个常量。前文的type属性里也有ref，注意区别。</p>\n<p><img src=\"https://static.oschina.net/uploads/space/2018/0401/130207_O2xw_3577599.png\" width=\"1054\" height=\"157\"></p>\n<h3 id=\"h3_12\">9.rows</h3>\n<p>rows 也是一个重要的字段，mysql 查询优化器根据统计信息，估算 sql 要查找到结果集需要扫描读取的数据行数，这个值非常直观的显示 sql 效率好坏， 原则上 rows 越少越好。可以对比key中的例子，一个没建立索引钱，rows是9，建立索引后，rows是4。</p>\n<h3 id=\"h3_13\">10.extra</h3>\n<p><img src=\"https://static.oschina.net/uploads/space/2018/0401/131233_Wm8a_3577599.png\" width=\"942\" height=\"151\"></p>\n<p>explain 中的很多额外的信息会在 extra 字段显示, 常见的有以下几种内容:</p>\n<ul>\n<li>using filesort ：表示 mysql 需额外的排序操作，不能通过索引顺序达到排序效果。一般有 using filesort都建议优化去掉，因为这样的查询 cpu 资源消耗大。</li>\n<li>using index：覆盖索引扫描，表示查询在索引树中就可查找所需数据，不用扫描表数据文件，往往说明性能不错。</li>\n<li>using temporary：查询有使用临时表, 一般出现于排序， 分组和多表 join 的情况， 查询效率不高，建议优化。</li>\n<li>using where ：表名使用了where过滤。</li>\n</ul>\n<h2 id=\"h2_14\">五、优化案例</h2>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9bee1af026387655761\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nexplain select u.*,o.* from user_info u LEFT JOIN  order_info o on u.id=o.user_id;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9bee1af026387655761-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9bee1af026387655761-1\"><span class=\"crayon-e\">explain </span><span class=\"crayon-i\">select</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">u</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">o</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from </span><span class=\"crayon-v\">user</span><span class=\"crayon-sy\">_</span>info<span class=\"crayon-h\"> </span><span class=\"crayon-i\">u</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">LEFT </span><span class=\"crayon-e\">JOIN  </span><span class=\"crayon-v\">order</span><span class=\"crayon-sy\">_</span>info<span class=\"crayon-h\"> </span><span class=\"crayon-i\">o</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">on</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">u</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">id</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">o</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">user_id</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>执行结果，type有ALL，并且没有索引：</p>\n<h2 id=\"h2_15\"><img src=\"https://static.oschina.net/uploads/space/2018/0401/200555_ZcS7_3577599.png\" width=\"933\" height=\"173\"></h2>\n<p>开始优化，在关联列上创建索引，明显看到type列的ALL变成ref，并且用到了索引，rows也从扫描9行变成了1行：</p>\n<p><img src=\"https://static.oschina.net/uploads/space/2018/0401/200819_KxR2_3577599.png\" width=\"833\" height=\"184\"></p>\n<p>这里面一般有个规律是：左链接索引加在右表上面，右链接索引加在左表上面。</p>\n<h2 id=\"h2_16\">六、是否需要创建索引？</h2>\n<p>索引虽然能非常高效的提高查询速度，同时却会降低更新表的速度。实际上索引也是一张表，该表保存了主键与索引字段，并指向实体表的记录，所以索引列也是要占用空间的。</p>\n<p><img src=\"https://static.oschina.net/uploads/space/2018/0401/131616_BaL3_3577599.png\" width=\"860\" height=\"333\"></p>\n<p>我是个普通的程序猿，水平有限，文章难免有错误，欢迎牺牲自己宝贵时间的读者，就本文内容直抒己见，我的目的仅仅是希望对读者有所帮助。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113826\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113826votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113826\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>\r\n\t<!-- END .entry -->\r\n\r\n\r\n<script type=\"text/javascript\">\r\nvar jiathis_config={\r\n\tdata_track_clickback:false,\r\n\ttitle:\"分享从伯乐在线看到的一篇好文章 \",\r\n\tsummary:\"《MySQL 的索引是什么？怎么优化？》\",\r\n\tpic:\"http://jbcdn2.b0.upaiyun.com/2015/11/dea4002e77dd3ecd398568bf746ea46c.png\",\r\n\tappkey:{\r\n         \"tsina\": 1473879058    },\r\n\tralateuid:{\r\n\t\t\"tsina\": 1670481425\t},\r\n\thideMore:false\r\n}\r\n</script>\r\n<script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js?uid=1745061\" charset=\"utf-8\"></script>\r\n<!-- JiaThis Button END -->\r\n\t\t\t<div class=\"textwidget\"><p><a href=\"http://group.jobbole.com/22945/\" target=\"_blank\"><img src=\"http://wx1.sinaimg.cn/mw690/bfdcef89gy1fq547hqqaij20h803cgm9.jpg\"></a></p>\n</div>\n\t\t\r\n</div>\r\n<!-- END .post -->\r\n            <div style=\"text-align: left;\">\r\n            <h3>相关文章</h3>\r\n            <ul style=\"font-size: 13px; list-style: disc inside;\">\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"深入学习 Redis（1）：Redis 内存模型\" target=\"_blank\" href=\"http://blog.jobbole.com/113789/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">深入学习 Redis（1）：Redis 内存模型</a>\r\n                         · <a href=\"http://blog.jobbole.com/113789/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 3</a>                    </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"Redis 集群部署及踩过的坑\" target=\"_blank\" href=\"http://blog.jobbole.com/113760/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">Redis 集群部署及踩过的坑</a>\r\n                                            </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"索引表和 ES 的一点点思考\" target=\"_blank\" href=\"http://blog.jobbole.com/113726/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">索引表和 ES 的一点点思考</a>\r\n                                            </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"优化 MySQL： 3 个简单的小调整\" target=\"_blank\" href=\"http://blog.jobbole.com/113659/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">优化 MySQL： 3 个简单的小调整</a>\r\n                         · <a href=\"http://blog.jobbole.com/113659/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 13</a>                    </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"为初学者准备的 MariaDB 管理命令\" target=\"_blank\" href=\"http://blog.jobbole.com/113617/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">为初学者准备的 MariaDB 管理命令</a>\r\n                                            </span>\r\n                    </li>\r\n                            </ul>\r\n        </div>\r\n    \r\n    \n<div style=\"text-align: left;\">\n    <h3>可能感兴趣的话题</h3>\n    <ul style=\"font-size: 13px; list-style: disc inside;\">\n                        <li>\n                    <a href=\"http://group.jobbole.com/33039/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"Eng  ---  React ,Vue ,Angular全家桶套餐外的另一种超轻量级实现方式 (16kb)\" target=\"_blank\">Eng  ---  React ,Vue ,Angular全家桶套餐外的另一种超轻量级实...</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/33038/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"28岁刚入门，靠谱不？\" target=\"_blank\">28岁刚入门，靠谱不？</a>\n                     · <a href=\"http://group.jobbole.com/33038/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 7</a>                </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32985/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"工作四年，该如何晋级架构师？\" target=\"_blank\">工作四年，该如何晋级架构师？</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32958/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"java 的nio和网络编程nio 的区别\" target=\"_blank\">java 的nio和网络编程nio 的区别</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32933/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"工作压力大，然后出错多。。然后工作压力大。该怎么调整自己的状态……\" target=\"_blank\">工作压力大，然后出错多。。然后工作压力大。该怎么调整自己的状态……</a>\n                     · <a href=\"http://group.jobbole.com/32933/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 5</a>                </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32879/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"是去北上广深闯几年还是留在二线城市？\" target=\"_blank\">是去北上广深闯几年还是留在二线城市？</a>\n                     · <a href=\"http://group.jobbole.com/32879/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 2</a>                </li>\n                </ul>\n</div>\r\n\t\n            <div id=\"article-comment\" class=\"dot-box center-align\">\n\n                        <a href=\"http://www.jobbole.com/login?redirect=http://blog.jobbole.com/113826/\"><button type=\"button\" class=\"btn btn-non-transparent\">登录后评论</button></a>\n            \n            <a target=\"_blank\" href=\"http://www.jobbole.com/register\"><button type=\"button\" class=\"btn btn-primary\">新用户注册</button></a>\n\n            <br><br>\n            <span>直接登录</span>\n            <style type=\"text/css\">.t_login_text{margin:0; padding:0;}.t_login_button{margin:0; padding: 5px 0;}.t_login_button a{margin:0; padding-right:3px; line-height:25px}.t_login_button img{display:inline; border:none;}</style><!-- 使用社交帐号登录 来自 WordPress连接微博 插件 --><span class=\"connectBox1 t_login_button\"><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=weixin&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113826%2F\" title=\"微信\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_weixin.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=qzone&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113826%2F\" title=\"QQ\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_qzone.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=sina&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113826%2F\" title=\"新浪微博\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_sina.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=douban&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113826%2F\" title=\"豆瓣\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_douban.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=github&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113826%2F\" title=\"GitHub\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_github.png\"></a></span>        </div>\n    \n\n    <div id=\"comment_list\" class=\"comments\">\n\n        \n    </div>\n\t\t\r\n\r\n\t\r\n</div>", "tag": "IT技术-MySQL-数据库", "url": "http://blog.jobbole.com/113826/", "url_object_id": "aef8d5ade1557e27b9d7e26f7d940349", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2015/11/dea4002e77dd3ecd398568bf746ea46c.png"], "front_image_path": "full/75f6595b87bc254afe77bc1151f1aea91fb72f4b.jpg"}
{"title": "Linux 新用户？来试试这 8 款重要的软件", "create_date": "2018/03/21", "praise_nums": "1", "fav_nums": "0", "comments_nums": "0", "content": "<div class=\"grid-8\">\r\n\r\n\t\t\r\n\t<!-- BEGIN .post -->\r\n<div class=\"post-113775 post type-post status-publish format-standard hentry category-it-tech tag-linux odd\" id=\"post-113775\">\r\n\t\r\n\t<!-- BEGIN .entry-header -->\r\n\t<div class=\"entry-header\">\r\n\t\r\n\t\t\t\t\r\n\t\t<h1>Linux 新用户？来试试这 8 款重要的软件</h1>\r\n\t\t\r\n\t\t\t\t\t\t\t\r\n\t</div>\r\n\t<!-- BEGIN .entry-header -->\r\n\t\r\n\t<!-- BEGIN .entry-meta -->\r\n\t<div class=\"entry-meta\">\r\n\t\r\n\t\t<p class=\"entry-meta-hide-on-mobile\">\r\n\r\n            2018/03/21 ·  <a href=\"http://blog.jobbole.com/category/it-tech/\" rel=\"category tag\">IT技术</a>\r\n            \r\n            \r\n\r\n            \r\n             ·  <a href=\"http://blog.jobbole.com/tag/linux/\">Linux</a>\r\n            \r\n</p>\r\n\r\n<!-- JiaThis Button BEGIN -->\r\n<div class=\"jiathis_style\" style=\"display: block; margin: 0 0px; clear: both;\"><span class=\"jiathis_txt\">分享到：</span>\r\n<a class=\"jiathis_button_tsina\"></a>\r\n<a class=\"jiathis_button_weixin\"></a>\r\n<a class=\"jiathis_button_qzone\"></a>\r\n<a class=\"jiathis_button_fb\"></a>\r\n<a class=\"jiathis_button_douban\"></a>\r\n<a class=\"jiathis_button_readitlater\"></a>\r\n<a class=\"jiathis_button_evernote\"></a>\r\n<a class=\"jiathis_button_ydnote\"></a>\r\n<a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\r\n<a class=\"jiathis_counter_style\"></a>\r\n</div>\r\n<!-- JiaThis Button END -->\r\n\r\n\r\n\t</div>\r\n\t<!-- END .entry-meta -->\r\n\r\n\t<!-- BEGIN .entry -->\r\n\t<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.maketecheasier.com/essential-linux-apps/\">Ada Ivanova</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9458-1.html\">Linux中国/ChenYi</a>   </div><p>即便您不是计算机的新手，刚接触 Linux 时，通常都会面临选择使用应用软件的问题。在数百万 Linux 应用程序中，做起选择来并不轻松。本文中，您将能发现八个重要的 Linux 应用，帮助您快速选择应用程序。</p>\n<p>下面这些应用程序大多不是 Linux 独有的。如果有过使用 Windows/Mac 的经验，您很可能会熟悉其中一些软件。根据兴趣和需求，下面的程序可能不全符合您的要求，但是在我看来，清单里大多数甚至全部的软件，对于新用户开启 Linux 之旅都是有帮助的。</p>\n<p><strong>相关链接</strong> : <a title=\"11 Portable Apps Every Linux User Should Use\" href=\"https://www.maketecheasier.com/portable-apps-for-linux/\">每一个 Linux 用户都应该使用的 11 个可移植软件</a></p>\n<h3 id=\"toc_1\">1. Chromium 网页浏览器</h3>\n<p><img title=\"linux-apps-01-chromium\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/1a4a3161971e417d60d75361bfdf7083.jpg\" alt=\"linux-apps-01-chromium\"></p>\n<p>几乎不会不需要使用网页浏览器的用户。您可以看到陈旧的 Linux 发行版几乎都会附带 Firefox（火狐浏览器）或者其他 <a href=\"https://www.maketecheasier.com/linux-browsers-you-probably-havent-heard-of/\">Linux 浏览器</a>，关于浏览器，强烈建议您尝试 <a href=\"http://www.chromium.org/\">Chromium</a>。它是谷歌浏览器的开源版。Chromium 的主要优点是速度和安全性。它同样拥有大量的附加组件。</p>\n<h3 id=\"toc_2\">2. LibreOffice</h3>\n<p><img title=\"linux-apps-02-libreoffice\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/4b02246613b823b1d7568cd8c7af6c79.jpg\" alt=\"linux-apps-02-libreoffice\"></p>\n<p><a href=\"https://www.libreoffice.org/\">LibreOffice</a> 是一个开源办公套件，其包括文字处理（Writer）、电子表格（Calc）、演示（Impress）、数据库（Base）、公式编辑器（Math）、矢量图和流程图（Draw）应用程序。它与 Microsoft Office 文档兼容，如果其基本功能不能满足需求，您可以使用 <a href=\"https://www.maketecheasier.com/best-libreoffice-extensions/\">LibreOffice 拓展</a>。</p>\n<p>LibreOffice 显然是 Linux 应用中至关重要的一员，如果您使用 Linux 的计算机，安装它是有必要的。</p>\n<h3 id=\"toc_3\">3. GIMP（GUN 图像处理程序GNU Image Manipulation Program）</h3>\n<p><img title=\"linux-apps-03-gimp\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/7c72e5b5a6595e7250a09f90ccd12e95.jpg\" alt=\"linux-apps-03-gimp\"></p>\n<p><a href=\"https://www.gimp.org/\">GIMP</a> 是一款非常强大的开源图片处理程序，它类似于 Photoshop。通过 GIMP，您可以编辑或是创建用于 Web 或是打印的光栅图（位图）。如果您对专业的图片处理没有概念，Linux 自然提供有更简单的图像编辑器，GIMP 看上去可能会复杂一点。GIMP 并不单纯提供图片裁剪和大小调整，它更覆盖了图层、滤镜、遮罩、路径和其他一些高级功能。</p>\n<h3 id=\"toc_4\">4. VLC 媒体播放器</h3>\n<p><img title=\"linux-apps-04-vlc\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/ec5bc4abf3e1daf3ee5371e3bfbc8a4a.jpg\" alt=\"linux-apps-04-vlc\"></p>\n<p><a href=\"http://www.videolan.org/\">VLC</a> 也许就是最好的影音播放器了。它是跨平台的，所以您可能在 Windows 上也听说过它。VLC 最特殊的地方是其拥有大量解码器（并不是所有的解码器都开放源代码），所以它几乎可以播放所有的影音文件。</p>\n<h3 id=\"toc_5\">5. Jitsy</h3>\n<p><img title=\"linux-apps-05-jitsi\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/106a94517baf8cca5c0302d20afdcb58.jpg\" alt=\"linux-apps-05-jitsi\"></p>\n<p><a href=\"https://jitsi.org/\">Jitsy</a> 完全是关于通讯的。您可以借助它使用 Google talk、Facebook chat、Yahoo、ICQ 和 XMPP。它是用于音视频通话（包括电话会议），桌面流desktop streaming和群组聊天的多用户工具。会话会被加密。Jistsy 同样能帮助您传输文件或记录电话。</p>\n<h3 id=\"toc_6\">6. Synaptic</h3>\n<p><img title=\"linux-apps-06-synaptic\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/a939e9ecbb8c51fa5908c7a234317cef.jpg\" alt=\"linux-apps-06-synaptic\"></p>\n<p><a href=\"http://www.nongnu.org/synaptic/\">Synaptic</a> 是一款基于 Debian 系统发行版的另一款应用程序安装程序。并不是所有基于 Debian 的 Linux 都安装有它，如果您使用基于 Debian 的 Linux 操作系统没有预装，也许您可以试一试。Synaptic 是一款用于添加或移除系统应用的 GUI 工具，甚至相对于许多发行版默认安装的 <a href=\"https://www.maketecheasier.com/are-linux-gui-software-centers-any-good/\">软件中心包管理器</a> ，经验丰富的 Linux 用户更亲睐于 Sunaptic。</p>\n<p><strong>相关链接</strong> : <a title=\"10 Free Linux Productivity Apps You Haven’t Heard Of\" href=\"https://www.maketecheasier.com/free-linux-productivity-apps-you-havent-heard-of/\">10 款您没听说过的 Linux 生产力应用程序</a></p>\n<h3 id=\"toc_7\">7. VirtualBox</h3>\n<p><img title=\"linux-apps-07-virtualbox\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/653bd651a823462de3513ae285eb14d4.jpg\" alt=\"linux-apps-07-virtualbox\"></p>\n<p><a href=\"https://www.virtualbox.org/\">VirtualBox</a> 能支持您在计算机上运行虚拟机。当您想在当前 Linux 发行版上安装其他发行版或操作系统时，使用虚拟机会方便许多。您同样可以通过它运行 Windows 应用程序，性能可能会稍弱，但是如果您有一台强大的计算机，就不会那么糟。</p>\n<h3 id=\"toc_8\">8. AisleRiot Solitaire（纸牌游戏）</h3>\n<p><img title=\"linux-apps-08-aisleriot\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/433400c4755063f31346d9ddcdf76188.jpg\" alt=\"linux-apps-08-aisleriot\"></p>\n<p>对于 Linux 的新用户来说，一款纸牌游戏并不是刚需，但是它真的太有趣了。当您进入这款纸牌游戏，您会发现，这是一款极好的纸牌游戏包。<a href=\"https://wiki.gnome.org/Aisleriot\">AisleRiot</a> 是 Linux 标志性的应用程序，原因是 – 它涵盖超过八十种纸牌游戏，包括流行的 Klondike、Bakers Dozen、Camelot 等等，作为预警 – 它是会上瘾的，您可能会花很长时间沉迷于此！</p>\n<p>根据您所使用的发行版，这些软件会有不同的安装方法。但是大多数都可以通过您使用的发行版中的包管理器安装使用，甚至它们可能会预装在您的发行版上。安装并且尝试它们想必是最好的，如果不合您的胃口，您可以轻松地删除它们。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113775\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113775votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113775\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>\r\n\t<!-- END .entry -->\r\n\r\n\r\n<script type=\"text/javascript\">\r\nvar jiathis_config={\r\n\tdata_track_clickback:false,\r\n\ttitle:\"分享从伯乐在线看到的一篇好文章 \",\r\n\tsummary:\"《Linux 新用户？来试试这 8 款重要的软件》\",\r\n\tpic:\"http://jbcdn2.b0.upaiyun.com/2018/01/1b8322e1daff605d71fc81e724421f17.jpg\",\r\n\tappkey:{\r\n         \"tsina\": 1473879058    },\r\n\tralateuid:{\r\n\t\t\"tsina\": 1670481425\t},\r\n\thideMore:false\r\n}\r\n</script>\r\n<script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js?uid=1745061\" charset=\"utf-8\"></script>\r\n<!-- JiaThis Button END -->\r\n\t\t\t<div class=\"textwidget\"><p><a href=\"http://group.jobbole.com/22945/\" target=\"_blank\"><img src=\"http://wx1.sinaimg.cn/mw690/bfdcef89gy1fq547hqqaij20h803cgm9.jpg\"></a></p>\n</div>\n\t\t\r\n</div>\r\n<!-- END .post -->\r\n            <div style=\"text-align: left;\">\r\n            <h3>相关文章</h3>\r\n            <ul style=\"font-size: 13px; list-style: disc inside;\">\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"给初学者的 type 命令教程\" target=\"_blank\" href=\"http://blog.jobbole.com/113817/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">给初学者的 type 命令教程</a>\r\n                         · <a href=\"http://blog.jobbole.com/113817/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 1</a>                    </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"为初学者准备的 ln 命令教程（5 个示例）\" target=\"_blank\" href=\"http://blog.jobbole.com/113800/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">为初学者准备的 ln 命令教程（5 个示例）</a>\r\n                                            </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"如何在 Linux 上安装应用程序\" target=\"_blank\" href=\"http://blog.jobbole.com/113793/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">如何在 Linux 上安装应用程序</a>\r\n                         · <a href=\"http://blog.jobbole.com/113793/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 1</a>                    </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"Linux 中的“大内存页”（hugepage）是个什么？\" target=\"_blank\" href=\"http://blog.jobbole.com/113782/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">Linux 中的“大内存页”（hugepage）是个什么？</a>\r\n                                            </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"du 及 df 命令的使用（附带示例）\" target=\"_blank\" href=\"http://blog.jobbole.com/113780/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">du 及 df 命令的使用（附带示例）</a>\r\n                                            </span>\r\n                    </li>\r\n                            </ul>\r\n        </div>\r\n    \r\n    \n<div style=\"text-align: left;\">\n    <h3>可能感兴趣的话题</h3>\n    <ul style=\"font-size: 13px; list-style: disc inside;\">\n                        <li>\n                    <a href=\"http://group.jobbole.com/33039/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"Eng  ---  React ,Vue ,Angular全家桶套餐外的另一种超轻量级实现方式 (16kb)\" target=\"_blank\">Eng  ---  React ,Vue ,Angular全家桶套餐外的另一种超轻量级实...</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/33038/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"28岁刚入门，靠谱不？\" target=\"_blank\">28岁刚入门，靠谱不？</a>\n                     · <a href=\"http://group.jobbole.com/33038/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 7</a>                </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32985/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"工作四年，该如何晋级架构师？\" target=\"_blank\">工作四年，该如何晋级架构师？</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32958/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"java 的nio和网络编程nio 的区别\" target=\"_blank\">java 的nio和网络编程nio 的区别</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32933/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"工作压力大，然后出错多。。然后工作压力大。该怎么调整自己的状态……\" target=\"_blank\">工作压力大，然后出错多。。然后工作压力大。该怎么调整自己的状态……</a>\n                     · <a href=\"http://group.jobbole.com/32933/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 5</a>                </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32879/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"是去北上广深闯几年还是留在二线城市？\" target=\"_blank\">是去北上广深闯几年还是留在二线城市？</a>\n                     · <a href=\"http://group.jobbole.com/32879/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 2</a>                </li>\n                </ul>\n</div>\r\n\t\n            <div id=\"article-comment\" class=\"dot-box center-align\">\n\n                        <a href=\"http://www.jobbole.com/login?redirect=http://blog.jobbole.com/113775/\"><button type=\"button\" class=\"btn btn-non-transparent\">登录后评论</button></a>\n            \n            <a target=\"_blank\" href=\"http://www.jobbole.com/register\"><button type=\"button\" class=\"btn btn-primary\">新用户注册</button></a>\n\n            <br><br>\n            <span>直接登录</span>\n            <style type=\"text/css\">.t_login_text{margin:0; padding:0;}.t_login_button{margin:0; padding: 5px 0;}.t_login_button a{margin:0; padding-right:3px; line-height:25px}.t_login_button img{display:inline; border:none;}</style><!-- 使用社交帐号登录 来自 WordPress连接微博 插件 --><span class=\"connectBox1 t_login_button\"><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=weixin&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113775%2F\" title=\"微信\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_weixin.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=qzone&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113775%2F\" title=\"QQ\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_qzone.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=sina&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113775%2F\" title=\"新浪微博\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_sina.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=douban&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113775%2F\" title=\"豆瓣\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_douban.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=github&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113775%2F\" title=\"GitHub\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_github.png\"></a></span>        </div>\n    \n\n    <div id=\"comment_list\" class=\"comments\">\n\n        \n    </div>\n\t\t\r\n\r\n\t\r\n</div>", "tag": "IT技术-Linux", "url": "http://blog.jobbole.com/113775/", "url_object_id": "1401d80b943d81d3493c295bfe34a3ab", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/01/1b8322e1daff605d71fc81e724421f17.jpg"], "front_image_path": "full/14452eea6b79bce0219227f298ad827f2ba7112d.jpg"}
{"title": "du 及 df 命令的使用（附带示例）", "create_date": "2018/03/23", "praise_nums": "1", "fav_nums": "2", "comments_nums": "0", "content": "<div class=\"grid-8\">\r\n\r\n\t\t\r\n\t<!-- BEGIN .post -->\r\n<div class=\"post-113780 post type-post status-publish format-standard hentry category-it-tech tag-linux odd\" id=\"post-113780\">\r\n\t\r\n\t<!-- BEGIN .entry-header -->\r\n\t<div class=\"entry-header\">\r\n\t\r\n\t\t\t\t\r\n\t\t<h1>du 及 df 命令的使用（附带示例）</h1>\r\n\t\t\r\n\t\t\t\t\t\t\t\r\n\t</div>\r\n\t<!-- BEGIN .entry-header -->\r\n\t\r\n\t<!-- BEGIN .entry-meta -->\r\n\t<div class=\"entry-meta\">\r\n\t\r\n\t\t<p class=\"entry-meta-hide-on-mobile\">\r\n\r\n            2018/03/23 ·  <a href=\"http://blog.jobbole.com/category/it-tech/\" rel=\"category tag\">IT技术</a>\r\n            \r\n            \r\n\r\n            \r\n             ·  <a href=\"http://blog.jobbole.com/tag/linux/\">Linux</a>\r\n            \r\n</p>\r\n\r\n<!-- JiaThis Button BEGIN -->\r\n<div class=\"jiathis_style\" style=\"display: block; margin: 0 0px; clear: both;\"><span class=\"jiathis_txt\">分享到：</span>\r\n<a class=\"jiathis_button_tsina\"></a>\r\n<a class=\"jiathis_button_weixin\"></a>\r\n<a class=\"jiathis_button_qzone\"></a>\r\n<a class=\"jiathis_button_fb\"></a>\r\n<a class=\"jiathis_button_douban\"></a>\r\n<a class=\"jiathis_button_readitlater\"></a>\r\n<a class=\"jiathis_button_evernote\"></a>\r\n<a class=\"jiathis_button_ydnote\"></a>\r\n<a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\r\n<a class=\"jiathis_counter_style\"></a>\r\n</div>\r\n<!-- JiaThis Button END -->\r\n\r\n\r\n\t</div>\r\n\t<!-- END .entry-meta -->\r\n\r\n\t<!-- BEGIN .entry -->\r\n\t<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"http://linuxtechlab.com/du-df-commands-examples/\">shusain</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9457-1.html\">Linux中国/geekpi</a>   </div><p>在本文中，我将讨论 <code>du</code> 和 <code>df</code> 命令。<code>du</code> 和 <code>df</code> 命令都是 Linux 系统的重要工具，来显示 Linux 文件系统的磁盘使用情况。这里我们将通过一些例子来分享这两个命令的用法。</p>\n<ul>\n<li><strong>（推荐阅读：<a href=\"http://linuxtechlab.com/files-transfer-scp-rsync-commands/\">使用 scp 和 rsync 命令传输文件</a>）</strong></li>\n<li><strong>（另请阅读：<a href=\"http://linuxtechlab.com/linux-cloning-disks-using-dd-cat-commands/\">使用 dd 和 cat 命令为 Linux 系统克隆磁盘</a>）</strong></li>\n</ul>\n<h3 id=\"toc_1\">du 命令</h3>\n<p><code>du</code>（disk usage 的简称）是用于查找文件和目录的磁盘使用情况的命令。<code>du</code> 命令在与各种选项一起使用时能以多种格式提供结果。</p>\n<p>下面是一些例子：</p>\n<h4 id=\"toc_2\">1、 得到一个目录下所有子目录的磁盘使用概况</h4>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a373711fd549432373\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ du /home\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a373711fd549432373-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a373711fd549432373-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a373711fd549432373-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">du</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">home</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a373711fd549432373-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/a7080196ba5d69aefcecf7bbf44c9556.jpg\" alt=\"du command\"></p>\n<p>该命令的输出将显示 <code>/home</code> 中的所有文件和目录以及显示块大小。</p>\n<h4 id=\"toc_3\">2、 以人类可读格式也就是 kb、mb 等显示文件/目录大小</h4>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a37371207108302996\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ du -h /home\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a37371207108302996-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37371207108302996-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a37371207108302996-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">du</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">h</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">home</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37371207108302996-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/1b9dd42d7efa627e663eeb719c31051b.jpg\" alt=\"du command\"></p>\n<h4 id=\"toc_4\">3、 目录的总磁盘大小</h4>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a3737120b549633525\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ du -s /home\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a3737120b549633525-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a3737120b549633525-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a3737120b549633525-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">du</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">home</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a3737120b549633525-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0124 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/3d49dd172fc018cabd4747f4db263811.jpg\" alt=\"du command\"></p>\n<p>它是 <code>/home</code> 目录的总大小</p>\n<h3 id=\"toc_5\">df 命令</h3>\n<p>df（disk filesystem 的简称）用于显示 Linux 系统的磁盘利用率。（LCTT 译注：<code>df</code> 可能应该是 disk free 的简称。）</p>\n<p>下面是一些例子。</p>\n<h4 id=\"toc_6\">1、 显示设备名称、总块数、总磁盘空间、已用磁盘空间、可用磁盘空间和文件系统上的挂载点。</h4>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a3737120f561855445\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ df\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a3737120f561855445-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a3737120f561855445-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a3737120f561855445-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">df</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a3737120f561855445-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/ab5724c46d3e98a63c869827c65cd227.jpg\" alt=\"df command\"></p>\n<h4 id=\"toc_7\">2、 人类可读格式的信息</h4>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a37371212286416315\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ df -h\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a37371212286416315-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37371212286416315-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a37371212286416315-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">df</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">h</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37371212286416315-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/5e54bd24a629aad15d72114b57687e18.jpg\" alt=\"df command\"></p>\n<p>上面的命令以人类可读格式显示信息。</p>\n<h4 id=\"toc_8\">3、 显示特定分区的信息</h4>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a37371216748953462\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ df -hT /etc\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a37371216748953462-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37371216748953462-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a37371216748953462-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">df</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">hT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">etc</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37371216748953462-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/5b29e87fdba47b650c6958d569d553c2.jpg\" alt=\"df command\"></p>\n<p><code>-hT</code> 加上目标目录将以可读格式显示 <code>/etc</code> 的信息。</p>\n<p>虽然 <code>du</code> 和 <code>df</code> 命令有更多选项，但是这些例子可以让你初步了解。如果在这里找不到你要找的东西，那么你可以参考有关命令的 man 页面。</p>\n<p>另外，<a href=\"http://linuxtechlab.com/tips-tricks/\"><strong>在这</strong></a>阅读我的其他帖子，在那里我分享了一些其他重要和经常使用的 Linux 命令。</p>\n<p>如往常一样，欢迎你留下评论和疑问，因此在下面留下你的评论和疑问，我会回复你。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113780\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113780votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113780\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>\r\n\t<!-- END .entry -->\r\n\r\n\r\n<script type=\"text/javascript\">\r\nvar jiathis_config={\r\n\tdata_track_clickback:false,\r\n\ttitle:\"分享从伯乐在线看到的一篇好文章 \",\r\n\tsummary:\"《du 及 df 命令的使用（附带示例）》\",\r\n\tpic:\"http://jbcdn2.b0.upaiyun.com/2017/05/77d80105fd15f2465894827e23cc4842.jpeg\",\r\n\tappkey:{\r\n         \"tsina\": 1473879058    },\r\n\tralateuid:{\r\n\t\t\"tsina\": 1670481425\t},\r\n\thideMore:false\r\n}\r\n</script>\r\n<script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js?uid=1745061\" charset=\"utf-8\"></script>\r\n<!-- JiaThis Button END -->\r\n\t\t\t<div class=\"textwidget\"><p><a href=\"http://group.jobbole.com/22945/\" target=\"_blank\"><img src=\"http://wx1.sinaimg.cn/mw690/bfdcef89gy1fq547hqqaij20h803cgm9.jpg\"></a></p>\n</div>\n\t\t\r\n</div>\r\n<!-- END .post -->\r\n            <div style=\"text-align: left;\">\r\n            <h3>相关文章</h3>\r\n            <ul style=\"font-size: 13px; list-style: disc inside;\">\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"给初学者的 type 命令教程\" target=\"_blank\" href=\"http://blog.jobbole.com/113817/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">给初学者的 type 命令教程</a>\r\n                         · <a href=\"http://blog.jobbole.com/113817/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 1</a>                    </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"为初学者准备的 ln 命令教程（5 个示例）\" target=\"_blank\" href=\"http://blog.jobbole.com/113800/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">为初学者准备的 ln 命令教程（5 个示例）</a>\r\n                                            </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"如何在 Linux 上安装应用程序\" target=\"_blank\" href=\"http://blog.jobbole.com/113793/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">如何在 Linux 上安装应用程序</a>\r\n                         · <a href=\"http://blog.jobbole.com/113793/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 1</a>                    </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"Linux 中的“大内存页”（hugepage）是个什么？\" target=\"_blank\" href=\"http://blog.jobbole.com/113782/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">Linux 中的“大内存页”（hugepage）是个什么？</a>\r\n                                            </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"Linux 新用户？来试试这 8 款重要的软件\" target=\"_blank\" href=\"http://blog.jobbole.com/113775/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">Linux 新用户？来试试这 8 款重要的软件</a>\r\n                                            </span>\r\n                    </li>\r\n                            </ul>\r\n        </div>\r\n    \r\n    \n<div style=\"text-align: left;\">\n    <h3>可能感兴趣的话题</h3>\n    <ul style=\"font-size: 13px; list-style: disc inside;\">\n                        <li>\n                    <a href=\"http://group.jobbole.com/33039/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"Eng  ---  React ,Vue ,Angular全家桶套餐外的另一种超轻量级实现方式 (16kb)\" target=\"_blank\">Eng  ---  React ,Vue ,Angular全家桶套餐外的另一种超轻量级实...</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/33038/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"28岁刚入门，靠谱不？\" target=\"_blank\">28岁刚入门，靠谱不？</a>\n                     · <a href=\"http://group.jobbole.com/33038/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 7</a>                </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32985/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"工作四年，该如何晋级架构师？\" target=\"_blank\">工作四年，该如何晋级架构师？</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32958/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"java 的nio和网络编程nio 的区别\" target=\"_blank\">java 的nio和网络编程nio 的区别</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32933/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"工作压力大，然后出错多。。然后工作压力大。该怎么调整自己的状态……\" target=\"_blank\">工作压力大，然后出错多。。然后工作压力大。该怎么调整自己的状态……</a>\n                     · <a href=\"http://group.jobbole.com/32933/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 5</a>                </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32879/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"是去北上广深闯几年还是留在二线城市？\" target=\"_blank\">是去北上广深闯几年还是留在二线城市？</a>\n                     · <a href=\"http://group.jobbole.com/32879/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 2</a>                </li>\n                </ul>\n</div>\r\n\t\n            <div id=\"article-comment\" class=\"dot-box center-align\">\n\n                        <a href=\"http://www.jobbole.com/login?redirect=http://blog.jobbole.com/113780/\"><button type=\"button\" class=\"btn btn-non-transparent\">登录后评论</button></a>\n            \n            <a target=\"_blank\" href=\"http://www.jobbole.com/register\"><button type=\"button\" class=\"btn btn-primary\">新用户注册</button></a>\n\n            <br><br>\n            <span>直接登录</span>\n            <style type=\"text/css\">.t_login_text{margin:0; padding:0;}.t_login_button{margin:0; padding: 5px 0;}.t_login_button a{margin:0; padding-right:3px; line-height:25px}.t_login_button img{display:inline; border:none;}</style><!-- 使用社交帐号登录 来自 WordPress连接微博 插件 --><span class=\"connectBox1 t_login_button\"><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=weixin&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113780%2F\" title=\"微信\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_weixin.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=qzone&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113780%2F\" title=\"QQ\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_qzone.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=sina&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113780%2F\" title=\"新浪微博\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_sina.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=douban&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113780%2F\" title=\"豆瓣\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_douban.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=github&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113780%2F\" title=\"GitHub\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_github.png\"></a></span>        </div>\n    \n\n    <div id=\"comment_list\" class=\"comments\">\n\n        \n    </div>\n\t\t\r\n\r\n\t\r\n</div>", "tag": "IT技术-Linux", "url": "http://blog.jobbole.com/113780/", "url_object_id": "9f16c4dc5a6cd2f4b07fef3690f49f8b", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2017/05/77d80105fd15f2465894827e23cc4842.jpeg"], "front_image_path": "full/d1b17b98748a74826464a08e6d30a4ee1b15b171.jpg"}
{"title": "从业 24 年独立开发者：大多数同行都只看 5 年以内", "create_date": "2018/03/22", "praise_nums": "1", "fav_nums": "1", "comments_nums": "0", "content": "<div class=\"grid-8\">\r\n\r\n\t\t\r\n\t<!-- BEGIN .post -->\r\n<div class=\"post-113778 post type-post status-publish format-standard hentry category-career tag-797 odd\" id=\"post-113778\">\r\n\t\r\n\t<!-- BEGIN .entry-header -->\r\n\t<div class=\"entry-header\">\r\n\t\r\n\t\t\t\t\r\n\t\t<h1>从业 24 年独立开发者：大多数同行都只看 5 年以内</h1>\r\n\t\t\r\n\t\t\t\t\t\t\t\r\n\t</div>\r\n\t<!-- BEGIN .entry-header -->\r\n\t\r\n\t<!-- BEGIN .entry-meta -->\r\n\t<div class=\"entry-meta\">\r\n\t\r\n\t\t<p class=\"entry-meta-hide-on-mobile\">\r\n\r\n            2018/03/22 ·  <a href=\"http://blog.jobbole.com/category/career/\" rel=\"category tag\">职场</a>\r\n            \r\n            \r\n\r\n            \r\n             ·  <a href=\"http://blog.jobbole.com/tag/%e6%b8%b8%e6%88%8f/\">游戏</a>\r\n            \r\n</p>\r\n\r\n<!-- JiaThis Button BEGIN -->\r\n<div class=\"jiathis_style\" style=\"display: block; margin: 0 0px; clear: both;\"><span class=\"jiathis_txt\">分享到：</span>\r\n<a class=\"jiathis_button_tsina\"></a>\r\n<a class=\"jiathis_button_weixin\"></a>\r\n<a class=\"jiathis_button_qzone\"></a>\r\n<a class=\"jiathis_button_fb\"></a>\r\n<a class=\"jiathis_button_douban\"></a>\r\n<a class=\"jiathis_button_readitlater\"></a>\r\n<a class=\"jiathis_button_evernote\"></a>\r\n<a class=\"jiathis_button_ydnote\"></a>\r\n<a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\r\n<a class=\"jiathis_counter_style\"></a>\r\n</div>\r\n<!-- JiaThis Button END -->\r\n\r\n\r\n\t</div>\r\n\t<!-- END .entry-meta -->\r\n\r\n\t<!-- BEGIN .entry -->\r\n\t<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.gamelook.com.cn/2018/03/323982\">GameLook</a>   </div><p>GameLook报道/有人说，游戏行业的竞争越来越激烈，游戏数量的增加使得曝光率问题日益严重，但在Jeff Vogel看来，真正热爱游戏研发的人，是不会抱怨这些问题的，因为大多数人做开发者都是从1-5年的时间看待自己的游戏研发职业生涯，而真正想要把游戏当作职业的人，往往是考虑40年或者更长的周期。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/db3f0f9a2c81173f5758eed4074b7543.jpg\" alt=\"\" width=\"564\" height=\"293\"></p>\n<p>在24年的独立游戏研发生涯中，Spiderweb Software创始人Jeff Vogel学到了很多东西。在3月20日举行的GDC独立游戏峰会上，他分享了一些自己的心得，有些观点让人十分意外。</p>\n<p><strong>游戏是朝阳产业，创新不是唯一出路</strong></p>\n<p>Vogel强调，“游戏行业还是个朝阳产业，没有人无所不知，我们还有很多东西都需要弄明白，比如，如何设计这些游戏，如何创造、测试以及销售这些产品，如何为游戏做营销，如何给1亿美元预算的项目增加开箱子玩法而又不影响发布之后的口碑？”他提到自己的第一个游戏项目时候说，“这个项目并没有耗时太久，我当时有了一个想法，也就是小时候就喜欢的那些游戏，所以我要做的就是把小时候喜欢的游戏都回顾一遍，然后从每个游戏里汲取最好的创意。按照我的方法，我希望把它们变成让我觉得满意的游戏”。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/3ea9cfb97b6ce8d6c4919b5e34eb106f.jpg\" alt=\"\" width=\"698\" height=\"566\"></p>\n<p style=\"text-align: center\">Jeff Vogel的第一款游戏截图</p>\n<p>独立游戏非常适合做创新，但创新并不是唯一的出路。你必须知道，我们游戏行业的每个人都是站在巨人的肩膀上，所有的玩法都是在原有的玩法之上演变而来，我只了解自己喜欢的，然后复制这个想法，这就是我的创意过程，他鼓励其他开发者们用类似的方式，按照自己的个人需求去寻找创意，有人把游戏创意说的很玄，比如追求自己的灵感，这样的建议，但我的建议是千万不要这样做，这是一个非常现实的建议，我来说说原因。</p>\n<p>大多数人思考自己在游戏行业生涯的时候，往往是从1-5年的角度考虑问题，对于一些刚开始做游戏研发的人们来说，追寻自己的灵感似乎是非常合理的事情。但是，如果你把自己从事独立游戏研发行业的期限延长到40年或者更久的时间考虑，或许会有所帮助。</p>\n<p>这是一个特别长的时间，如果你在一个行业工作这么久，就会达到最高的工作效率，因为你需要维持生存，需要一个对应的生活方式，一个长久的想法，一个可持续的过程，保持自己不至于破产，因为，如果你因为一些想法而失去了立足之本，在接下来的40年里，它都会让你不断吃亏。</p>\n<p><strong>独立游戏要注重体验，远离消极玩家</strong></p>\n<p>当然，Vogel的创意也并不只是抄袭其他游戏的玩法，他对自己游戏的要求也是相对较高的，比如研发续作的时候，前作25%最差的部分需要被替换，提高整体游戏质量。他非常喜欢重复使用资源、代码和引擎，并认为所有人都不应该因此感到羞辱，比如有一个狼的icon，他在15款不同的游戏里使用过，“人们一直拿这个梗开我的玩笑，但我还是没有因此失业”。</p>\n<p>虽然Spiderweb的游戏有一定的用户群，而且口碑还不错，但这些游戏对于更大的用户群缺乏吸引力，有很大一部分原因是画质无法和3A游戏媲美，但Vogel说，“我非常反感所有人吐槽我的画面质量不够好，我也是投入了资金，专门招聘了美术师的，有些美术资源也是从比较大的渠道获得的，然而还是有人经常说，我的游戏画面很差，我以后再也不会浪费精力去专门提高美术质量了”。</p>\n<p>对于独立游戏开发者而言，这种批评的声音也是经常遇到的，人性有一部分是刻薄的，会对某些事物提出不合理的需求，而且在Steam这样的分销平台没有出现之前，Vogel做电话销售的时候就遇到过类似的问题。而到了互联网时代，这种问题就更加严重，“通常最愤怒的人不是完全匿名的，他们可能是五年前你的游戏最忠实的粉丝，然后你对游戏做出了改变，而且改掉的恰好是他们最喜欢的东西，他们就不再是你的粉丝，你要知道，有时候爱与恨之间的界限很小”。</p>\n<p>作为一个想要长期在游戏行业生存的开发者，Vogel表示，远离各种形式的骚扰是很重要的，作为一个成年人，虽然你很少会被人轻易激怒，但仍有很多事情会让你抓狂，所以Vogel基本上不会看自己的游戏在Steam平台的评论，也不访问论坛，如果被人喷，他还会暂时不登陆Twitter，等待事情平息了之后再登录，如果与一些玩家的关系闹僵，他会毫不犹豫的放弃这部分用户。Vogel说，“不要怕得罪用户，他们说客户总是对的，但实际上并非如此，用户一直是错的。但差别在于，你永远吵不赢他们。有时候你不得不对一部分玩家说，‘我的游戏不适合你，所以我不能增加你要的功能、不能做这样的资料片、不能满足你的要求’，对于你无法让他们满意的用户，退款是最好的方法”。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/b87866fb081fe1d1caf5bc8b5b63273f.jpg\" alt=\"\" width=\"714\" height=\"401\"></p>\n<p style=\"text-align: center\">《Geneforge 3》截图</p>\n<p>对于论坛管理，他说，“如果有人在论坛挑事，直接封掉就是了。但如果有人说，‘这些人又不会影响你的生意，不应该封他们’，那你可以连这些人一起封掉，这些消极的负面声音只会给你的社区带来不利影响，真正支持你的玩家会理解你的做法”。</p>\n<p>和所有的工作室一样，Spiderweb也经历了起伏，Vogel指出，2004年是最艰难的时候，那一年他的两款游戏，《Blades of Avernum》和《Geneforge 3》的销量都不佳。</p>\n<p>有人说，游戏开发者就像是艺术家，遭遇挫折在所难免，但Vogel认为，作为艺术家，你必须成长，“我们更像是玩具制造者，我们卖的是娱乐体验，我们的作品是用来给人们的大脑带来消遣的，我们卖的是惊喜，而自满、平淡无奇和重复会扼杀惊喜。如果你想做续作，很好，但你的续作最好是加入一些新东西，而且是越早越好，因为，如果玩家们开始发现你的需走只是重复，那么就会以拒绝购买的方式让你看到他们的答案”。</p>\n<p>最后，Vogel还提醒同行们不要过度消耗自己的健康，“不要因为熬夜工作而感到自豪，你需要睡眠才能活的长久，最好是挑一把好的椅子，因为有一天如果你的脊椎不行了，就会追悔莫及”。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113778\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113778votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113778\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>\r\n\t<!-- END .entry -->\r\n\r\n\r\n<script type=\"text/javascript\">\r\nvar jiathis_config={\r\n\tdata_track_clickback:false,\r\n\ttitle:\"分享从伯乐在线看到的一篇好文章 \",\r\n\tsummary:\"《从业 24 年独立开发者：大多数同行都只看 5 年以内》\",\r\n\tpic:\"http://jbcdn2.b0.upaiyun.com/2018/03/db3f0f9a2c81173f5758eed4074b7543.jpg\",\r\n\tappkey:{\r\n         \"tsina\": 1473879058    },\r\n\tralateuid:{\r\n\t\t\"tsina\": 1670481425\t},\r\n\thideMore:false\r\n}\r\n</script>\r\n<script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js?uid=1745061\" charset=\"utf-8\"></script>\r\n<!-- JiaThis Button END -->\r\n\t\t\t<div class=\"textwidget\"><p><a href=\"http://group.jobbole.com/22945/\" target=\"_blank\"><img src=\"http://wx1.sinaimg.cn/mw690/bfdcef89gy1fq547hqqaij20h803cgm9.jpg\"></a></p>\n</div>\n\t\t\r\n</div>\r\n<!-- END .post -->\r\n            <div style=\"text-align: left;\">\r\n            <h3>相关文章</h3>\r\n            <ul style=\"font-size: 13px; list-style: disc inside;\">\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"独立游戏开发者：我做对了所有事、但还是赔掉了房子\" target=\"_blank\" href=\"http://blog.jobbole.com/113629/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">独立游戏开发者：我做对了所有事、但还是赔掉了房子</a>\r\n                                            </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"九年游戏开发经验谈\" target=\"_blank\" href=\"http://blog.jobbole.com/109943/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">九年游戏开发经验谈</a>\r\n                                            </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"13 年来，我写了这些糟糕的游戏代码\" target=\"_blank\" href=\"http://blog.jobbole.com/111373/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">13 年来，我写了这些糟糕的游戏代码</a>\r\n                                            </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"Windows 纸牌游戏是我开发的，但我没从中拿到一分钱\" target=\"_blank\" href=\"http://blog.jobbole.com/111005/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">Windows 纸牌游戏是我开发的，但我没从中拿到一分钱</a>\r\n                         · <a href=\"http://blog.jobbole.com/111005/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 2</a>                    </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"WASD 何时成了游戏操作的主流？\" target=\"_blank\" href=\"http://blog.jobbole.com/110329/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">WASD 何时成了游戏操作的主流？</a>\r\n                                            </span>\r\n                    </li>\r\n                            </ul>\r\n        </div>\r\n    \r\n    \n<div style=\"text-align: left;\">\n    <h3>可能感兴趣的话题</h3>\n    <ul style=\"font-size: 13px; list-style: disc inside;\">\n                        <li>\n                    <a href=\"http://group.jobbole.com/33039/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"Eng  ---  React ,Vue ,Angular全家桶套餐外的另一种超轻量级实现方式 (16kb)\" target=\"_blank\">Eng  ---  React ,Vue ,Angular全家桶套餐外的另一种超轻量级实...</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/33038/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"28岁刚入门，靠谱不？\" target=\"_blank\">28岁刚入门，靠谱不？</a>\n                     · <a href=\"http://group.jobbole.com/33038/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 7</a>                </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32985/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"工作四年，该如何晋级架构师？\" target=\"_blank\">工作四年，该如何晋级架构师？</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32958/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"java 的nio和网络编程nio 的区别\" target=\"_blank\">java 的nio和网络编程nio 的区别</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32933/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"工作压力大，然后出错多。。然后工作压力大。该怎么调整自己的状态……\" target=\"_blank\">工作压力大，然后出错多。。然后工作压力大。该怎么调整自己的状态……</a>\n                     · <a href=\"http://group.jobbole.com/32933/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 5</a>                </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32879/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"是去北上广深闯几年还是留在二线城市？\" target=\"_blank\">是去北上广深闯几年还是留在二线城市？</a>\n                     · <a href=\"http://group.jobbole.com/32879/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 2</a>                </li>\n                </ul>\n</div>\r\n\t\n            <div id=\"article-comment\" class=\"dot-box center-align\">\n\n                        <a href=\"http://www.jobbole.com/login?redirect=http://blog.jobbole.com/113778/\"><button type=\"button\" class=\"btn btn-non-transparent\">登录后评论</button></a>\n            \n            <a target=\"_blank\" href=\"http://www.jobbole.com/register\"><button type=\"button\" class=\"btn btn-primary\">新用户注册</button></a>\n\n            <br><br>\n            <span>直接登录</span>\n            <style type=\"text/css\">.t_login_text{margin:0; padding:0;}.t_login_button{margin:0; padding: 5px 0;}.t_login_button a{margin:0; padding-right:3px; line-height:25px}.t_login_button img{display:inline; border:none;}</style><!-- 使用社交帐号登录 来自 WordPress连接微博 插件 --><span class=\"connectBox1 t_login_button\"><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=weixin&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113778%2F\" title=\"微信\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_weixin.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=qzone&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113778%2F\" title=\"QQ\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_qzone.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=sina&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113778%2F\" title=\"新浪微博\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_sina.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=douban&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113778%2F\" title=\"豆瓣\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_douban.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=github&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113778%2F\" title=\"GitHub\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_github.png\"></a></span>        </div>\n    \n\n    <div id=\"comment_list\" class=\"comments\">\n\n        \n    </div>\n\t\t\r\n\r\n\t\r\n</div>", "tag": "职场-游戏", "url": "http://blog.jobbole.com/113778/", "url_object_id": "7a3fd4e360713292fb09393642fffc46", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/03/db3f0f9a2c81173f5758eed4074b7543.jpg"], "front_image_path": "full/e987a29d5f8519c5dcfb6963d8ba061ebf03b879.jpg"}
{"title": "刚开始学编程？这几款小工具能让你事半功倍", "create_date": "2018/03/26", "praise_nums": "2", "fav_nums": "6", "comments_nums": "1", "content": "<div class=\"grid-8\">\r\n\r\n\t\t\r\n\t<!-- BEGIN .post -->\r\n<div class=\"post-113785 post type-post status-publish format-standard hentry category-it-tech tag-web tag-389 odd\" id=\"post-113785\">\r\n\t\r\n\t<!-- BEGIN .entry-header -->\r\n\t<div class=\"entry-header\">\r\n\t\r\n\t\t\t\t\r\n\t\t<h1>刚开始学编程？这几款小工具能让你事半功倍</h1>\r\n\t\t\r\n\t\t\t\t\t\t\t\r\n\t</div>\r\n\t<!-- BEGIN .entry-header -->\r\n\t\r\n\t<!-- BEGIN .entry-meta -->\r\n\t<div class=\"entry-meta\">\r\n\t\r\n\t\t<p class=\"entry-meta-hide-on-mobile\">\r\n\r\n            2018/03/26 ·  <a href=\"http://blog.jobbole.com/category/it-tech/\" rel=\"category tag\">IT技术</a>\r\n            \r\n                            · <a href=\"#article-comment\"> 1 评论 </a>\r\n            \r\n\r\n            \r\n             ·  <a href=\"http://blog.jobbole.com/tag/web%e5%89%8d%e7%ab%af/\">Web前端</a>, <a href=\"http://blog.jobbole.com/tag/%e7%bc%96%e7%a8%8b/\">编程</a>\r\n            \r\n</p>\r\n\r\n<!-- JiaThis Button BEGIN -->\r\n<div class=\"jiathis_style\" style=\"display: block; margin: 0 0px; clear: both;\"><span class=\"jiathis_txt\">分享到：</span>\r\n<a class=\"jiathis_button_tsina\"></a>\r\n<a class=\"jiathis_button_weixin\"></a>\r\n<a class=\"jiathis_button_qzone\"></a>\r\n<a class=\"jiathis_button_fb\"></a>\r\n<a class=\"jiathis_button_douban\"></a>\r\n<a class=\"jiathis_button_readitlater\"></a>\r\n<a class=\"jiathis_button_evernote\"></a>\r\n<a class=\"jiathis_button_ydnote\"></a>\r\n<a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\r\n<a class=\"jiathis_counter_style\"></a>\r\n</div>\r\n<!-- JiaThis Button END -->\r\n\r\n\r\n\t</div>\r\n\t<!-- END .entry-meta -->\r\n\r\n\t<!-- BEGIN .entry -->\r\n\t<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://medium.freecodecamp.org/tools-i-wish-i-had-known-about-when-i-started-coding-57849efd9248\">Mario Hoyos</a>   译文出处：<a target=\"_blank\" href=\"http://36kr.com/p/5121154.html\">36氪</a>   </div><p><img src=\"https://pic.36krcnd.com/201803/10141844/8fkz2ekh01zhphjt.jpeg!1200\" alt=\"åå¼å§å­¦ç¼ç¨ï¼è¿å æ¬¾å°å·¥å·è½è®©ä½ äºååå\"></p>\n<p>科技行业里，可供人们使用的工具成百上千，你要怎么知道用哪一种上手最合适呢？</p>\n<p>拿最近刚进入编程这行的人来说吧，大量的工具信息堆砌过来其实毫无益处，反而会无从下手。我发现在自己的开发过程中，很多安装的扩展工具不仅没有真正起到助益作用，反而常常妨碍了正常的开发工作。</p>\n<p>我不是专家，不过随着时间的推移，我还是编制了一份工具清单，这些工具已经证明对我非常有用。如果你刚刚开始学习怎么编程的话，这个清单能给你提供一些指导。如果你是个经验丰富的开发人员，也希望你能从中学到一些新的东西。</p>\n<p>我将把这篇文章分为Chrome扩展程序和VS代码扩展扩展程序两部分。我知道还有其他的浏览器和文本编辑器，但是我想你当然只能在你能找到的工具里选择，所以还是别因为个人喜好而引起一场宗教般的争论。</p>\n<p>请随便选。</p>\n<h3>Chrome扩展程序</h3>\n<p><span class=\"load-html-img loaded\"><img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/8b4aab0d40f4316375f7cd578ff0286e.jpeg\" alt=\"刚开始学编程？这几款小工具能让你事半功倍\"></span></p>\n<p>现在设我是一位web开发人员，以Chrome为阵地。下面是一些能让我少花点时间的工具：</p>\n<ul class=\" list-paddingleft-2\">\n<li><a href=\"https://chrome.google.com/webstore/detail/whatfont/jabopobgcpjmedljpbcaablpmlmfcogm?hl=en\">WhatFont</a> —— 名字就说明了一切。这是找出你最喜欢网站使用的字体的简单方法，这样你就可以为己所用了。</li>\n<li><a href=\"https://chrome.google.com/webstore/detail/pesticide-for-chrome/bblbgcheenepgnnajgfpiicnbbdmmooh?hl=en\">Pesticide</a>—— 修改CSS的绝佳程序。当我试着学习匣子模型的时候，它简直就是救命稻草般的存在。</li>\n<li><a href=\"https://chrome.google.com/webstore/detail/colorzilla/bhlhnicpbhignbdhedgjhgdocnmhomnp?hl=en\">Colorzilla</a> ——用于复制确切颜色的一个网站，用它可以将颜色直接复制到剪贴板上，这样你就没必要花太多时间获得正确的RGBA组合了。</li>\n<li><a href=\"https://chrome.google.com/webstore/detail/css-peeper/mbnbehikldjhnfehhnaidhjhoofhpehk?hl=en\">CSS Peeper</a>——查看网站使用的颜色时非常方便。在你一开始山寨你认为酷的网站的时候很管用。这个程序能让你查看它们的幕后的色彩方案。</li>\n<li><a href=\"https://chrome.google.com/webstore/detail/wappalyzer/gppongmhjkpfnbhagpmjfkannfbllamg?hl=en\">Wappalyzer</a> ——想要获悉你在网站上看到的是什么技术，这个程序很有用。想知道某网站使用什么样的框架或者它承载了什么服务？这个照样管用。</li>\n<li><a href=\"https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi?hl=en\">React Dev Tools</a>——一款用于调试应用程序的工具。有一点要提一下，它只有在你编写React程序时才有用。</li>\n<li><a href=\"https://chrome.google.com/webstore/detail/redux-devtools/lmhkpmbekcpmknklioeibfkpmmfibljd?hl=en\">Redux Dev Tools</a>——一款用于调试应用程序的工具。有一点要提一下，它只有在你编写Redux程序时才有用。</li>\n<li><a href=\"https://chrome.google.com/webstore/detail/json-formatter/bcjindcccaagfpapjjmafapmmgkkhgoa?hl=en\">JSON Formatter</a> ——让JSON在浏览器中看起来更一目了然的不二之选。也许麻烦的JSON让你苦不堪言，不过只要用了这个软件，找到你要找的东西，所花费的时间会大幅缩短。</li>\n<li><a href=\"https://chrome.google.com/webstore/detail/vimeo-repeat-speed/noonakfaafcdaagngpjehilgegefdima?hl=en\">Vimeo Repeat and Speed</a> ——加速Vimeo视频的绝佳工具。如果你像大多数的web开发人员一样观看视频教程，你就会知道用1.25倍的常规回放速度观看它们是多么的方便。本程序同时也有适用于YouTube的版本。</li>\n</ul>\n<h3>VS Code扩展程序</h3>\n<p><span class=\"load-html-img loaded\"><img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/6f53b4a3d95c1c5b648380d21c6e90fa.jpeg\" alt=\"刚开始学编程？这几款小工具能让你事半功倍\"></span></p>\n<p>Visual Studio Code是我写代码时的不二之选。</p>\n<p>每个人都有他自己喜欢的文本编辑器，我也不例外。不过，我还是想把这些扩展程序介绍给你，而它们对你所使用的大多数编辑器都适用。看看我最喜欢的扩展程序有哪些：</p>\n<ul class=\" list-paddingleft-2\">\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=formulahendry.auto-rename-tag\">Auto Rename Tag </a>——自动重命名成对的HTML标记。假如你创建了一个&lt;p&gt;标记。现在你想更改它。有了这个软件，你只需要更改一个就行，另一个会自动修改。从理论上来说，使用这个软件可以把你的工作效率提升一倍。</li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=ecmel.vscode-html-css\">HTML CSS Support</a> ——HTML文档的CSS支持工具。该工具在获得一些简洁的语法高亮显示和代码建议方面非常有用。</li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=abusaidm.html-snippets\">HTML Snippets</a> ——这一工具在代码分段方面非常有用，可以为你节省大量的时间。它能跟Emmet配对，这样一来你甚至都不用再真正键入HTML了。</li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=dzannotti.vscode-babel-coloring\">Babel ES6/ES7</a> ——JavaScript Babel的辅助工具。如果你用的是Babel，这个工具可以让你更容易区分代码。如果你喜欢JavaScript，那务必也不要错过这款软件。</li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=CoenraadS.bracket-pair-colorizer\">Bracket Pair Colorizer </a>——色彩可视化工具。如果你没有准确地括号，那这个工具对于发现因此导致的许多常见漏洞十分方便。</li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint\">ESLint </a>——你在编写代码的时候，利用这个软件可以轻易获取有关漏洞的提示，而且在编码过程中，它还可以帮助你养成良好的编码习惯。</li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=spywhere.guides\">Guides</a> ——这一工具可以被用来添加额外的指导行代码。这是另一个视觉提示，以确保你正确地括号了。</li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=whtouche.vscode-js-console-utils\">JavaScript Console Utils </a>——使控制台日志记录变得更为简单可行。如果你像大多数开发人员一样，你会发现自己需要在调试流中登录到控制台（我知道我们应该使用调试器）。这个实用的程序使得创建有用的console.log()语句变得易如反掌。</li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=streetsidesoftware.code-spell-checker\">Code Spell Checker</a> ——这一工具正如其名，是拼写检查程序。漏洞的的另一个常见来源是变量或函数名。这一拼写检查工具可以查找不常见的单词，而且还可以把我们用JavaScript编写的东西进行有效的审核。</li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=eamodio.gitlens\">Git Lens</a> ——可以让我们对某文件何时、以及由何人进行更改变得一目了然。当代码被破坏时，我们就能找到该负责任的人，而不是让你当替罪羊了。</li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=christian-kohler.path-intellisense\">Path Intellisense</a> ——文件路径自动完成程序。这样一来从其他文件中导入重要的东西就非常方便了。这一工具使文件导航变得轻而易举。</li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode\">Prettier </a>——自动代码格式化程序。忘掉那些你不得不手动缩进代码的日子吧，有了这个工具，事情就变得简单多啦。这个程序会比你自己做得更快更好。对这个程序我是鼎力推荐的。</li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=robertohuertasm.vscode-icons\">VSCode-Icons</a> ——将图标添加到文件谱中。如果文件结构非常不科学，你的眼睛想罢工的话，这个程序可能会有所帮助。它对于你正在制作的任何文件都能提供有用的图标辅助，能使你更为轻易地区分看到的内容。</li>\n</ul>\n<h3>总结</h3>\n<p>你肯定也有自己中意的工具，这些工具对你的开发工作来说是必不可少的。也希望我上面提到的一些工具能够提高你的工作效率。</p>\n<p>但是千万不要落入贪多不烂的陷阱，因为它可能耗费很多时间。</p>\n<p>希望你能在评论区留下你最喜欢的工具，这样我们就可以共同进步了。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113785\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113785votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113785\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 6 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>\r\n\t<!-- END .entry -->\r\n\r\n\r\n<script type=\"text/javascript\">\r\nvar jiathis_config={\r\n\tdata_track_clickback:false,\r\n\ttitle:\"分享从伯乐在线看到的一篇好文章 \",\r\n\tsummary:\"《刚开始学编程？这几款小工具能让你事半功倍》\",\r\n\tpic:\"https://pic.36krcnd.com/201803/10141844/8fkz2ekh01zhphjt.jpeg!1200\",\r\n\tappkey:{\r\n         \"tsina\": 1473879058    },\r\n\tralateuid:{\r\n\t\t\"tsina\": 1670481425\t},\r\n\thideMore:false\r\n}\r\n</script>\r\n<script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js?uid=1745061\" charset=\"utf-8\"></script>\r\n<!-- JiaThis Button END -->\r\n\t\t\t<div class=\"textwidget\"><p><a href=\"http://group.jobbole.com/22945/\" target=\"_blank\"><img src=\"http://wx1.sinaimg.cn/mw690/bfdcef89gy1fq547hqqaij20h803cgm9.jpg\"></a></p>\n</div>\n\t\t\r\n</div>\r\n<!-- END .post -->\r\n            <div style=\"text-align: left;\">\r\n            <h3>相关文章</h3>\r\n            <ul style=\"font-size: 13px; list-style: disc inside;\">\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"不要浪费时间写完美的代码\" target=\"_blank\" href=\"http://blog.jobbole.com/112564/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">不要浪费时间写完美的代码</a>\r\n                         · <a href=\"http://blog.jobbole.com/112564/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 1</a>                    </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"如何向 6 岁的孩子解释何为编程\" target=\"_blank\" href=\"http://blog.jobbole.com/112375/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">如何向 6 岁的孩子解释何为编程</a>\r\n                         · <a href=\"http://blog.jobbole.com/112375/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 2</a>                    </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"编程趋势：21 个热门和 21 个要降温的\" target=\"_blank\" href=\"http://blog.jobbole.com/112238/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">编程趋势：21 个热门和 21 个要降温的</a>\r\n                         · <a href=\"http://blog.jobbole.com/112238/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 1</a>                    </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"什么是现代化编程？\" target=\"_blank\" href=\"http://blog.jobbole.com/112071/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">什么是现代化编程？</a>\r\n                         · <a href=\"http://blog.jobbole.com/112071/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 4</a>                    </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"写给自学者的入门指南\" target=\"_blank\" href=\"http://blog.jobbole.com/112052/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">写给自学者的入门指南</a>\r\n                         · <a href=\"http://blog.jobbole.com/112052/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 3</a>                    </span>\r\n                    </li>\r\n                            </ul>\r\n        </div>\r\n    \r\n    \n<div style=\"text-align: left;\">\n    <h3>可能感兴趣的话题</h3>\n    <ul style=\"font-size: 13px; list-style: disc inside;\">\n                        <li>\n                    <a href=\"http://group.jobbole.com/33039/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"Eng  ---  React ,Vue ,Angular全家桶套餐外的另一种超轻量级实现方式 (16kb)\" target=\"_blank\">Eng  ---  React ,Vue ,Angular全家桶套餐外的另一种超轻量级实...</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/33038/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"28岁刚入门，靠谱不？\" target=\"_blank\">28岁刚入门，靠谱不？</a>\n                     · <a href=\"http://group.jobbole.com/33038/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 7</a>                </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32985/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"工作四年，该如何晋级架构师？\" target=\"_blank\">工作四年，该如何晋级架构师？</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32958/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"java 的nio和网络编程nio 的区别\" target=\"_blank\">java 的nio和网络编程nio 的区别</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32933/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"工作压力大，然后出错多。。然后工作压力大。该怎么调整自己的状态……\" target=\"_blank\">工作压力大，然后出错多。。然后工作压力大。该怎么调整自己的状态……</a>\n                     · <a href=\"http://group.jobbole.com/32933/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 5</a>                </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32879/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"是去北上广深闯几年还是留在二线城市？\" target=\"_blank\">是去北上广深闯几年还是留在二线城市？</a>\n                     · <a href=\"http://group.jobbole.com/32879/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 2</a>                </li>\n                </ul>\n</div>\r\n\t\n            <div id=\"article-comment\" class=\"dot-box center-align\">\n\n                        <a href=\"http://www.jobbole.com/login?redirect=http://blog.jobbole.com/113785/\"><button type=\"button\" class=\"btn btn-non-transparent\">登录后评论</button></a>\n            \n            <a target=\"_blank\" href=\"http://www.jobbole.com/register\"><button type=\"button\" class=\"btn btn-primary\">新用户注册</button></a>\n\n            <br><br>\n            <span>直接登录</span>\n            <style type=\"text/css\">.t_login_text{margin:0; padding:0;}.t_login_button{margin:0; padding: 5px 0;}.t_login_button a{margin:0; padding-right:3px; line-height:25px}.t_login_button img{display:inline; border:none;}</style><!-- 使用社交帐号登录 来自 WordPress连接微博 插件 --><span class=\"connectBox1 t_login_button\"><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=weixin&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113785%2F\" title=\"微信\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_weixin.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=qzone&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113785%2F\" title=\"QQ\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_qzone.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=sina&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113785%2F\" title=\"新浪微博\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_sina.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=douban&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113785%2F\" title=\"豆瓣\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_douban.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=github&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113785%2F\" title=\"GitHub\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_github.png\"></a></span>        </div>\n    \n\n    <div id=\"comment_list\" class=\"comments\">\n\n                    <h5 id=\"comments\" class=\"sub-title\"><i class=\"glyphicon\"></i>最新评论</h5>\n            <ul class=\"cmnt-list\">\n\n                        <li id=\"comment-162358\" class=\"comment cmnt odd\">\n    \n    <div class=\"cmnt-box\">\n        <div class=\"cmnt-header\">\n                            <a href=\"http://www.jobbole.com/members/evolighting\" class=\"cmnt-img\"><img width=\"37\" height=\"37\" src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\" alt=\"\"></a>\n                <div class=\"cmnt-meta\">\n                    <span><a href=\"http://www.jobbole.com/members/evolighting\">evolighting</a><label class=\"comment_author_data\"> （ <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/evolighting/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 1</a> ）</label></span>\n                    <span class=\"c-title\">\n                        master                    </span>\n\n                    <span class=\"c-date\">\n                        <a href=\"http://blog.jobbole.com/113785/#comment-162358\">03/26</a>\n                    </span>\n\n                    \n                    \n                </div>\n                    </div>\n        <div class=\"cmnt-body\">\n            <p>\n                </p><p>刚开始学编程？</p>\n<p>那么你就不应该去碰chrome和vscode这种有着深刻的“巨头”背景的东西；</p>\n<p> </p>\n<p>当然，这取决于你的目的的和价值观，如果只想挣钱，当巨头的走狗对一无所有的人来说确实是最快的</p>\n            \n                    </div>\n                    <div class=\"cmnt-footer\">\n\n                \n                <p class=\"c-like\">\n                    <a title=\"赞同\" alt=\"赞同\" class=\"162358voteflag  t-up  href-style vote-comment-up  register-user-only   \" data-comment-id=\"162358\"><i class=\"fa fa-thumbs-o-up\"></i> <span id=\"162358voteuptotal\">1 赞</span></a>\n\n                    \n                    <a rel=\"nofollow\" class=\"comment-reply-link register-user-only\" href=\"http://blog.jobbole.com/113785/?replytocom=162358#respond\" data-onclick='return addComment.moveForm( \"comment-162358\", \"162358\", \"respond\", \"113785\" )' aria-label=\"回复给evolighting\">回复 <i class=\"fa fa-reply\"></i></a>\n                </p>\n            </div>\n            </div>\n    </li>\n<!-- #comment-## -->\n            </ul>\n        \n    </div>\n\t\t\r\n\r\n\t\r\n</div>", "tag": "IT技术-Web前端-编程", "url": "http://blog.jobbole.com/113785/", "url_object_id": "86a8795768a1192f6a4d22bbb49ab0d7", "front_image_url": ["https://pic.36krcnd.com/201803/10141844/8fkz2ekh01zhphjt.jpeg!1200"], "front_image_path": "full/4f40ac43ac01e64e0f4b96cceb82a2b2bd8898a3.jpg"}
{"title": "站会不只是站着！那该如何开展？", "create_date": "2018/04/03", "praise_nums": "1", "fav_nums": "1", "comments_nums": "0", "content": "<div class=\"grid-8\">\r\n\r\n\t\t\r\n\t<!-- BEGIN .post -->\r\n<div class=\"post-113799 post type-post status-publish format-standard hentry category-career tag-508 tag-5733 odd\" id=\"post-113799\">\r\n\t\r\n\t<!-- BEGIN .entry-header -->\r\n\t<div class=\"entry-header\">\r\n\t\r\n\t\t\t\t\r\n\t\t<h1>站会不只是站着！那该如何开展？</h1>\r\n\t\t\r\n\t\t\t\t\t\t\t\r\n\t</div>\r\n\t<!-- BEGIN .entry-header -->\r\n\t\r\n\t<!-- BEGIN .entry-meta -->\r\n\t<div class=\"entry-meta\">\r\n\t\r\n\t\t<p class=\"entry-meta-hide-on-mobile\">\r\n\r\n            2018/04/03 ·  <a href=\"http://blog.jobbole.com/category/career/\" rel=\"category tag\">职场</a>\r\n            \r\n            \r\n\r\n            \r\n             ·  <a href=\"http://blog.jobbole.com/tag/%e6%95%8f%e6%8d%b7%e5%bc%80%e5%8f%91/\">敏捷开发</a>, <a href=\"http://blog.jobbole.com/tag/%e7%ab%99%e4%bc%9a/\">站会</a>\r\n            \r\n</p>\r\n\r\n<!-- JiaThis Button BEGIN -->\r\n<div class=\"jiathis_style\" style=\"display: block; margin: 0 0px; clear: both;\"><span class=\"jiathis_txt\">分享到：</span>\r\n<a class=\"jiathis_button_tsina\"></a>\r\n<a class=\"jiathis_button_weixin\"></a>\r\n<a class=\"jiathis_button_qzone\"></a>\r\n<a class=\"jiathis_button_fb\"></a>\r\n<a class=\"jiathis_button_douban\"></a>\r\n<a class=\"jiathis_button_readitlater\"></a>\r\n<a class=\"jiathis_button_evernote\"></a>\r\n<a class=\"jiathis_button_ydnote\"></a>\r\n<a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\r\n<a class=\"jiathis_counter_style\"></a>\r\n</div>\r\n<!-- JiaThis Button END -->\r\n\r\n\r\n\t</div>\r\n\t<!-- END .entry-meta -->\r\n\r\n\t<!-- BEGIN .entry -->\r\n\t<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/chenyahui\">精算狗</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://martinfowler.com/articles/itsNotJustStandingUp.html\">Jason Yip</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>日常站会已经成为很多团队的惯例，尤其是在敏捷软件开发（Agile software development）中。然而，将有效站会和浪费时间区分开来的是很多小细节。</p>\n<p><img class=\"aligncenter\" src=\"http://wx4.sinaimg.cn/large/63918611ly1fpzj87vetej20dw099419.jpg\"></p>\n<p style=\"text-align: center;\">（photo: Karthik Chandrasekarial）</p>\n<h1>我们站着以保持会议简短</h1>\n<p>日常站会（daily stand-up meeting）（也叫 daily scrum，daily huddle，morning roll-call 等）可以简单地描述为：</p>\n<blockquote><p>整个团队每天见面，快速汇报状态最新进展。我们站着以保持会议简短。</p></blockquote>\n<p>就是这样。</p>\n<p>但是这么简短的定义没有真正告诉你那些把有效站会和浪费时间区分开来的细节。</p>\n<p>所以你怎么区分呢？</p>\n<p>对有经验的人来说，当站会出问题的时候，他们凭直觉就知道该调整什么来处理问题。</p>\n<p>对新手来说，出问题时他们不太可能弄清该做什么……如果没有协助的话，他们更可能直接完全放弃这项实践。</p>\n<p>这令人感到遗憾，因为进展顺利的站会给团队带来显著的价值。</p>\n<p>为了解决这个问题，重要的是详述日常站会一般做法的好处和结果。日常站会的这些范例能够帮助缺乏经验的人，也能提醒更有经验的人其直觉背后的原因。</p>\n<h1>“好”可能是什么样？</h1>\n<p>Bob Marley 的“Get Up Stand Up”响起……像巴甫洛夫的铃铛一样，队员们不需要额外的督促就站起来漫步到卡片墙前。这首歌是每天早晨同时播放的循环歌单的一部分。</p>\n<p>有些人把卡片移动到工作流中的正确位置，包括贴上不同颜色的便利贴，写上备注。直接项目团队以外的一些人如果对此感兴趣的话，会闲逛过来看看事情进展如何。</p>\n<p>注意墙边的活动已经停下了，队长启动团队之前购买的巨大计时器；他们对日常站会实际要花多长时间感兴趣。</p>\n<p>一个队员上前一步，谈论黑板上最右边的卡片，离部署点最近。他对部署脚本还有一些疑问。另一个队员表示她能帮忙解决。人们从右到左从上到下继续描述每个工作项都发生了什么，其他人如果能帮忙解决困难就插话进去。队长在一边将提及的困难记录在进展板上。</p>\n<p>一度有一场稍长的讨论来探索怎么解决一个特定的问题。队长意识到这次拖延时，会轻轻举起一根手指打断他们…….恰恰在一个人提议他们应该线下讨论之前。</p>\n<p>一小段时间之后，大家讨论过了所有的卡片，队长询问还有没有人想分享其他事情。某人提了一个有趣的想法，是关于一个会使计划中的一些东西被淘汰的新特征。这引起了一个总试图参加站会的产品经理的兴趣，他们都同意之后再讨论。</p>\n<p>队长在团队开始传统结束仪式时转了转眼睛……1……2……3……精益求精！不是他的菜，但是他得承认，这使得事情高调结束了。</p>\n<p>人们散开并开始讨论提及的不同事情，包括那些困难，新想法和特定工作项的问题。</p>\n<h1>当人们试图一起工作时发生的特定问题</h1>\n<p>当一队人试图作为团队工作时会发生特定的问题，日常站会是这些问题的常见解决方法。</p>\n<p>站会是定期同步的机制，这样团队……</p>\n<p><strong>对目标有同样的理解。</strong>即使我们觉得一开始是互相理解的（很可能并不是），我们的理解也会发生变化，就像我们工作的背景会发生变化。如果一个“团队”中的每个成员是朝不同的目标工作的，那么这个“团队”是无效的。</p>\n<p><strong>协调工作</strong>。如果不需要协调工作，你也就不需要团队。反过来，如果你有一个团队，我假定工作就需要协调。队员之间蹩脚的协调往往会导致糟糕的结果。</p>\n<p><strong>分享问题和改进。</strong>团队合作与单独工作相比，主要好处之一就是在某人遇到问题或者发现一个更好的做事方法时，队员能够互相帮助。如果一个“团队”的队员对分享问题感到不适，而且/或者不互相帮助，那么这个团队往往是无效的。</p>\n<p><strong>识别为一个团队。</strong>如果你不经常与团队接触，在心理上认同一个团队是很困难的。即使你认为他们有能力，而且追求同一个目标，你也无法产生强烈的关联感。</p>\n<h1>日常站会的范例</h1>\n<p>我整理了一些范例来回答下列问题：</p>\n<p>▪谁参加？</p>\n<p>▪我们谈论什么？</p>\n<p>▪我们发言的顺序是什么？</p>\n<p>▪时间和地点？</p>\n<p>▪我们怎么保持精神抖擞？</p>\n<p>▪我们怎么鼓励自主？</p>\n<h1>谁参加？</h1>\n<h2>所有人</h2>\n<p>来自不同领域（比如市场，产品支持，上层管理，培训等）的人和代表希望了解项目的状态和进程，并且/或者贡献一份力量。在多次会议和报告中交流项目状态需要大量重复的工作。</p>\n<p><em>因此</em></p>\n<p>将部分或者全部会议和报告替换成日常站会。任何直接相关的人员，或者想要了解项目的日常工作的人员应该只参加日常站会。</p>\n<p><em>但是</em></p>\n<p>如果不直接相关的人不清楚什么是期望行为，可能会打断站会。这可以通过简单地向新的参与者和观察者提前声明预期规范来解决。</p>\n<p>不是所有形式的报告都是，或者应该是站会形式的。举例来说，项目概述使用<a href=\"http://xprogramming.com/articles/bigvisiblecharts/\">大型可视化图表（Big Visible Chart）</a>会更好，比如燃尽图（burn-down）、燃烧图（burn-up）、累计流量表（cumulative flow diagram）等。</p>\n<h2>工作事项核心</h2>\n<p><em><strong>也叫：</strong></em>故事核心的站会</p>\n<blockquote><p>如果故事对项目来说非常重要，站会中就该是<strong>它们</strong>发言</p>\n<p><a href=\"http://www.exampler.com/blog/2007/11/06/latour-3-anthrax-and-standups/\"><em>— Brian Marick, “Latour 3: Anthrax and standups”</em></a></p></blockquote>\n<p>人们太<strong>注意接力者了，而没有给予接力棒足够的重视</strong>。也就是，人人都在忙着做事，但并不一定是处理工作事项。</p>\n<p><em>因此</em></p>\n<p>把日常站会看作是以工作事项（例如在敏捷软件开发背景下的用户故事）为核心的惯例，而不是人的惯例，与会者只是代表工作事项发言……因为工作事项显然不会说话。</p>\n<p><strong>昨日今日困难</strong>的问题可能仍然适用，但是是从工作事项角度出发的，而不是从人的角度出发的。这也意味着不是每个人都会发言。人们没有责任要说跟改进工作无关的事情。</p>\n<p>由于这样更清晰的关注点，人们更可能在不需要督促的情况下提出困难和申请解决困难。</p>\n<p><em>但是</em></p>\n<p><a href=\"http://blog.mountaingoatsoftware.com/should-the-daily-standup-%20be-person-by-person-or-story-by-story/comment-page-1#comment-23428\">没有发言的责任可能会隐藏一些人的问题，他们害羞或者往往在这种情况下不发言。</a>这在以工作事项为核心的情况下更难察觉。</p>\n<h1>我们谈论什么？</h1>\n<h2>昨日今日困难</h2>\n<p><em><strong>也叫：</strong></em>三个问题</p>\n<p>有些人健谈，可能漫谈到<strong>讲故事</strong>中去。有些人想在听到问题后立即开始<strong>解决问题</strong>。过于长的会议往往是低迷的，与长时间的讨论没有直接关系的参与者往往会分心。</p>\n<p><em>因此</em></p>\n<p>用以下格式组织谈话内容：</p>\n<ol>\n<li>我昨天完成了什么？</li>\n<li>我今天要做什么？</li>\n<li>什么障碍拖延了我的进度？</li>\n</ol>\n<p>满足日常站会的目标至少需要这 3 个问题。讨论的其他主题（例如设计讨论，八卦等）应该推迟到会议结束后。</p>\n<p>Olve Maudal 建议应该掉转问题的顺序来强调重要性的正确顺序：</p>\n<blockquote><p><em>1、有什么障碍？</em></p>\n<p><em> 2、今天要做什么？</em></p>\n<p><em> 3、从昨天起完成了什么？</em></p>\n<p><a href=\"http://olvemaudal.wordpress.com/2008/05/15/daily-stand-up-meetings-%20perhaps-the-third-question-should-go-first/\"><em>— Olve Maudal, “Daily Stand-up Meetings – Perhaps the third question should go first?”</em></a></p></blockquote>\n<p>Lasse Koskela 提出了另一种形式的问题，为了强调队员不应该向队长汇报：</p>\n<blockquote><p><em>每个队员向他的同伴更新信息：</em></p>\n<p><em>每个队员依次向他的同伴提供 3 条信息：</em></p>\n<p><em> 1、昨天开会以来我做的事情</em></p>\n<p><em> 2、我今天要做的事情</em></p>\n<p><em> 3、我需要某人来解决的困难</em></p>\n<p><a href=\"http://radio.javaranch.com/lasse/2006/05/07/1147034972559.html\"><em>— Lasse Koskela, “On Scrum and the curse of the three questions”</em></a></p></blockquote>\n<p>Jonathan Rasmussen 提供了不同的说法来改变站会的动态：</p>\n<blockquote><p>▪<em>你昨天做了什么来改变世界</em></p>\n<p>▪<em>你今天准备怎么做</em></p>\n<p>▪<em>你准备怎么突破任何不幸挡了你路的困难</em></p>\n<p><em>回答这些类型的问题完全改变了站会的动态。你正在使尽浑身解数，宣布你对宇宙的意图，而不是仅仅站在那陈述更新信息。</em></p>\n<p><a href=\"https://www.amazon.com/gp/product/1934356581?ie=UTF8&amp;tag=martinfowlerc-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=1934356581\"><em>— Jonathan Rasmusson, The Agile Samurai</em></a></p></blockquote>\n<p>还有很多团队加入了额外的问题。</p>\n<p><a href=\"http://joel.is/an-invitation-to-come-and-hack-on-buffer/\">Buffer 增加了一个部分，人们可以分享手头上用来提升自己的事请。</a></p>\n<p>Thomas Cagley 建议<a href=\"https://tcagley.wordpress.com/2014/07/18/stand-up-meetings-add-ons/\">寻找风险</a>。</p>\n<p>Mark Levison 发现，增加更有针对性的改进问题是有用的。改动后两个问题来与具体背景接轨。</p>\n<blockquote><p><em> 1、你昨天完成了什么？</em></p>\n<p><em> 2、你今天要做什么？</em></p>\n<p><em> 3、</em> <em>障碍/困难有哪些？</em></p>\n<p><em> 4、你昨天注意到什么代码味道/缺少单元测试……了吗？</em></p>\n<p><em> 5、昨天你对代码做了哪些改进？</em></p>\n<p><a href=\"https://agilepainrelief.com/notesfromatooluser/2011/01/daily-stand-up-variations.html#.VsoT4ZMrLeQ\"><em>— Mark Levison, “Daily Stand-Up Variations”</em></a></p></blockquote>\n<p><em>但是</em></p>\n<p>结构不像由问题的答案所提供给我们的信息那么重要。如果提供信息的准则不那么结构化，遵循清单就不重要了。随着团队成长，你可能会发现你想要调整结构，反映了这个范例是如何演变的。</p>\n<p>更大的问题是，<strong>昨天今天困难</strong>是否太过于关注个人成就，而不是注意正确的事情……这就引向了。</p>\n<h2>改进板（Improvement Board）</h2>\n<p><em><strong>也叫</strong>__<strong>：</strong></em>阻碍板（Blockage Board）、障碍板（Impediment Board）、改善新闻表（Kaizen Newspaper）</p>\n<p>站会中提出的困难没有被解决或者及时处理。</p>\n<p><em>因此</em></p>\n<p>把提及的困难贴到<strong>改进板</strong>上。这是一个公开可见的白板或者表格，记录提及的困难，并跟踪解决方法的进度。一个<strong>改进板</strong>可以在站会以外的时间更新，并作为一个更即时的、不那么具有压迫性的提出困难的方法。一个常见的错误是没能写得足够大，使人们能在很远的地方看到。</p>\n<p>把问题写下来并坦率地承认它的简单行为是减少在对话中走神的可靠方法。所以即使不是每个人都同意某个特定事物是障碍，写下来以便会议结束后讨论也是值得的。</p>\n<p>加上每个提及的困难发生的次数，这强调了哪些问题一般来说更重要，得先处理。</p>\n<p>板面的设计有几种方法。比如像下面一样的表格结构：</p>\n<table cellspacing=\"0\" cellpadding=\"5\">\n<tbody>\n<tr>\n<td valign=\"top\"><strong>问题</strong></td>\n<td valign=\"top\"><strong>计数</strong></td>\n<td valign=\"top\"><strong>控制</strong></td>\n<td valign=\"top\"><strong>对策</strong></td>\n<td valign=\"top\"><strong>状态</strong></td>\n</tr>\n<tr>\n<td valign=\"top\">问题的名字</td>\n<td valign=\"top\">问题发生的计数</td>\n<td valign=\"top\">短期解决方法</td>\n<td valign=\"top\">基于根本原因分析的 长期解决方法</td>\n<td valign=\"top\">计划-执行- 检查-行动</td>\n</tr>\n</tbody>\n</table>\n<p>另一种更像任务板的风格：</p>\n<table cellspacing=\"0\" cellpadding=\"5\">\n<tbody>\n<tr>\n<td valign=\"top\"><strong>要做</strong></td>\n<td valign=\"top\"><strong>正在进行</strong></td>\n<td valign=\"top\"><strong>已完成</strong></td>\n</tr>\n<tr>\n<td valign=\"top\">代表困难的卡片</td>\n<td valign=\"top\">当我们主动解决困难时， 把对应的卡片移动到这里</td>\n<td valign=\"top\">当我们解决了困难时， 把对应的卡片移动到这里</td>\n</tr>\n</tbody>\n</table>\n<p><em>但是</em></p>\n<p>如果提出了太多困难，团队没有能力解决的话，要冒着<strong>改进板</strong>变成抱怨板的风险。</p>\n<h1>我们发言的顺序是什么？</h1>\n<h2>最后到达的最先发言</h2>\n<p>在站会期间，与会者得知道谁应该先发言。由协调人决定谁先发言是与自我组织对抗的、虽然微妙、但是确切的力量。在不需要干预的情况下，团队也应该知道谁先发言。</p>\n<p><em>因此</em></p>\n<p>同意<strong>最后到达的人先发言</strong>。这是个简单的规则，也带来了额外的好处——鼓励人们准时参加站会。</p>\n<p><em>但是</em></p>\n<p>最后到达的人可能也是准备最不充分的，不能给站会开一个好头。</p>\n<h2>接龙</h2>\n<p>在站会期间，与会者得知道谁应该先发言。由协调人决定谁先发言是与自我组织对抗的、虽然微妙、但是确切的力量。在不需要干预的情况下，团队也应该知道谁先发言。</p>\n<p>因此</p>\n<p>使用一个简单的、预先制定的规则来决定谁下一个发言，例如<strong>接龙</strong>。顺时针转还是逆时针转不重要，重要的是团队主导会议，而不是协调人或者经理主导会议。</p>\n<h2>传递信物</h2>\n<p>有了简单的、可预测的排序机制（例如<strong>接龙</strong>），直到快轮到自己发言之前，参与者很容易忽略其他发言人。人们往往会想其他事情，而不是注意听其他人说了什么。</p>\n<p><em>因此</em></p>\n<p>引进一个不可预测的排序机制，比如投掷一个发言信物（例如一个球）来决定谁下一个发言。用发言信物也简化了谁第一个发言的问题，可以是恰好取回信物的人（或者是他/她把信物投向的第一个人）。</p>\n<p>投掷东西也给日常站会增添了一点乐趣，也可以作为一个良好的、感染其他观察团队的机制。</p>\n<p>我在参加与 Simon Stewart 合作的一个项目时第一次学到这个方法。我们用了一个小杂耍球，但是几乎所有东西都可以用作信物。其他团队用过<a href=\"http://edgibbs.com/2006/08/14/passing-a-rugby-ball-in-standups/\">橄榄球</a>，甚至<a href=\"http://kanemar.wordpress.com/2006/05/13/controling-the-flow-of-daily-%20meetings-with-a-team-mascot/\">毛绒玩具</a>。</p>\n<p><em>但是</em></p>\n<p>对大一点的团队来说，可能很难记住谁已经发过言了。在这些情况下，坚持像<strong>接龙</strong>这样简单一点的机制更容易。</p>\n<p>取决于组织甚至团队的文化氛围，扔球可能会显得不专业，对这个惯例产生不必要的负面看法。</p>\n<h2>抽一张卡片</h2>\n<p>在站会期间，与会者得知道谁应该先发言，之后谁应该发言。由协调人决定谁先发言是与自我组织对抗的、虽然微妙、但是确切的力量。团队不喜欢传信物是因为他们手里一般都拿着杯咖啡。</p>\n<p><em>因此</em></p>\n<p><a href=\"http://%20web.archive.org/web/20090526072425/http://www.robbyonrails.com/articles/2006/05/29/the-%20daily-stand-up-part-2\">让每个队员抽一张卡片来决定发言顺序。</a>想象一摞卡片，每张卡片上有一个数字。每个队员到达时可以选一张卡片，根据卡片上的数字来决定发言顺序。</p>\n<h2>过一遍板</h2>\n<p><em><strong>也叫：</strong></em>过一遍墙</p>\n<blockquote><p><em>站会保证每个人都不闲着。过一遍板上的内容保证每个人都只关注最重要的事。</em></p>\n<p><em>— Bret Pettichord via Twitter</em></p></blockquote>\n<p> </p>\n<blockquote><p><em>会议形式的另一个问题是，没有清楚地讨论任务或者工作流。每个话题被简单提及，取决于队员发言的顺序。这使得正在发生的事情很难讲清楚。</em></p>\n<p><a href=\"http://web.archive.org/web/20090611160352/http://dnicolet1.tripod.com/%20agile/index.blog?entry_id=1900488\"><em>— Dave Nicolette, “An alternative format for the daily stand-up”</em></a></p></blockquote>\n<p>人们更关注让自己忙起来，而不是真正改进工作，所以你转向一个以工作事项为核心的模型，而不是以人为核心的模式。但是，即使是工作事项核心的站会，如果使用了像<strong>接龙</strong>或者<strong>传递信物</strong>这样的传统排序机制，也很难理解发生了什么。</p>\n<p><em>因此</em></p>\n<p><strong>过一遍板</strong>，就是在站会中过一遍可视管理板上的每个工作事项。</p>\n<p>大多数敏捷和精益团队使用可视管理系统来展示正在处理的工作事项。对敏捷软件开发来说，这可能叫做任务板（task board）、故事墙（story wall）或者看板（Kanban board）。这些板展示工作事项的进程。通常用在板上移动卡片的方法来展示进程。理论上，垂直位置表示优先程度。</p>\n<p>站会中，从尾到头（例如从右到左）并从高优先级到低优先级（例如从上到下）过一遍每个工作事项。你可能在板上明确地标明应该使用怎样的顺序。</p>\n<p>Pawel Brodzinski 提出了一个<a href=\"http://brodzinski.com/2011/12/effective-standups.html\">默认顺序</a>：</p>\n<p>1. 困难</p>\n<p>2. 加速或者紧急事件</p>\n<p>3. 上次站会后没再有新进展的事项（可能卡住了）</p>\n<p>4. 根据优先级的其他事件</p>\n<p><em>但是</em></p>\n<p>显然，一块板是需要预先准备的，不是所有团队都有。在这种情况下，一人一人发言的结构更合适。</p>\n<p><strong>过一遍板</strong>更可能会屈从于<strong>向队长汇报</strong>，如果没有应用<strong>轮流当协调人</strong>或者其他自我组织范例。</p>\n<h1>时间和地点</h1>\n<h2>在工作地点开会</h2>\n<blockquote><p><em>在工作场地开会，而不是在会议室。</em></p>\n<p><a href=\"http://www.leanblog.org/2010/08/video-of-a-daily-huddle-at-everett-clinic/\"><em>— Marc Graban, “Video of a Daily Huddle at Everett Clinic”</em></a></p></blockquote>\n<p>工作地点有很多触发记忆的东西，能让你想起来发生的事情。</p>\n<p>我们也不希望日常会议需要大量提前协调、寻找再走到开会的房间。</p>\n<p><em>因此</em></p>\n<p><strong>在工作地点开会</strong>，而不是在会议室。如果你们有故事墙或者看板，就在它前面开会。</p>\n<p><em>但是</em></p>\n<p>附近的其他人可能会觉得会议的噪音令人分心。这一般暗示了潜在的糟糕工作空间设计，但仍然必须被承认。</p>\n<h2>同样的时间，同样的地点</h2>\n<p>我们希望团队对站会有主人翁意识。我们也希望利益相关方能路过旁听一场站会，避免再安排另一场状态会议。如果任意队员都能强制推迟或者改变站会的地点，这就很难实现。</p>\n<p><em>因此</em></p>\n<p>团队要同意在<strong>同一时间同一地点</strong>开站会。不要等掉队的人，包括发起人和经理。会议是为整个团队开的，而不是为了某个人。如果你<strong>用站会来开始一天</strong>的话，这就尤其重要了。</p>\n<p>一些更严格的团队可能会惩罚迟到者。我倾向于讨论，并谨慎使用任何惩罚。</p>\n<p><em>但是</em></p>\n<p><strong>同一时间同一地点</strong>并不是盲目地不知变通。重要的是开始时间基本一致，很少要重新安排。如果经常需要重新安排，可能意味着应该调整开始时间。如果每个人都不方便去某个地方，很可能意味着应该调整地点。</p>\n<h2>用站会来开始一天</h2>\n<p>日常站会让我们意识到并注意突出问题。如果在晚些时候开站会，那么这种注意和意识就浪费了。</p>\n<p><em>因此</em></p>\n<p><strong>用站会来开始一天。</strong>由于弹性工作时间，不是每个队员都在同一时间开始上班。针对弹性工作时间的一个常见方法是利用核心工作时间。站会应该在核心工作时间开始时开始。</p>\n<p>类似地，如果队员由于个人原因要迟到一会（比如得送孩子上学），站会开始时间应该设在每个人都能参加的时刻。</p>\n<p><em>但是</em></p>\n<p>在站会前大家往往不会做任何与项目相关的任务。如果<strong>开始一天的站会开晚了</strong>，懒散时间会很显著。到某种程度下，这些时间可能会被简单地用来查看邮件、填时间表等。但是把站会安排在晚一点的时间，而不是“一天的开始”值得研究。</p>\n<h2>别用站会来开始一天</h2>\n<p>站会往往被作为为一天设置关注点的惯例，尤其是如果你<strong>用站会来开始一天</strong>。因此，在站会开始前，队员往往不处理特性。当会议实际上不是第一件事时，这个倾向可能会对生产效率有显著影响。</p>\n<p><em>因此</em></p>\n<p><strong>别用站会来开始一天。</strong>把日常站会安排到一个足够晚的时间，晚到人们不会从心理上把会议和一天的开始联系在一起。</p>\n<p><em>但是</em></p>\n<p>如果不用日常会议开始一天，那它就不能再作为一个在一天的开始设定团队关注点的惯例了。效率的明显提高可能不值得这样的代价，取决于不同团队。</p>\n<p>当有很多项目用到站会时，可能同时有很多站会。对多个项目感兴趣的观察者可能想要更改站会时间，这样他们能都参加。问题在于，如果一个观察者能要求与会者调整他/她的安排，会威胁到团队的主人翁意识。然而，在决定什么时候开站会时也必须考虑这一点。</p>\n<h1>我们怎样保持精神抖擞？</h1>\n<h2>聚集在一起</h2>\n<blockquote><p><em>我经常发现的问题是，人们往往把日常站会看作简单的个人报告。“我做了这个……我要做那个”——接着下一个人也这么说。更理想的方法是站得更近，像足球队围在一起那样。</em></p>\n<p><a href=\"https://www.linkedin.com/pulse/20140926150354-136414-the-origin-of-the-daily-stand-up\"><em>— Jeff Sutherland, “The Origin of The Daily Stand-up”</em></a></p></blockquote>\n<p>讲话的音量影响参与度，也影响交流的效率。物理距离会改变好的交流所要求的音量。有些人不大声讲话，大声讲话会感到不舒服。</p>\n<p><em>因此</em></p>\n<p>站会更应该是 <strong>Huddle </strong>而不是会议。如果很难听清，让大家站近一点。除了可以用更轻松的说话音量，身体上更接近往往也会增加与会者的参与度。能够站得更近也表现了队里更多的信任感。如果站会是一个新事物，用手势招呼别人参加和说些有“来吧。”效果的话通常来说就足够了。如果圈子的大小已经建立了一段时间，在尝试缩小它之前考虑解释一下缩小圈子的原因。</p>\n<p><em>但是</em></p>\n<p>团队必须平衡近距离和个人舒适区域。即使在非常有信任感的团队中，也有一个点，站得太近以至于超过了这个点，人们会觉得不舒服。症状往往是与会者紧张并/或者坐立不安。</p>\n<h2>站起来</h2>\n<p>有些人健谈，可能漫谈到<strong>讲故事</strong>中去。有些人想在听到问题后立即开始<strong>解决问题</strong>。过于长的会议往往是低迷的，与长时间的讨论没有直接关系的参与者往往会分心。</p>\n<p><em>因此</em></p>\n<p>在会议期间要求所有与会者<strong>站起来</strong>。用站立来链接身体和心理的意愿。身体上的不适也会提醒与会者会议拖得过长了。鼓励这种做法的一个简单方法是：直接在没有椅子的地方开会。</p>\n<p><em>但是</em></p>\n<p>站起来往往会导致会议缩短，但并不保证会缩短到一个理想的时长。人们可能会学着适应不适感而不是采用一个更合适的对策。而且如果会议<em>没有</em>拖得过长，也没有跑题，站起来就是一个不必要的仪式了。</p>\n<h2>十五分钟或者更短</h2>\n<p>大多数人会在长时间的会议中走神。又长又无聊的会议是一个糟糕的、消耗精力的开始一天的方法。一个具体的时长帮助我们想起来什么时候该考虑调整，以缩短会议时长。</p>\n<p><em>因此</em></p>\n<p>保持日常站会在<strong>十五分钟或者更短</strong>。一般来说，十五分钟过后，普通人开始走神，这对设定关注点来说一点帮助都没有。</p>\n<p><em>但是</em></p>\n<p>十五分钟对小一点的团队来说可能太长了。由于走神的影响，甚至对大一点的团队来说，十五分钟是一个好的限制。另外，会议也可能太短，以至于结束时，与会者仍然不清楚发生了什么或者该问谁来弄清楚。</p>\n<h2>结束信号</h2>\n<p>在最后一个人发言结束后，团队可能不会马上意识到会议结束了。如果人们是逐渐意识到该散了的，会议不能高调结束，可能会导致<strong>低迷</strong>。</p>\n<p><em>因此</em></p>\n<p>用一句顺嘴的话（例如，<a href=\"http://edgibbs.com/2006/08/07/signaling-the-end-of-a-standup/\">“好了，大家去吃午饭吧。”</a>）或者其他动作作为站会<strong>结束的信号</strong>。</p>\n<h2>给会议计时</h2>\n<p>很难从量上判断站会是否超时，尤其在长度是逐渐增加的情况下。</p>\n<p><em>因此</em></p>\n<p><strong>给会议计时</strong>并发布结果。大多时候，与会者仅仅是没有意识到<strong>讲故事</strong>的影响，没有准备要线下讨论，也没有准备会议要开多久。把它量化。</p>\n<p><em>但是</em></p>\n<p>和所有措施一样，除非真的有一个要完成的目标是由于能量级导致的问题，不应该引入给会议计时的方法。一旦完成目标，应该抛弃这个方法。没有特定的原因就计时会导致怀疑和对度量的冷漠。</p>\n<p>时间是精力、注意力和节奏的代表。要更注意这些东西而不是时间。</p>\n<h2>线下讨论</h2>\n<p>有些人想要在听到问题后立即开始<strong>解决问题</strong>。过于长的会议往往是低迷的，与长时间的讨论没有直接关系的参与者往往会分心。承认要解决提及的问题需要进一步讨论仍然是重要的。有些人可能会觉得打断站会的结构不舒服。</p>\n<p><em>因此</em></p>\n<p>用像“<strong>线下讨论</strong>”这么一句简单一致的话作为提示，提醒大家这样的讨论应该在日常站会外进行。如果讨论的是社交，没有更多要求。如果讨论的是<strong>解决问题</strong>，协调人（最终就是团队）应该确保提名或者指定了正确的人来之后解决问题。</p>\n<p>或者，有些团队使用更间接的信号。</p>\n<p>例如，Mike Cohn 描述了一个信号，使用<a href=\"http://www.marketplace.org/2012/02/20/life/hate-those-endless-meetings-try-standing\">橡胶老鼠来暗示“我们要钻进老鼠洞了”</a>。</p>\n<p>Benjamin Mitchell 描述了一个双手法则：</p>\n<blockquote><p><em>如果任何人觉得现在的对话跑题了，或者已经不再有效率了，他们就举起一只手。一旦另一个人也举起了手，就标志着这段对话该结束了，并继续站会的剩余部分。正在发言的人可以在站会结束后继续。</em></p>\n<p><a href=\"http://blog.benjaminm.net/2012/02/23/overlong-agile-stand-up-two-hand-rule/\"><em>— Benjamin Mitchell, “Stuck in an overlong Agile stand up? Try the two hands rule”</em></a></p></blockquote>\n<p><em>但是</em></p>\n<p><strong>解决问题</strong>和澄清问题有不同之处。没有被理解的信息是没用的。允许澄清问题到哪种程度取决于团队的大小以及是否会影响<strong>十五分钟或更短</strong>这一规则。</p>\n<h1>我们怎么鼓励自主？</h1>\n<h2>轮流当协调人</h2>\n<p>队员<strong>向队长汇报</strong>，也就是他们只跟会议协调人说话，而不互相说话。会议协调人只提出并解决与站会相关的过程问题。我们希望团队作站会的主人，这就要求去除对单个协调人的依赖。</p>\n<p><em>因此</em></p>\n<p><strong>轮流当协调人。</strong>轮流安排队员负责确保大家参加站会，并坚持商定的准则。</p>\n<p><em>但是</em></p>\n<p>没有丰富站会经验的团队从一个经验丰富的教练那收获颇多。更重要的是，团队应该戒除依赖，对站会掌握更多的控制。到了一定时刻，就不该要协调人了。</p>\n<h2>打破眼神交流</h2>\n<p>队员<strong>向队长汇报</strong>，也就是他们只跟会议协调人说话，而不互相说话。会议协调人只提出并解决与站会相关的过程问题。我们希望团队作站会的主人，这就要求去除对单个协调人的依赖。</p>\n<p><em>因此</em></p>\n<p>协调人必须<a href=\"http://radio.javaranch.com/lasse/2006/05/07/%201147034972559.html#comment1147110635098\">打破眼神交流</a>，来委婉提醒发言者，他/她应该强调整个团队而不是一个人。一种方法是<a href=\"http://www.netobjectives.com/podcasts/last20060719_podcasts.mp3\">四处走走，这样当前的发言者就看不见协调人了</a>。</p>\n<h1>我们怎么知道什么时候站会进行得不顺利？</h1>\n<blockquote><p><em>我忍受了三年日常站会。站会中最让我痛苦的是我的老板（我叫他 Wally）。他开站会的主要原因不是提高效率，也不是尽可能多地用 XP 来减少人与人在与产品直接相关事情之外的互动。然而，对 Wally 来说，站会（例如周一早上 7 点的会议和周五下午 5 点的会议）是用来加强雇主和雇员关系的忠诚度测试。</em></p>\n<p><a href=\"http://queue.acm.org/detail.cfm?id=957730\"><em>— Phillip A. Laplante, “Stand and Deliver: Why I Hate Stand-Up Meetings”</em></a></p></blockquote>\n<p>站会的“味道”是极好的暗示事情进展不顺利的指示剂。重要的是注意即使你没有闻到什么，也不意味着站会进行得顺利。这只意味着它不臭。</p>\n<p>下面的这些味道，大多数都与前面的范例有关。与前面的范例无关的那些，潜在的问题往往更轻微，或者是在日常站会的关注点之外；人们得想出自己的解决方法。</p>\n<h2>注意接力者，而不是接力棒</h2>\n<p>人们太注意自己正在做什么了，而忽略了去考虑他们的行动是不是真的在改进工作。重新组织站会，这样就是<strong>以工作事项为核心</strong>了。</p>\n<h2>向队长汇报</h2>\n<p>队员面对着经理或者会议协调人，还要跟他们说话，而不是跟团队说话。这表明日常站会是为经理/协调人准备的，但它实际上是为团队准备的。有很多方法来打破这种依赖性：<strong>轮流当协调人</strong>，<strong>打破眼神交流</strong>，改变<strong>昨日今日困难</strong>问题的模式，<strong>传递信物</strong>等。</p>\n<h2>人们会迟到</h2>\n<p>这直接用<strong>同一时间同一地点</strong>解决，但是像之前提到的，这可能意味着站会举办的时间或者地点不对。</p>\n<p>有其他范例来处理这个问题，比如罚款。但是，我一般不推荐这些方法，因为它们暗示这些问题是外在推动的，但是更可能有其他原因。</p>\n<h2>开始一天的站会开晚了</h2>\n<p>由于站会被视为工作日的开始，站会之前没有工作能完成。这可能会对可用工作时间产生显著影响，取决于早晨的站会多晚开始。这引向了<strong>别用站会来开始一天</strong>。</p>\n<h2>社交</h2>\n<p>站会的目标之一是提高团队的社会化程度。但是，日常站会不是为了队员能在与项目无关的事上互相“跟上”。很难举出例子，因为社交从团建到偏离的程度取决于不同的团队。这个界可以从未直接参与到社会化中的参与者的行为中检测到。如果他们保持积极的精力水平，那么可能就是团建；如果他们的精力水平降低，那么就<strong>线下讨论</strong>，可能的话用另一场讨论来充当<a href=\"http://web.archive.org/web/20070103031934/http://www.easycomp.org/cgi-bin/%20OrgPatterns?TheWaterCooler\">饮水机</a>。</p>\n<h2>我不记得了</h2>\n<blockquote><p>我昨天做了什么？<em>…__…</em>我不记得了<em>……</em>我今天在做什么？<em>…__…</em>我不知道<em>…__…</em></p></blockquote>\n<p>缺乏准备导致更慢的进节奏，从而导致低迷。这也冒着满足不了<strong>十五分钟或更少</strong>这一规则的风险，这会进一步降低精力水平。</p>\n<p>绕过这个问题的一个好方法是转向<strong>以工作事项为核心</strong>的站会，并<strong>过一遍板</strong>。</p>\n<p>否则，这是一个期望的问题，期望人们有责任知道<strong>昨日困难今日</strong>问题的答案。</p>\n<h2>讲故事</h2>\n<p>参与者不是只简单描述一个问题，而是提供了足够的细节和背景导致别人走神。一般规则是在站会期间识别困难，在站会后讨论细节。这可以总结为“讲讲标题，而不是整个故事”或者<strong>线下讨论</strong>。</p>\n<h2>解决问题</h2>\n<blockquote><p>站会是提出问题和表面想法的时间，而不是深度解决问题的时间。</p>\n<p><em><a href=\"http://www.leanblog.org/2010/08/video-of-a-daily-huddle-at-everett-clinic/\">— Marc Graban, “Video of a Daily Huddle at Everett Clinic”</a></em></p></blockquote>\n<p>保持站会在<strong>十五分钟或者更短</strong>的关键是在会议期间限制<strong>讲故事</strong>，别屈服于<strong>解决问题</strong>。<strong>线下讨论</strong>。</p>\n<h2>低迷</h2>\n<p>低迷可能暗示着由<strong>讲故事</strong>、<strong>解决问题</strong>等导致的节奏变缓。在这种情况下，<strong>线下讨论</strong>。低迷可能仅仅是团队规模的问题。低迷也可能暗示该试试备选的<strong>用站会来开始一天</strong>和<strong>别用站会来开始一天</strong>。</p>\n<h2>没提及的困难</h2>\n<p><strong><em>也叫：</em></strong><a href=\"http://blog.jbrains.ca/permalink/stand-updaily-scrum-focus-on-achievement-and-commitment\">游记</a></p>\n<p>困难没被提及有很多原因。不记得了、高疼痛阙值、对提出问题的不信任感（因为<strong>困难没有被解决</strong>）、没有提出问题的方便渠道等。协调人应该鼓励人们提困难。</p>\n<p>引进一个<strong>改进板</strong>也能提供一个不那么有压迫感的中介。<a href=\"http://www.retrospectives.com/\">Retrospectives</a> 是发现<strong>困难没有被提及</strong>的潜在原因的有效方法。</p>\n<h2>困难没有被解决</h2>\n<p>除了埋怨环境之外，让人们停止提困难的最确定的方法是别解决困难。为了让人们很难忘记或者忽略困难，用<strong>改进板</strong>公开跟踪它们。</p>\n<h2>只有在站会上提出的困难</h2>\n<p>站会充当一个安全网。在最糟糕的情况下，一天内会将一个困难与更大的团队交流。但是，开站会并不是为了避免问题被提出并在一天内解决。引进一个像<strong>改进板</strong>这样的替代媒介来提出困难可能有用。如果没用，潜在原因可能会在使用 <a href=\"http://www.retrospectives.com/\">Retrospectives</a> 时发现。</p>\n<h1>真的只是每天一起站起来</h1>\n<p>希望这篇文章为你提供了一些关于有效站会的细节和常见问题指示的见解。要清楚日常站会不仅仅是每天一起站起来。</p>\n<p>在一天结束时，重要的是不要太在意每一个范例，或者有某些“味道”。记住我们正试着解决的问题。大家精力充沛吗？大家在分享问题和想法吗？大家是否专注于我们的目标？大家是否像一个团队一样工作？每个人都知道发生了什么吗？</p>\n<p>如果你能肯定地回答这些问题，站会很可能还比较顺利。毕竟，真的只是每天一起站起来。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113799\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113799votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113799\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui\">精算狗</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            简介还没来得及写 :）        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/chenyahui\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/chenyahui/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 22</a> · <a title=\"QQ：564968845\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：564968845\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>\r\n\t<!-- END .entry -->\r\n\r\n\r\n<script type=\"text/javascript\">\r\nvar jiathis_config={\r\n\tdata_track_clickback:false,\r\n\ttitle:\"分享从伯乐在线看到的一篇好文章 \",\r\n\tsummary:\"《站会不只是站着！那该如何开展？》\",\r\n\tpic:\"http://wx4.sinaimg.cn/large/63918611ly1fpzj87vetej20dw099419.jpg\",\r\n\tappkey:{\r\n         \"tsina\": 1473879058    },\r\n\tralateuid:{\r\n\t\t\"tsina\": 1670481425\t},\r\n\thideMore:false\r\n}\r\n</script>\r\n<script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js?uid=1745061\" charset=\"utf-8\"></script>\r\n<!-- JiaThis Button END -->\r\n\t\t\t<div class=\"textwidget\"><p><a href=\"http://group.jobbole.com/22945/\" target=\"_blank\"><img src=\"http://wx1.sinaimg.cn/mw690/bfdcef89gy1fq547hqqaij20h803cgm9.jpg\"></a></p>\n</div>\n\t\t\r\n</div>\r\n<!-- END .post -->\r\n            <div style=\"text-align: left;\">\r\n            <h3>相关文章</h3>\r\n            <ul style=\"font-size: 13px; list-style: disc inside;\">\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"创业公司如何实施敏捷开发\" target=\"_blank\" href=\"http://blog.jobbole.com/42115/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">创业公司如何实施敏捷开发</a>\r\n                                            </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"结对编程，我的噩梦\" target=\"_blank\" href=\"http://blog.jobbole.com/41641/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">结对编程，我的噩梦</a>\r\n                         · <a href=\"http://blog.jobbole.com/41641/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 3</a>                    </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"计算机科学专业应该传授的3件事\" target=\"_blank\" href=\"http://blog.jobbole.com/463/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">计算机科学专业应该传授的3件事</a>\r\n                                            </span>\r\n                    </li>\r\n                            </ul>\r\n        </div>\r\n    \r\n    \n<div style=\"text-align: left;\">\n    <h3>可能感兴趣的话题</h3>\n    <ul style=\"font-size: 13px; list-style: disc inside;\">\n                        <li>\n                    <a href=\"http://group.jobbole.com/33039/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"Eng  ---  React ,Vue ,Angular全家桶套餐外的另一种超轻量级实现方式 (16kb)\" target=\"_blank\">Eng  ---  React ,Vue ,Angular全家桶套餐外的另一种超轻量级实...</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/33038/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"28岁刚入门，靠谱不？\" target=\"_blank\">28岁刚入门，靠谱不？</a>\n                     · <a href=\"http://group.jobbole.com/33038/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 7</a>                </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32985/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"工作四年，该如何晋级架构师？\" target=\"_blank\">工作四年，该如何晋级架构师？</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32958/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"java 的nio和网络编程nio 的区别\" target=\"_blank\">java 的nio和网络编程nio 的区别</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32933/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"工作压力大，然后出错多。。然后工作压力大。该怎么调整自己的状态……\" target=\"_blank\">工作压力大，然后出错多。。然后工作压力大。该怎么调整自己的状态……</a>\n                     · <a href=\"http://group.jobbole.com/32933/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 5</a>                </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32879/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"是去北上广深闯几年还是留在二线城市？\" target=\"_blank\">是去北上广深闯几年还是留在二线城市？</a>\n                     · <a href=\"http://group.jobbole.com/32879/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 2</a>                </li>\n                </ul>\n</div>\r\n\t\n            <div id=\"article-comment\" class=\"dot-box center-align\">\n\n                        <a href=\"http://www.jobbole.com/login?redirect=http://blog.jobbole.com/113799/\"><button type=\"button\" class=\"btn btn-non-transparent\">登录后评论</button></a>\n            \n            <a target=\"_blank\" href=\"http://www.jobbole.com/register\"><button type=\"button\" class=\"btn btn-primary\">新用户注册</button></a>\n\n            <br><br>\n            <span>直接登录</span>\n            <style type=\"text/css\">.t_login_text{margin:0; padding:0;}.t_login_button{margin:0; padding: 5px 0;}.t_login_button a{margin:0; padding-right:3px; line-height:25px}.t_login_button img{display:inline; border:none;}</style><!-- 使用社交帐号登录 来自 WordPress连接微博 插件 --><span class=\"connectBox1 t_login_button\"><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=weixin&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113799%2F\" title=\"微信\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_weixin.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=qzone&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113799%2F\" title=\"QQ\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_qzone.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=sina&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113799%2F\" title=\"新浪微博\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_sina.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=douban&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113799%2F\" title=\"豆瓣\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_douban.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=github&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113799%2F\" title=\"GitHub\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_github.png\"></a></span>        </div>\n    \n\n    <div id=\"comment_list\" class=\"comments\">\n\n        \n    </div>\n\t\t\r\n\r\n\t\r\n</div>", "tag": "职场-敏捷开发-站会", "url": "http://blog.jobbole.com/113799/", "url_object_id": "df769d9585bb04c7096fe1e496ae06af", "front_image_url": ["http://wx4.sinaimg.cn/large/63918611ly1fpzj87vetej20dw099419.jpg"], "front_image_path": "full/c073c3ed8ce27fd16c516364c92f7c094410b3a4.jpg"}
{"title": "Linux 启动过程分析", "create_date": "2018/03/13", "praise_nums": "1", "fav_nums": "5", "comments_nums": "1", "content": "<div class=\"grid-8\">\r\n\r\n\t\t\r\n\t<!-- BEGIN .post -->\r\n<div class=\"post-113768 post type-post status-publish format-standard hentry category-it-tech tag-linux odd\" id=\"post-113768\">\r\n\t\r\n\t<!-- BEGIN .entry-header -->\r\n\t<div class=\"entry-header\">\r\n\t\r\n\t\t\t\t\r\n\t\t<h1>Linux 启动过程分析</h1>\r\n\t\t\r\n\t\t\t\t\t\t\t\r\n\t</div>\r\n\t<!-- BEGIN .entry-header -->\r\n\t\r\n\t<!-- BEGIN .entry-meta -->\r\n\t<div class=\"entry-meta\">\r\n\t\r\n\t\t<p class=\"entry-meta-hide-on-mobile\">\r\n\r\n            2018/03/13 ·  <a href=\"http://blog.jobbole.com/category/it-tech/\" rel=\"category tag\">IT技术</a>\r\n            \r\n                            · <a href=\"#article-comment\"> 1 评论 </a>\r\n            \r\n\r\n            \r\n             ·  <a href=\"http://blog.jobbole.com/tag/linux/\">Linux</a>\r\n            \r\n</p>\r\n\r\n<!-- JiaThis Button BEGIN -->\r\n<div class=\"jiathis_style\" style=\"display: block; margin: 0 0px; clear: both;\"><span class=\"jiathis_txt\">分享到：</span>\r\n<a class=\"jiathis_button_tsina\"></a>\r\n<a class=\"jiathis_button_weixin\"></a>\r\n<a class=\"jiathis_button_qzone\"></a>\r\n<a class=\"jiathis_button_fb\"></a>\r\n<a class=\"jiathis_button_douban\"></a>\r\n<a class=\"jiathis_button_readitlater\"></a>\r\n<a class=\"jiathis_button_evernote\"></a>\r\n<a class=\"jiathis_button_ydnote\"></a>\r\n<a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\r\n<a class=\"jiathis_counter_style\"></a>\r\n</div>\r\n<!-- JiaThis Button END -->\r\n\r\n\r\n\t</div>\r\n\t<!-- END .entry-meta -->\r\n\r\n\t<!-- BEGIN .entry -->\r\n\t<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://opensource.com/article/18/1/analyzing-linux-boot-process\">Alison Chaiken</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9437-1.html\">Linux中国/jessie-pang</a>   </div><blockquote><p>理解运转良好的系统对于处理不可避免的故障是最好的准备。</p></blockquote>\n<p>关于开源软件最古老的笑话是：“代码是自具文档化的self-documenting”。经验表明，阅读源代码就像听天气预报一样：明智的人依然出门会看看室外的天气。本文讲述了如何运用调试工具来观察和分析 Linux 系统的启动。分析一个功能正常的系统启动过程，有助于用户和开发人员应对不可避免的故障。</p>\n<p>从某些方面看，启动过程非常简单。内核在单核上以单线程和同步状态启动，似乎可以理解。但内核本身是如何启动的呢？<a href=\"https://en.wikipedia.org/wiki/Initial_ramdisk\">initrd（initial ramdisk）</a> 和引导程序bootloader具有哪些功能？还有，为什么以太网端口上的 LED 灯是常亮的呢？</p>\n<p>请继续阅读寻找答案。在 GitHub 上也提供了 <a href=\"https://github.com/chaiken/LCA2018-Demo-Code\">介绍演示和练习的代码</a>。</p>\n<h3 id=\"toc_1\">启动的开始：OFF 状态</h3>\n<h4 id=\"toc_2\">局域网唤醒Wake-on-LAN</h4>\n<p>OFF 状态表示系统没有上电，没错吧？表面简单，其实不然。例如，如果系统启用了局域网唤醒机制（WOL），以太网指示灯将亮起。通过以下命令来检查是否是这种情况：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a3750884c600901092\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# sudo ethtool &lt;interface name&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a3750884c600901092-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a3750884c600901092-1\"><span class=\"crayon-p\"># sudo ethtool &lt;interface name&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>其中 &lt;interface name&gt;<code></code> 是网络接口的名字，比如 <code>eth0</code>。（<code>ethtool</code> 可以在同名的 Linux 软件包中找到。）如果输出中的 <code>Wake-on</code> 显示 <code>g</code>，则远程主机可以通过发送 <a href=\"https://en.wikipedia.org/wiki/Wake-on-LAN\">魔法数据包MagicPacket</a> 来启动系统。如果您无意远程唤醒系统，也不希望其他人这样做，请在系统 BIOS 菜单中将 WOL 关闭，或者用以下方式：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a37508854545564249\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# sudo ethtool -s &lt;interface name&gt; wol d\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a37508854545564249-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37508854545564249-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a37508854545564249-1\"><span class=\"crayon-p\"># sudo ethtool -s &lt;interface name&gt; wol d</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37508854545564249-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0040 seconds] -->\r\n<p>响应魔法数据包的处理器可能是网络接口的一部分，也可能是 <a href=\"https://lwn.net/Articles/630778/\">底板管理控制器Baseboard Management Controller</a>（BMC）。</p>\n<h4 id=\"toc_3\">英特尔管理引擎、平台控制器单元和 Minix</h4>\n<p>BMC 不是唯一的在系统关闭时仍在监听的微控制器（MCU）。x86_64 系统还包含了用于远程管理系统的英特尔管理引擎（IME）软件套件。从服务器到笔记本电脑，各种各样的设备都包含了这项技术，它开启了如 KVM 远程控制和英特尔功能许可服务等 <a href=\"https://www.youtube.com/watch?v=iffTJ1vPCSo&amp;amp;amp;amp;amp;amp;index=65&amp;amp;amp;amp;amp;amp;list=PLbzoR-pLrL6pISWAq-1cXP4_UZAyRtesk\">功能</a>。根据 <a href=\"https://www.intel.com/content/www/us/en/support/articles/000025619/software.html\">Intel 自己的检测工具</a>，<a href=\"https://security-center.intel.com/advisory.aspx?intelid=INTEL-SA-00086&amp;amp;amp;amp;amp;amp;languageid=en-fr\">IME 存在尚未修补的漏洞</a>。坏消息是，要禁用 IME 很难。Trammell Hudson 发起了一个 <a href=\"https://github.com/corna/me_cleaner\">me_cleaner 项目</a>，它可以清除一些相对恶劣的 IME 组件，比如嵌入式 Web 服务器，但也可能会影响运行它的系统。</p>\n<p>IME 固件和系统管理模式System Management Mode（SMM）软件是 <a href=\"https://lwn.net/Articles/738649/\">基于 Minix 操作系统</a> 的，并运行在单独的平台控制器单元Platform Controller Hub上（LCTT 译注：即南桥芯片），而不是主 CPU 上。然后，SMM 启动位于主处理器上的通用可扩展固件接口Universal Extensible Firmware Interface（UEFI）软件，相关内容 <a href=\"https://lwn.net/Articles/699551/\">已被提及多次</a>。Google 的 Coreboot 小组已经启动了一个雄心勃勃的 <a href=\"https://trmm.net/NERF\">非扩展性缩减版固件Non-Extensible Reduced Firmware</a>（NERF）项目，其目的不仅是要取代 UEFI，还要取代早期的 Linux 用户空间组件，如 systemd。在我们等待这些新成果的同时，Linux 用户现在就可以从 Purism、System76 或 Dell 等处购买 <a href=\"https://www.extremetech.com/computing/259879-dell-now-shipping-laptops-intels-management-engine-disabled\">禁用了 IME</a> 的笔记本电脑，另外 <a href=\"https://lwn.net/Articles/733837/\">带有 ARM 64 位处理器笔记本电脑</a> 还是值得期待的。</p>\n<h4 id=\"toc_4\">引导程序</h4>\n<p>除了启动那些问题不断的间谍软件外，早期引导固件还有什么功能呢？引导程序的作用是为新上电的处理器提供通用操作系统（如 Linux）所需的资源。在开机时，不但没有虚拟内存，在控制器启动之前连 DRAM 也没有。然后，引导程序打开电源，并扫描总线和接口，以定位内核镜像和根文件系统的位置。U-Boot 和 GRUB 等常见的引导程序支持 USB、PCI 和 NFS 等接口，以及更多的嵌入式专用设备，如 NOR 闪存和 NAND 闪存。引导程序还与 <a href=\"https://linuxplumbersconf.org/2017/ocw/events/LPC2017/tracks/639\">可信平台模块Trusted Platform Module</a>（TPM）等硬件安全设备进行交互，在启动最开始建立信任链。</p>\n<p><img class=\"aligncenter\" title=\"Running the U-boot bootloader\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/a1db74d1a0f049a3aabdb89e5079bbce.png\" alt=\"Running the U-boot bootloader\"></p>\n<p style=\"text-align: center\"><em>在构建主机上的沙盒中运行 U-boot 引导程序。</em></p>\n<p>包括树莓派、任天堂设备、汽车主板和 Chromebook 在内的系统都支持广泛使用的开源引导程序 <a href=\"http://www.denx.de/wiki/DULG/Manual\">U-Boot</a>。它没有系统日志，当发生问题时，甚至没有任何控制台输出。为了便于调试，U-Boot 团队提供了一个沙盒，可以在构建主机甚至是夜间的持续集成（CI）系统上测试补丁程序。如果系统上安装了 Git 和 GNU Compiler Collection（GCC）等通用的开发工具，使用 U-Boot 沙盒会相对简单：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a3750885b591699174\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# git clone git://git.denx.de/u-boot; cd u-boot\r\n# make ARCH=sandbox defconfig\r\n# make; ./u-boot\r\n=&gt; printenv\r\n=&gt; help\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a3750885b591699174-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a3750885b591699174-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a3750885b591699174-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a3750885b591699174-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a3750885b591699174-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a3750885b591699174-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a3750885b591699174-1\"><span class=\"crayon-p\"># git clone git://git.denx.de/u-boot; cd u-boot</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a3750885b591699174-2\"><span class=\"crayon-p\"># make ARCH=sandbox defconfig</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a3750885b591699174-3\"><span class=\"crayon-p\"># make; ./u-boot</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a3750885b591699174-4\"><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">printenv</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a3750885b591699174-5\"><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">help</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a3750885b591699174-6\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>在 x86_64 上运行 U-Boot，可以测试一些棘手的功能，如 <a href=\"https://github.com/chaiken/LCA2018-Demo-Code\">模拟存储设备</a> 的重新分区、基于 TPM 的密钥操作以及 USB 设备热插拔等。U-Boot 沙盒甚至可以在 GDB 调试器下单步执行。使用沙盒进行开发的速度比将引导程序刷新到电路板上的测试快 10 倍，并且可以使用 <code>Ctrl + C</code> 恢复一个“变砖”的沙盒。</p>\n<h3 id=\"toc_5\">启动内核</h3>\n<h4 id=\"toc_6\">配置引导内核</h4>\n<p>引导程序完成任务后将跳转到已加载到主内存中的内核代码，并开始执行，传递用户指定的任何命令行选项。内核是什么样的程序呢？用命令 <code>file /boot/vmlinuz</code> 可以看到它是一个 “bzImage”，意思是一个大的压缩的镜像。Linux 源代码树包含了一个可以解压缩这个文件的工具—— <a href=\"https://github.com/torvalds/linux/blob/master/scripts/extract-vmlinux\">extract-vmlinux</a>：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a3750885f132611497\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# scripts/extract-vmlinux /boot/vmlinuz-$(uname -r) &gt; vmlinux\r\n# file vmlinux\r\nvmlinux: ELF 64-bit LSB executable, x86-64, version 1 (SYSV), statically\r\nlinked, stripped\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a3750885f132611497-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a3750885f132611497-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a3750885f132611497-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a3750885f132611497-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a3750885f132611497-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a3750885f132611497-1\"><span class=\"crayon-p\"># scripts/extract-vmlinux /boot/vmlinuz-$(uname -r) &gt; vmlinux</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a3750885f132611497-2\"><span class=\"crayon-p\"># file vmlinux</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a3750885f132611497-3\"><span class=\"crayon-v\">vmlinux</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">ELF</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">64</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">bit </span><span class=\"crayon-e\">LSB </span><span class=\"crayon-v\">executable</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x86</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">64</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">version</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">SYSV</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">statically</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a3750885f132611497-4\"><span class=\"crayon-v\">linked</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">stripped</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a3750885f132611497-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>内核是一个 <a href=\"http://man7.org/linux/man-pages/man5/elf.5.html\">可执行与可链接格式 Executable and Linking Format</a>（ELF）的二进制文件，就像 Linux 的用户空间程序一样。这意味着我们可以使用 <code>binutils</code> 包中的命令，如 <code>readelf</code> 来检查它。比较一下输出，例如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a37508863894585685\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# readelf -S /bin/date\r\n# readelf -S vmlinux\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a37508863894585685-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37508863894585685-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37508863894585685-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a37508863894585685-1\"><span class=\"crayon-p\"># readelf -S /bin/date</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37508863894585685-2\"><span class=\"crayon-p\"># readelf -S vmlinux</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37508863894585685-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>这两个二进制文件中的段内容大致相同。</p>\n<p>所以内核必须像其他的 Linux ELF 文件一样启动，但用户空间程序是如何启动的呢？在 <code>main()</code> 函数中？并不确切。</p>\n<p>在 <code>main()</code> 函数运行之前，程序需要一个执行上下文，包括堆栈内存以及 <code>stdio</code>、<code>stdout</code> 和 <code>stderr</code> 的文件描述符。用户空间程序从标准库（多数 Linux 系统在用 “glibc”）中获取这些资源。参照以下输出：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a37508867963097953\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# file /bin/date\r\n/bin/date: ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically\r\nlinked, interpreter /lib64/ld-linux-x86-64.so.2, for GNU/Linux 2.6.32,\r\nBuildID[sha1]=14e8563676febeb06d701dbee35d225c5a8e565a,\r\nstripped\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a37508867963097953-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37508867963097953-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37508867963097953-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37508867963097953-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37508867963097953-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37508867963097953-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a37508867963097953-1\"><span class=\"crayon-p\"># file /bin/date</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37508867963097953-2\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">date</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">ELF</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">64</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">bit </span><span class=\"crayon-e\">LSB </span><span class=\"crayon-e\">shared </span><span class=\"crayon-t\">object</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x86</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">64</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">version</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">SYSV</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">dynamically</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37508867963097953-3\"><span class=\"crayon-v\">linked</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">interpreter</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">lib64</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">ld</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">linux</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">x86</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">64.so.2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">GNU</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">Linux</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.6.32</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37508867963097953-4\"><span class=\"crayon-v\">BuildID</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">sha1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">14e8563676febeb06d701dbee35d225c5a8e565a</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37508867963097953-5\"><span class=\"crayon-i\">stripped</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37508867963097953-6\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0020 seconds] -->\r\n<p>ELF 二进制文件有一个解释器，就像 Bash 和 Python 脚本一样，但是解释器不需要像脚本那样用 <code>#!</code> 指定，因为 ELF 是 Linux 的原生格式。ELF 解释器通过调用 <code>_start()</code> 函数来用所需资源 <a href=\"https://0xax.gitbooks.io/linux-insides/content/Misc/program_startup.html\">配置一个二进制文件</a>，这个函数可以从 glibc 源代码包中找到，可以 <a href=\"https://github.com/chaiken/LCA2018-Demo-Code/commit/e543d9812058f2dd65f6aed45b09dda886c5fd4e\">用 GDB 查看</a>。内核显然没有解释器，必须自我配置，这是怎么做到的呢？</p>\n<p>用 GDB 检查内核的启动给出了答案。首先安装内核的调试软件包，内核中包含一个未剥离的unstripped vmlinux，例如 <code>apt-get install linux-image-amd64-dbg</code>，或者从源代码编译和安装你自己的内核，可以参照 <a href=\"http://kernel-handbook.alioth.debian.org/\">Debian Kernel Handbook</a> 中的指令。<code>gdb vmlinux</code> 后加 <code>info files</code> 可显示 ELF 段 <code>init.text</code>。在 <code>init.text</code> 中用 <code>l *(address)</code> 列出程序执行的开头，其中 <code>address</code> 是 <code>init.text</code> 的十六进制开头。用 GDB 可以看到 x86_64 内核从内核文件 <a href=\"https://github.com/torvalds/linux/blob/master/arch/x86/boot/compressed/head_64.S\">arch/x86/kernel/head_64.S</a> 开始启动，在这个文件中我们找到了汇编函数 <code>start_cpu0()</code>，以及一段明确的代码显示在调用 <code>x86_64 start_kernel()</code> 函数之前创建了堆栈并解压了 zImage。ARM 32 位内核也有类似的文件 <a href=\"https://github.com/torvalds/linux/blob/master/arch/arm/boot/compressed/head.S\">arch/arm/kernel/head.S</a>。<code>start_kernel()</code> 不针对特定的体系结构，所以这个函数驻留在内核的 <a href=\"https://github.com/torvalds/linux/blob/master/init/main.c\">init/main.c</a> 中。<code>start_kernel()</code> 可以说是 Linux 真正的 <code>main()</code> 函数。</p>\n<h3 id=\"toc_7\">从 start_kernel() 到 PID 1</h3>\n<h4 id=\"toc_8\">内核的硬件清单：设备树和 ACPI 表</h4>\n<p>在引导时，内核需要硬件信息，不仅仅是已编译过的处理器类型。代码中的指令通过单独存储的配置数据进行扩充。有两种主要的数据存储方法：<a href=\"https://www.youtube.com/watch?v=m_NyYEBxfn8\">设备树device-tree</a> 和 <a href=\"http://events.linuxfoundation.org/sites/events/files/slides/x86-platform.pdf\">高级配置和电源接口（ACPI）表</a>。内核通过读取这些文件了解每次启动时需要运行的硬件。</p>\n<p>对于嵌入式设备，设备树是已安装硬件的清单。设备树只是一个与内核源代码同时编译的文件，通常与 <code>vmlinux</code> 一样位于 <code>/boot</code> 目录中。要查看 ARM 设备上的设备树的内容，只需对名称与 <code>/boot/*.dtb</code> 匹配的文件执行 <code>binutils</code> 包中的 <code>strings</code> 命令即可，这里 <code>dtb</code> 是指设备树二进制文件device-tree binary。显然，只需编辑构成它的类 JSON 的文件并重新运行随内核源代码提供的特殊 <code>dtc</code> 编译器即可修改设备树。虽然设备树是一个静态文件，其文件路径通常由命令行引导程序传递给内核，但近年来增加了一个 <a href=\"http://lwn.net/Articles/616859/\">设备树覆盖</a> 的功能，内核在启动后可以动态加载热插拔的附加设备。</p>\n<p>x86 系列和许多企业级的 ARM64 设备使用 <a href=\"http://events.linuxfoundation.org/sites/events/files/slides/x86-platform.pdf\">ACPI</a> 机制。与设备树不同的是，ACPI 信息存储在内核在启动时通过访问板载 ROM 而创建的 <code>/sys/firmware/acpi/tables</code> 虚拟文件系统中。读取 ACPI 表的简单方法是使用 <code>acpica-tools</code> 包中的 <code>acpidump</code> 命令。例如：</p>\n<p><img class=\"aligncenter\" title=\"ACPI tables on Lenovo laptops\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/e1c561f573bf3f14de98b441ff6443d5.png\" alt=\"ACPI tables on Lenovo laptops\"></p>\n<p style=\"text-align: center\"><em>联想笔记本电脑的 ACPI 表都是为 Windows 2001 设置的。</em></p>\n<p>是的，你的 Linux 系统已经准备好用于 Windows 2001 了，你要考虑安装吗？与设备树不同，ACPI 具有方法和数据，而设备树更多地是一种硬件描述语言。ACPI 方法在启动后仍处于活动状态。例如，运行 <code>acpi_listen</code> 命令（在 <code>apcid</code> 包中），然后打开和关闭笔记本机盖会发现 ACPI 功能一直在运行。暂时地和动态地 <a href=\"https://www.mjmwired.net/kernel/Documentation/acpi/method-customizing.txt\">覆盖 ACPI 表</a> 是可能的，而永久地改变它需要在引导时与 BIOS 菜单交互或刷新 ROM。如果你遇到那么多麻烦，也许你应该 <a href=\"https://www.coreboot.org/Supported_Motherboards\">安装 coreboot</a>，这是开源固件的替代品。</p>\n<h4 id=\"toc_9\">从 start_kernel() 到用户空间</h4>\n<p><a href=\"https://github.com/torvalds/linux/blob/master/init/main.c\">init/main.c</a> 中的代码竟然是可读的，而且有趣的是，它仍然在使用 1991 – 1992 年的 Linus Torvalds 的原始版权。在一个刚启动的系统上运行 <code>dmesg | head</code>，其输出主要来源于此文件。第一个 CPU 注册到系统中，全局数据结构被初始化，并且调度程序、中断处理程序（IRQ）、定时器和控制台按照严格的顺序逐一启动。在 <code>timekeeping_init()</code> 函数运行之前，所有的时间戳都是零。内核初始化的这部分是同步的，也就是说执行只发生在一个线程中，在最后一个完成并返回之前，没有任何函数会被执行。因此，即使在两个系统之间，<code>dmesg</code> 的输出也是完全可重复的，只要它们具有相同的设备树或 ACPI 表。Linux 的行为就像在 MCU 上运行的 RTOS（实时操作系统）一样，如 QNX 或 VxWorks。这种情况持续存在于函数 <code>rest_init()</code> 中，该函数在终止时由 <code>start_kernel()</code> 调用。</p>\n<p><img class=\"aligncenter\" title=\"Summary of early kernel boot process.\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/731faee0c0adb28504bce94e646b22a2.png\" alt=\"Summary of early kernel boot process.\"></p>\n<p style=\"text-align: center\"><em>早期的内核启动流程。</em></p>\n<p>函数 <code>rest_init()</code> 产生了一个新进程以运行 <code>kernel_init()</code>，并调用了 <code>do_initcalls()</code>。用户可以通过将 <code>initcall_debug</code> 附加到内核命令行来监控 <code>initcalls</code>，这样每运行一次 <code>initcall</code> 函数就会产生 一个 <code>dmesg</code> 条目。<code>initcalls</code> 会历经七个连续的级别：early、core、postcore、arch、subsys、fs、device 和 late。<code>initcalls</code> 最为用户可见的部分是所有处理器外围设备的探测和设置：总线、网络、存储和显示器等等，同时加载其内核模块。<code>rest_init()</code> 也会在引导处理器上产生第二个线程，它首先运行 <code>cpu_idle()</code>，然后等待调度器分配工作。</p>\n<p><code>kernel_init()</code> 也可以 <a href=\"http://free-electrons.com/pub/conferences/2014/elc/clement-smp-bring-up-on-arm-soc\">设置对称多处理（SMP）结构</a>。在较新的内核中，如果 <code>dmesg</code> 的输出中出现 “Bringing up secondary CPUs…” 等字样，系统便使用了 SMP。SMP 通过“热插拔” CPU 来进行，这意味着它用状态机来管理其生命周期，这种状态机在概念上类似于热插拔的 U 盘一样。内核的电源管理系统经常会使某个核core离线，然后根据需要将其唤醒，以便在不忙的机器上反复调用同一段的 CPU 热插拔代码。观察电源管理系统调用 CPU 热插拔代码的 <a href=\"http://www.brendangregg.com/ebpf.html\">BCC 工具</a> 称为 <code>offcputime.py</code>。</p>\n<p>请注意，<code>init/main.c</code> 中的代码在 <code>smp_init()</code> 运行时几乎已执行完毕：引导处理器已经完成了大部分一次性初始化操作，其它核无需重复。尽管如此，跨 CPU 的线程仍然要在每个核上生成，以管理每个核的中断（IRQ）、工作队列、定时器和电源事件。例如，通过 <code>ps -o psr</code> 命令可以查看服务每个 CPU 上的线程的 softirqs 和 workqueues。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a3750886f983837744\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# ps -o pid,psr,comm $(pgrep ksoftirqd)  \r\n PID PSR COMMAND \r\n   7   0 ksoftirqd/0 \r\n  16   1 ksoftirqd/1 \r\n  22   2 ksoftirqd/2 \r\n  28   3 ksoftirqd/3 \r\n\r\n# ps -o pid,psr,comm $(pgrep kworker)\r\nPID  PSR COMMAND \r\n   4   0 kworker/0:0H \r\n  18   1 kworker/1:0H \r\n  24   2 kworker/2:0H \r\n  30   3 kworker/3:0H\r\n[ . . . ]\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a3750886f983837744-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a3750886f983837744-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a3750886f983837744-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a3750886f983837744-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a3750886f983837744-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a3750886f983837744-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a3750886f983837744-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a3750886f983837744-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a3750886f983837744-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a3750886f983837744-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a3750886f983837744-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a3750886f983837744-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a3750886f983837744-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a3750886f983837744-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a3750886f983837744-15\">15</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a3750886f983837744-1\"><span class=\"crayon-p\"># ps -o pid,psr,comm $(pgrep ksoftirqd)  </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a3750886f983837744-2\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PID </span><span class=\"crayon-e\">PSR </span><span class=\"crayon-i\">COMMAND</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5ac9a3750886f983837744-3\"><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">7</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ksoftirqd</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a3750886f983837744-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">16</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ksoftirqd</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5ac9a3750886f983837744-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">22</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ksoftirqd</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a3750886f983837744-6\"><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">28</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ksoftirqd</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5ac9a3750886f983837744-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a3750886f983837744-8\"><span class=\"crayon-p\"># ps -o pid,psr,comm $(pgrep kworker)</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a3750886f983837744-9\"><span class=\"crayon-e\">PID  </span><span class=\"crayon-e\">PSR </span><span class=\"crayon-i\">COMMAND</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a3750886f983837744-10\"><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">kworker</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0H</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5ac9a3750886f983837744-11\"><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">18</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">kworker</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">1</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0H</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a3750886f983837744-12\"><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">24</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">kworker</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0H</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5ac9a3750886f983837744-13\"><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">kworker</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">3</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0H</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a3750886f983837744-14\"><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a3750886f983837744-15\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0022 seconds] -->\r\n<p>其中，PSR 字段代表“处理器processor”。每个核还必须拥有自己的定时器和 <code>cpuhp</code> 热插拔处理程序。</p>\n<p>那么用户空间是如何启动的呢？在最后，<code>kernel_init()</code> 寻找可以代表它执行 <code>init</code> 进程的 <code>initrd</code>。如果没有找到，内核直接执行 <code>init</code> 本身。那么为什么需要 <code>initrd</code> 呢？</p>\n<h4 id=\"toc_10\">早期的用户空间：谁规定要用 initrd？</h4>\n<p>除了设备树之外，在启动时可以提供给内核的另一个文件路径是 <code>initrd</code> 的路径。<code>initrd</code> 通常位于 <code>/boot</code> 目录中，与 x86 系统中的 bzImage 文件 vmlinuz 一样，或是与 ARM 系统中的 uImage 和设备树相同。用 <code>initramfs-tools-core</code> 软件包中的 <code>lsinitramfs</code> 工具可以列出 <code>initrd</code> 的内容。发行版的 <code>initrd</code> 方案包含了最小化的 <code>/bin</code>、<code>/sbin</code> 和 <code>/etc</code> 目录以及内核模块，还有 <code>/scripts</code> 中的一些文件。所有这些看起来都很熟悉，因为 <code>initrd</code> 大致上是一个简单的最小化 Linux 根文件系统。看似相似，其实不然，因为位于虚拟内存盘中的 <code>/bin</code> 和 <code>/sbin</code> 目录下的所有可执行文件几乎都是指向 <a href=\"https://www.mjmwired.net/kernel/Documentation/acpi/initrd_table_override.txt\">BusyBox 二进制文件</a> 的符号链接，由此导致 <code>/bin</code> 和 <code>/sbin</code> 目录比 glibc 的小 10 倍。</p>\n<p>如果要做的只是加载一些模块，然后在普通的根文件系统上启动 <code>init</code>，为什么还要创建一个 <code>initrd</code> 呢？想想一个加密的根文件系统，解密可能依赖于加载一个位于根文件系统 <code>/lib/modules</code> 的内核模块，当然还有 <code>initrd</code> 中的。加密模块可能被静态地编译到内核中，而不是从文件加载，但有多种原因不希望这样做。例如，用模块静态编译内核可能会使其太大而不能适应存储空间，或者静态编译可能会违反软件许可条款。不出所料，存储、网络和人类输入设备（HID）驱动程序也可能存在于 <code>initrd</code> 中。<code>initrd</code> 基本上包含了任何挂载根文件系统所必需的非内核代码。<code>initrd</code> 也是用户存放 <a href=\"https://www.mjmwired.net/kernel/Documentation/acpi/initrd_table_override.txt\">自定义ACPI</a> 表代码的地方。</p>\n<p><img class=\"aligncenter\" title=\"Rescue shell and a custom &lt;code&gt;initrd&lt;/code&gt;.\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/610e633892133afdd175eab9e33620d8.png\" alt=\"Rescue shell and a custom &lt;code&gt;initrd&lt;/code&gt;.\"></p>\n<p style=\"text-align: center\"><em>救援模式的 shell 和自定义的 <code>initrd</code> 还是很有意思的。</em></p>\n<p><code>initrd</code> 对测试文件系统和数据存储设备也很有用。将这些测试工具存放在 <code>initrd</code> 中，并从内存中运行测试，而不是从被测对象中运行。</p>\n<p>最后，当 <code>init</code> 开始运行时，系统就启动啦！由于第二个处理器现在在运行，机器已经成为我们所熟知和喜爱的异步、可抢占、不可预测和高性能的生物。的确，<code>ps -o pid,psr,comm -p 1</code> 很容易显示用户空间的 <code>init</code> 进程已不在引导处理器上运行了。</p>\n<h3 id=\"toc_11\">总结</h3>\n<p>Linux 引导过程听起来或许令人生畏，即使是简单嵌入式设备上的软件数量也是如此。但换个角度来看，启动过程相当简单，因为启动中没有抢占、RCU 和竞争条件等扑朔迷离的复杂功能。只关注内核和 PID 1 会忽略了引导程序和辅助处理器为运行内核执行的大量准备工作。虽然内核在 Linux 程序中是独一无二的，但通过一些检查 ELF 文件的工具也可以了解其结构。学习一个正常的启动过程，可以帮助运维人员处理启动的故障。</p>\n<p>要了解更多信息，请参阅 Alison Chaiken 的演讲——<a href=\"https://rego.linux.conf.au/schedule/presentation/16/\">Linux: The first second</a>，已于 1 月 22 日至 26 日在悉尼举行。参见 <a href=\"https://linux.conf.au/index.html\">linux.conf.au</a>。</p>\n<p>感谢 <a href=\"http://shallowsky.com/\">Akkana Peck</a> 的提议和指正。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113768\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113768votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113768\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 5 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>\r\n\t<!-- END .entry -->\r\n\r\n\r\n<script type=\"text/javascript\">\r\nvar jiathis_config={\r\n\tdata_track_clickback:false,\r\n\ttitle:\"分享从伯乐在线看到的一篇好文章 \",\r\n\tsummary:\"《Linux 启动过程分析》\",\r\n\tpic:\"http://jbcdn2.b0.upaiyun.com/2018/01/1b8322e1daff605d71fc81e724421f17.jpg\",\r\n\tappkey:{\r\n         \"tsina\": 1473879058    },\r\n\tralateuid:{\r\n\t\t\"tsina\": 1670481425\t},\r\n\thideMore:false\r\n}\r\n</script>\r\n<script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js?uid=1745061\" charset=\"utf-8\"></script>\r\n<!-- JiaThis Button END -->\r\n\t\t\t<div class=\"textwidget\"><p><a href=\"http://group.jobbole.com/22945/\" target=\"_blank\"><img src=\"http://wx1.sinaimg.cn/mw690/bfdcef89gy1fq547hqqaij20h803cgm9.jpg\"></a></p>\n</div>\n\t\t\r\n</div>\r\n<!-- END .post -->\r\n            <div style=\"text-align: left;\">\r\n            <h3>相关文章</h3>\r\n            <ul style=\"font-size: 13px; list-style: disc inside;\">\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"给初学者的 type 命令教程\" target=\"_blank\" href=\"http://blog.jobbole.com/113817/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">给初学者的 type 命令教程</a>\r\n                         · <a href=\"http://blog.jobbole.com/113817/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 1</a>                    </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"为初学者准备的 ln 命令教程（5 个示例）\" target=\"_blank\" href=\"http://blog.jobbole.com/113800/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">为初学者准备的 ln 命令教程（5 个示例）</a>\r\n                                            </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"如何在 Linux 上安装应用程序\" target=\"_blank\" href=\"http://blog.jobbole.com/113793/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">如何在 Linux 上安装应用程序</a>\r\n                         · <a href=\"http://blog.jobbole.com/113793/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 1</a>                    </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"Linux 中的“大内存页”（hugepage）是个什么？\" target=\"_blank\" href=\"http://blog.jobbole.com/113782/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">Linux 中的“大内存页”（hugepage）是个什么？</a>\r\n                                            </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"du 及 df 命令的使用（附带示例）\" target=\"_blank\" href=\"http://blog.jobbole.com/113780/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">du 及 df 命令的使用（附带示例）</a>\r\n                                            </span>\r\n                    </li>\r\n                            </ul>\r\n        </div>\r\n    \r\n    \n<div style=\"text-align: left;\">\n    <h3>可能感兴趣的话题</h3>\n    <ul style=\"font-size: 13px; list-style: disc inside;\">\n                        <li>\n                    <a href=\"http://group.jobbole.com/33039/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"Eng  ---  React ,Vue ,Angular全家桶套餐外的另一种超轻量级实现方式 (16kb)\" target=\"_blank\">Eng  ---  React ,Vue ,Angular全家桶套餐外的另一种超轻量级实...</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/33038/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"28岁刚入门，靠谱不？\" target=\"_blank\">28岁刚入门，靠谱不？</a>\n                     · <a href=\"http://group.jobbole.com/33038/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 7</a>                </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32985/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"工作四年，该如何晋级架构师？\" target=\"_blank\">工作四年，该如何晋级架构师？</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32958/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"java 的nio和网络编程nio 的区别\" target=\"_blank\">java 的nio和网络编程nio 的区别</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32933/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"工作压力大，然后出错多。。然后工作压力大。该怎么调整自己的状态……\" target=\"_blank\">工作压力大，然后出错多。。然后工作压力大。该怎么调整自己的状态……</a>\n                     · <a href=\"http://group.jobbole.com/32933/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 5</a>                </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32879/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"是去北上广深闯几年还是留在二线城市？\" target=\"_blank\">是去北上广深闯几年还是留在二线城市？</a>\n                     · <a href=\"http://group.jobbole.com/32879/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 2</a>                </li>\n                </ul>\n</div>\r\n\t\n            <div id=\"article-comment\" class=\"dot-box center-align\">\n\n                        <a href=\"http://www.jobbole.com/login?redirect=http://blog.jobbole.com/113768/\"><button type=\"button\" class=\"btn btn-non-transparent\">登录后评论</button></a>\n            \n            <a target=\"_blank\" href=\"http://www.jobbole.com/register\"><button type=\"button\" class=\"btn btn-primary\">新用户注册</button></a>\n\n            <br><br>\n            <span>直接登录</span>\n            <style type=\"text/css\">.t_login_text{margin:0; padding:0;}.t_login_button{margin:0; padding: 5px 0;}.t_login_button a{margin:0; padding-right:3px; line-height:25px}.t_login_button img{display:inline; border:none;}</style><!-- 使用社交帐号登录 来自 WordPress连接微博 插件 --><span class=\"connectBox1 t_login_button\"><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=weixin&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113768%2F\" title=\"微信\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_weixin.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=qzone&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113768%2F\" title=\"QQ\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_qzone.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=sina&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113768%2F\" title=\"新浪微博\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_sina.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=douban&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113768%2F\" title=\"豆瓣\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_douban.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=github&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113768%2F\" title=\"GitHub\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_github.png\"></a></span>        </div>\n    \n\n    <div id=\"comment_list\" class=\"comments\">\n\n                    <h5 id=\"comments\" class=\"sub-title\"><i class=\"glyphicon\"></i>最新评论</h5>\n            <ul class=\"cmnt-list\">\n\n                        <li id=\"comment-162376\" class=\"comment cmnt odd\">\n    \n    <div class=\"cmnt-box\">\n        <div class=\"cmnt-header\">\n                            <a href=\"http://www.jobbole.com/members/q4066793751\" class=\"cmnt-img\"><img width=\"37\" height=\"37\" src=\"http://q.qlogo.cn/qqapp/208656/786427CB086A3E9D96847EC7398A10B3/100\" alt=\"\"></a>\n                <div class=\"cmnt-meta\">\n                    <span><a href=\"http://www.jobbole.com/members/q4066793751\">┾Bad guy ゞ°</a><label class=\"comment_author_data\"> </label></span>\n                    <span class=\"c-title\">\n                                             </span>\n\n                    <span class=\"c-date\">\n                        <a href=\"http://blog.jobbole.com/113768/#comment-162376\">6 天前</a>\n                    </span>\n\n                    \n                    \n                </div>\n                    </div>\n        <div class=\"cmnt-body\">\n            <p>\n                </p><p>说的太好了</p>\n            \n                    </div>\n                    <div class=\"cmnt-footer\">\n\n                \n                <p class=\"c-like\">\n                    <a title=\"赞同\" alt=\"赞同\" class=\"162376voteflag  t-up  href-style vote-comment-up  register-user-only   \" data-comment-id=\"162376\"><i class=\"fa fa-thumbs-o-up\"></i> <span id=\"162376voteuptotal\"> 赞</span></a>\n\n                    \n                    <a rel=\"nofollow\" class=\"comment-reply-link register-user-only\" href=\"http://blog.jobbole.com/113768/?replytocom=162376#respond\" data-onclick='return addComment.moveForm( \"comment-162376\", \"162376\", \"respond\", \"113768\" )' aria-label=\"回复给┾Bad guy ゞ°\">回复 <i class=\"fa fa-reply\"></i></a>\n                </p>\n            </div>\n            </div>\n    </li>\n<!-- #comment-## -->\n            </ul>\n        \n    </div>\n\t\t\r\n\r\n\t\r\n</div>", "tag": "IT技术-Linux", "url": "http://blog.jobbole.com/113768/", "url_object_id": "20d0b326ed26dff7f3c5708bdf46c1a5", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/01/1b8322e1daff605d71fc81e724421f17.jpg"], "front_image_path": "full/14452eea6b79bce0219227f298ad827f2ba7112d.jpg"}
{"title": "Linux 中的“大内存页”（hugepage）是个什么？", "create_date": "2018/03/24", "praise_nums": "1", "fav_nums": "1", "comments_nums": "0", "content": "<div class=\"grid-8\">\r\n\r\n\t\t\r\n\t<!-- BEGIN .post -->\r\n<div class=\"post-113782 post type-post status-publish format-standard hentry category-it-tech tag-linux odd\" id=\"post-113782\">\r\n\t\r\n\t<!-- BEGIN .entry-header -->\r\n\t<div class=\"entry-header\">\r\n\t\r\n\t\t\t\t\r\n\t\t<h1>Linux 中的“大内存页”（hugepage）是个什么？</h1>\r\n\t\t\r\n\t\t\t\t\t\t\t\r\n\t</div>\r\n\t<!-- BEGIN .entry-header -->\r\n\t\r\n\t<!-- BEGIN .entry-meta -->\r\n\t<div class=\"entry-meta\">\r\n\t\r\n\t\t<p class=\"entry-meta-hide-on-mobile\">\r\n\r\n            2018/03/24 ·  <a href=\"http://blog.jobbole.com/category/it-tech/\" rel=\"category tag\">IT技术</a>\r\n            \r\n            \r\n\r\n            \r\n             ·  <a href=\"http://blog.jobbole.com/tag/linux/\">Linux</a>\r\n            \r\n</p>\r\n\r\n<!-- JiaThis Button BEGIN -->\r\n<div class=\"jiathis_style\" style=\"display: block; margin: 0 0px; clear: both;\"><span class=\"jiathis_txt\">分享到：</span>\r\n<a class=\"jiathis_button_tsina\"></a>\r\n<a class=\"jiathis_button_weixin\"></a>\r\n<a class=\"jiathis_button_qzone\"></a>\r\n<a class=\"jiathis_button_fb\"></a>\r\n<a class=\"jiathis_button_douban\"></a>\r\n<a class=\"jiathis_button_readitlater\"></a>\r\n<a class=\"jiathis_button_evernote\"></a>\r\n<a class=\"jiathis_button_ydnote\"></a>\r\n<a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\r\n<a class=\"jiathis_counter_style\"></a>\r\n</div>\r\n<!-- JiaThis Button END -->\r\n\r\n\r\n\t</div>\r\n\t<!-- END .entry-meta -->\r\n\r\n\t<!-- BEGIN .entry -->\r\n\t<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://kerneltalks.com/services/what-is-huge-pages-in-linux/\">Shrikant Lavhate</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9450-1.html\">Linux中国/DarkSun</a>   </div><blockquote><p>学习 Linux 中的大内存页hugepage。理解什么是“大内存页”，如何进行配置，如何查看当前状态以及如何禁用它。</p></blockquote>\n<p>本文中我们会详细介绍大内存页huge page，让你能够回答：Linux 中的“大内存页”是什么？在 RHEL6、RHEL7、Ubuntu 等 Linux 中，如何启用/禁用“大内存页”？如何查看“大内存页”的当前值？</p>\n<p>首先让我们从“大内存页”的基础知识开始讲起。</p>\n<h3 id=\"toc_1\">Linux 中的“大内存页”是个什么玩意？</h3>\n<p>“大内存页”有助于 Linux 系统进行虚拟内存管理。顾名思义，除了标准的 4KB 大小的页面外，它们还能帮助管理内存中的巨大的页面。使用“大内存页”，你最大可以定义 1GB 的页面大小。</p>\n<p>在系统启动期间，你能用“大内存页”为应用程序预留一部分内存。这部分内存，即被“大内存页”占用的这些存储器永远不会被交换出内存。它会一直保留其中，除非你修改了配置。这会极大地提高像 Oracle 数据库这样的需要海量内存的应用程序的性能。</p>\n<h3 id=\"toc_2\">为什么使用“大内存页”？</h3>\n<p>在虚拟内存管理中，内核维护一个将虚拟内存地址映射到物理地址的表，对于每个页面操作，内核都需要加载相关的映射。如果你的内存页很小，那么你需要加载的页就会很多，导致内核会加载更多的映射表。而这会降低性能。</p>\n<p>使用“大内存页”，意味着所需要的页变少了。从而大大减少由内核加载的映射表的数量。这提高了内核级别的性能最终有利于应用程序的性能。</p>\n<p>简而言之，通过启用“大内存页”，系统具只需要处理较少的页面映射表，从而减少访问/维护它们的开销！</p>\n<h3 id=\"toc_3\">如何配置“大内存页”？</h3>\n<p>运行下面命令来查看当前“大内存页”的详细内容。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a3737643a273512726\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nroot@kerneltalks # grep Huge /proc/meminfo\r\nAnonHugePages:         0 kB\r\nHugePages_Total:       0\r\nHugePages_Free:        0\r\nHugePages_Rsvd:        0\r\nHugePages_Surp:        0\r\nHugepagesize:       2048 kB\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a3737643a273512726-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a3737643a273512726-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a3737643a273512726-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a3737643a273512726-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a3737643a273512726-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a3737643a273512726-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a3737643a273512726-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a3737643a273512726-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a3737643a273512726-1\"><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">kerneltalks</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># grep Huge /proc/meminfo</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a3737643a273512726-2\"><span class=\"crayon-v\">AnonHugePages</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">         </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">kB</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a3737643a273512726-3\"><span class=\"crayon-v\">HugePages_Total</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a3737643a273512726-4\"><span class=\"crayon-v\">HugePages_Free</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a3737643a273512726-5\"><span class=\"crayon-v\">HugePages_Rsvd</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a3737643a273512726-6\"><span class=\"crayon-v\">HugePages_Surp</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a3737643a273512726-7\"><span class=\"crayon-v\">Hugepagesize</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">2048</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kB</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a3737643a273512726-8\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0019 seconds] -->\r\n<p>从上面输出可以看到，每个页的大小为 2MB（<code>Hugepagesize</code>），并且系统中目前有 <code>0</code> 个“大内存页”（<code>HugePages_Total</code>）。这里“大内存页”的大小可以从 <code>2MB</code> 增加到 <code>1GB</code>。</p>\n<p>运行下面的脚本可以知道系统当前需要多少个巨大页。该脚本取之于 Oracle。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a37376446798526835\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n#!/bin/bash\r\n#\r\n# hugepages_settings.sh\r\n#\r\n# Linux bash script to compute values for the\r\n# recommended HugePages/HugeTLB configuration\r\n#\r\n# Note: This script does calculation for all shared memory\r\n# segments available when the script is run, no matter it\r\n# is an Oracle RDBMS shared memory segment or not.\r\n# Check for the kernel version\r\nKERN=`uname -r | awk -F. '{ printf(\"%d.%d\\n\",$1,$2); }'`\r\n# Find out the HugePage size\r\nHPG_SZ=`grep Hugepagesize /proc/meminfo | awk {'print $2'}`\r\n# Start from 1 pages to be on the safe side and guarantee 1 free HugePage\r\nNUM_PG=1\r\n# Cumulative number of pages required to handle the running shared memory segments\r\nfor SEG_BYTES in `ipcs -m | awk {'print $5'} | grep \"[0-9][0-9]*\"`\r\ndo\r\n   MIN_PG=`echo \"$SEG_BYTES/($HPG_SZ*1024)\" | bc -q`\r\n   if [ $MIN_PG -gt 0 ]; then\r\n      NUM_PG=`echo \"$NUM_PG+$MIN_PG+1\" | bc -q`\r\n   fi\r\ndone\r\n# Finish with results\r\ncase $KERN in\r\n   '2.4') HUGETLB_POOL=`echo \"$NUM_PG*$HPG_SZ/1024\" | bc -q`;\r\n          echo \"Recommended setting: vm.hugetlb_pool = $HUGETLB_POOL\" ;;\r\n   '2.6' | '3.8' | '3.10' | '4.1' ) echo \"Recommended setting: vm.nr_hugepages = $NUM_PG\" ;;\r\n    *) echo \"Unrecognized kernel version $KERN. Exiting.\" ;;\r\nesac\r\n# End\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a37376446798526835-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37376446798526835-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37376446798526835-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37376446798526835-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37376446798526835-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37376446798526835-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37376446798526835-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37376446798526835-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37376446798526835-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37376446798526835-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37376446798526835-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37376446798526835-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37376446798526835-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37376446798526835-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37376446798526835-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37376446798526835-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37376446798526835-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37376446798526835-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37376446798526835-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37376446798526835-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37376446798526835-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37376446798526835-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37376446798526835-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37376446798526835-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37376446798526835-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37376446798526835-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37376446798526835-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37376446798526835-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37376446798526835-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37376446798526835-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37376446798526835-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37376446798526835-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37376446798526835-33\">33</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a37376446798526835-1\"><span class=\"crayon-p\">#!/bin/bash</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37376446798526835-2\"><span class=\"crayon-p\">#</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37376446798526835-3\"><span class=\"crayon-p\"># hugepages_settings.sh</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37376446798526835-4\"><span class=\"crayon-p\">#</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37376446798526835-5\"><span class=\"crayon-p\"># Linux bash script to compute values for the</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37376446798526835-6\"><span class=\"crayon-p\"># recommended HugePages/HugeTLB configuration</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37376446798526835-7\"><span class=\"crayon-p\">#</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37376446798526835-8\"><span class=\"crayon-p\"># Note: This script does calculation for all shared memory</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37376446798526835-9\"><span class=\"crayon-p\"># segments available when the script is run, no matter it</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37376446798526835-10\"><span class=\"crayon-p\"># is an Oracle RDBMS shared memory segment or not.</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37376446798526835-11\"><span class=\"crayon-p\"># Check for the kernel version</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37376446798526835-12\"><span class=\"crayon-v\">KERN</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">uname</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">r</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">awk</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">F</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'{ printf(\"%d.%d\\n\",$1,$2); }'</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37376446798526835-13\"><span class=\"crayon-p\"># Find out the HugePage size</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37376446798526835-14\"><span class=\"crayon-v\">HPG_SZ</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">`</span><span class=\"crayon-e\">grep </span><span class=\"crayon-v\">Hugepagesize</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">proc</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">meminfo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">awk</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'print $2'</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37376446798526835-15\"><span class=\"crayon-p\"># Start from 1 pages to be on the safe side and guarantee 1 free HugePage</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37376446798526835-16\"><span class=\"crayon-v\">NUM_PG</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37376446798526835-17\"><span class=\"crayon-p\"># Cumulative number of pages required to handle the running shared memory segments</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37376446798526835-18\"><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">SEG_BYTES </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">ipcs</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">m</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">awk</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-s\">'print $5'</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">grep</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"[0-9][0-9]*\"</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37376446798526835-19\"><span class=\"crayon-st\">do</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37376446798526835-20\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">MIN_PG</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">`</span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"$SEG_BYTES/($HPG_SZ*1024)\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">q</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37376446798526835-21\"><span class=\"crayon-h\">   </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">MIN_PG</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">gt</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">then</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37376446798526835-22\"><span class=\"crayon-h\">      </span><span class=\"crayon-v\">NUM_PG</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">`</span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"$NUM_PG+$MIN_PG+1\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">q</span><span class=\"crayon-sy\">`</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37376446798526835-23\"><span class=\"crayon-h\">   </span><span class=\"crayon-e\">fi</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37376446798526835-24\"><span class=\"crayon-v\">done</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37376446798526835-25\"><span class=\"crayon-p\"># Finish with results</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37376446798526835-26\"><span class=\"crayon-st\">case</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-e\">KERN </span><span class=\"crayon-st\">in</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37376446798526835-27\"><span class=\"crayon-h\">   </span><span class=\"crayon-s\">'2.4'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">HUGETLB_POOL</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">`</span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"$NUM_PG*$HPG_SZ/1024\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">q</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37376446798526835-28\"><span class=\"crayon-h\">          </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Recommended setting: vm.hugetlb_pool = $HUGETLB_POOL\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">;</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37376446798526835-29\"><span class=\"crayon-h\">   </span><span class=\"crayon-s\">'2.6'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'3.8'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'3.10'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'4.1'</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Recommended setting: vm.nr_hugepages = $NUM_PG\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">;</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37376446798526835-30\"><span class=\"crayon-h\">    </span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"Unrecognized kernel version $KERN. Exiting.\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">;</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37376446798526835-31\"><span class=\"crayon-v\">esac</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37376446798526835-32\"><span class=\"crayon-p\"># End</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37376446798526835-33\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0101 seconds] -->\r\n<p>将它以 <code>hugepages_settings.sh</code> 为名保存到 <code>/tmp</code> 中，然后运行之：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a3737644b120047369\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nroot@kerneltalks # sh /tmp/hugepages_settings.sh\r\nRecommended setting: vm.nr_hugepages = 124\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a3737644b120047369-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a3737644b120047369-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a3737644b120047369-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a3737644b120047369-1\"><span class=\"crayon-v\">root</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">kerneltalks</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># sh /tmp/hugepages_settings.sh</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a3737644b120047369-2\"><span class=\"crayon-e\">Recommended </span><span class=\"crayon-v\">setting</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">vm</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">nr_hugepages</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">124</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a3737644b120047369-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>你的输出类似如上结果，只是数字会有一些出入。</p>\n<p>这意味着，你系统需要 124 个每个 2MB 的“大内存页”！若你设置页面大小为 4MB，则结果就变成了 62。你明白了吧？</p>\n<h3 id=\"toc_4\">配置内核中的“大内存页”</h3>\n<p>本文最后一部分内容是配置上面提到的 <a href=\"https://kerneltalks.com/linux/how-to-tune-kernel-parameters-in-linux/\">内核参数 </a> ，然后重新加载。将下面内容添加到 <code>/etc/sysctl.conf</code> 中，然后输入 <code>sysctl -p</code> 命令重新加载配置。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a3737644f177925075\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nvm.nr_hugepages=126\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a3737644f177925075-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a3737644f177925075-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a3737644f177925075-1\"><span class=\"crayon-v\">vm</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">nr_hugepages</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">126</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a3737644f177925075-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>注意我们这里多加了两个额外的页，因为我们希望在实际需要的页面数量之外多一些额外的空闲页。</p>\n<p>现在，内核已经配置好了，但是要让应用能够使用这些“大内存页”还需要提高内存的使用阀值。新的内存阀值应该为 126 个页 x 每个页 2 MB = 252 MB，也就是 258048 KB。</p>\n<p>你需要编辑 <code>/etc/security/limits.conf</code> 中的如下配置：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a37376453494783395\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsoft memlock 258048\r\nhard memlock 258048\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a37376453494783395-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37376453494783395-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37376453494783395-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a37376453494783395-1\"><span class=\"crayon-e\">soft </span><span class=\"crayon-i\">memlock</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">258048</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37376453494783395-2\"><span class=\"crayon-e\">hard </span><span class=\"crayon-i\">memlock</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">258048</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37376453494783395-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>某些情况下，这些设置是在指定应用的文件中配置的，比如 Oracle DB 就是在 <code>/etc/security/limits.d/99-grid-oracle-limits.conf</code> 中配置的。</p>\n<p>这就完成了！你可能还需要重启应用来让应用来使用这些新的巨大页。</p>\n<p>（LCTT 译注：此外原文有误，“透明大内存页”和“大内存页”不同，而且，在 Redhat 系统中，“大内存页” 不是默认启用的，而“透明大内存页”是启用的。因此这个段落删除了。）</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113782\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113782votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113782\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>\r\n\t<!-- END .entry -->\r\n\r\n\r\n<script type=\"text/javascript\">\r\nvar jiathis_config={\r\n\tdata_track_clickback:false,\r\n\ttitle:\"分享从伯乐在线看到的一篇好文章 \",\r\n\tsummary:\"《Linux 中的“大内存页”（hugepage）是个什么？》\",\r\n\tpic:\"http://jbcdn2.b0.upaiyun.com/2018/01/1b8322e1daff605d71fc81e724421f17.jpg\",\r\n\tappkey:{\r\n         \"tsina\": 1473879058    },\r\n\tralateuid:{\r\n\t\t\"tsina\": 1670481425\t},\r\n\thideMore:false\r\n}\r\n</script>\r\n<script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js?uid=1745061\" charset=\"utf-8\"></script>\r\n<!-- JiaThis Button END -->\r\n\t\t\t<div class=\"textwidget\"><p><a href=\"http://group.jobbole.com/22945/\" target=\"_blank\"><img src=\"http://wx1.sinaimg.cn/mw690/bfdcef89gy1fq547hqqaij20h803cgm9.jpg\"></a></p>\n</div>\n\t\t\r\n</div>\r\n<!-- END .post -->\r\n            <div style=\"text-align: left;\">\r\n            <h3>相关文章</h3>\r\n            <ul style=\"font-size: 13px; list-style: disc inside;\">\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"给初学者的 type 命令教程\" target=\"_blank\" href=\"http://blog.jobbole.com/113817/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">给初学者的 type 命令教程</a>\r\n                         · <a href=\"http://blog.jobbole.com/113817/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 1</a>                    </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"为初学者准备的 ln 命令教程（5 个示例）\" target=\"_blank\" href=\"http://blog.jobbole.com/113800/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">为初学者准备的 ln 命令教程（5 个示例）</a>\r\n                                            </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"如何在 Linux 上安装应用程序\" target=\"_blank\" href=\"http://blog.jobbole.com/113793/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">如何在 Linux 上安装应用程序</a>\r\n                         · <a href=\"http://blog.jobbole.com/113793/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 1</a>                    </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"du 及 df 命令的使用（附带示例）\" target=\"_blank\" href=\"http://blog.jobbole.com/113780/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">du 及 df 命令的使用（附带示例）</a>\r\n                                            </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"Linux 新用户？来试试这 8 款重要的软件\" target=\"_blank\" href=\"http://blog.jobbole.com/113775/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">Linux 新用户？来试试这 8 款重要的软件</a>\r\n                                            </span>\r\n                    </li>\r\n                            </ul>\r\n        </div>\r\n    \r\n    \n<div style=\"text-align: left;\">\n    <h3>可能感兴趣的话题</h3>\n    <ul style=\"font-size: 13px; list-style: disc inside;\">\n                        <li>\n                    <a href=\"http://group.jobbole.com/33039/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"Eng  ---  React ,Vue ,Angular全家桶套餐外的另一种超轻量级实现方式 (16kb)\" target=\"_blank\">Eng  ---  React ,Vue ,Angular全家桶套餐外的另一种超轻量级实...</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/33038/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"28岁刚入门，靠谱不？\" target=\"_blank\">28岁刚入门，靠谱不？</a>\n                     · <a href=\"http://group.jobbole.com/33038/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 7</a>                </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32985/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"工作四年，该如何晋级架构师？\" target=\"_blank\">工作四年，该如何晋级架构师？</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32958/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"java 的nio和网络编程nio 的区别\" target=\"_blank\">java 的nio和网络编程nio 的区别</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32933/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"工作压力大，然后出错多。。然后工作压力大。该怎么调整自己的状态……\" target=\"_blank\">工作压力大，然后出错多。。然后工作压力大。该怎么调整自己的状态……</a>\n                     · <a href=\"http://group.jobbole.com/32933/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 5</a>                </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32879/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"是去北上广深闯几年还是留在二线城市？\" target=\"_blank\">是去北上广深闯几年还是留在二线城市？</a>\n                     · <a href=\"http://group.jobbole.com/32879/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 2</a>                </li>\n                </ul>\n</div>\r\n\t\n            <div id=\"article-comment\" class=\"dot-box center-align\">\n\n                        <a href=\"http://www.jobbole.com/login?redirect=http://blog.jobbole.com/113782/\"><button type=\"button\" class=\"btn btn-non-transparent\">登录后评论</button></a>\n            \n            <a target=\"_blank\" href=\"http://www.jobbole.com/register\"><button type=\"button\" class=\"btn btn-primary\">新用户注册</button></a>\n\n            <br><br>\n            <span>直接登录</span>\n            <style type=\"text/css\">.t_login_text{margin:0; padding:0;}.t_login_button{margin:0; padding: 5px 0;}.t_login_button a{margin:0; padding-right:3px; line-height:25px}.t_login_button img{display:inline; border:none;}</style><!-- 使用社交帐号登录 来自 WordPress连接微博 插件 --><span class=\"connectBox1 t_login_button\"><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=weixin&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113782%2F\" title=\"微信\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_weixin.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=qzone&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113782%2F\" title=\"QQ\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_qzone.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=sina&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113782%2F\" title=\"新浪微博\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_sina.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=douban&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113782%2F\" title=\"豆瓣\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_douban.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=github&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113782%2F\" title=\"GitHub\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_github.png\"></a></span>        </div>\n    \n\n    <div id=\"comment_list\" class=\"comments\">\n\n        \n    </div>\n\t\t\r\n\r\n\t\r\n</div>", "tag": "IT技术-Linux", "url": "http://blog.jobbole.com/113782/", "url_object_id": "ab0322e9007276c76fe370fbf4a95a33", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2018/01/1b8322e1daff605d71fc81e724421f17.jpg"], "front_image_path": "full/14452eea6b79bce0219227f298ad827f2ba7112d.jpg"}
{"title": "深入学习 Redis（1）：Redis 内存模型", "create_date": "2018/03/27", "praise_nums": "3", "fav_nums": "2", "comments_nums": "3", "content": "<div class=\"grid-8\">\r\n\r\n\t\t\r\n\t<!-- BEGIN .post -->\r\n<div class=\"post-113789 post type-post status-publish format-standard hentry category-it-tech tag-redis tag-database odd\" id=\"post-113789\">\r\n\t\r\n\t<!-- BEGIN .entry-header -->\r\n\t<div class=\"entry-header\">\r\n\t\r\n\t\t\t\t\r\n\t\t<h1>深入学习 Redis（1）：Redis 内存模型</h1>\r\n\t\t\r\n\t\t\t\t\t\t\t\r\n\t</div>\r\n\t<!-- BEGIN .entry-header -->\r\n\t\r\n\t<!-- BEGIN .entry-meta -->\r\n\t<div class=\"entry-meta\">\r\n\t\r\n\t\t<p class=\"entry-meta-hide-on-mobile\">\r\n\r\n            2018/03/27 ·  <a href=\"http://blog.jobbole.com/category/it-tech/\" rel=\"category tag\">IT技术</a>\r\n            \r\n                            · <a href=\"#article-comment\"> 3 评论 </a>\r\n            \r\n\r\n            \r\n             ·  <a href=\"http://blog.jobbole.com/tag/redis/\">Redis</a>, <a href=\"http://blog.jobbole.com/tag/database/\">数据库</a>\r\n            \r\n</p>\r\n\r\n<!-- JiaThis Button BEGIN -->\r\n<div class=\"jiathis_style\" style=\"display: block; margin: 0 0px; clear: both;\"><span class=\"jiathis_txt\">分享到：</span>\r\n<a class=\"jiathis_button_tsina\"></a>\r\n<a class=\"jiathis_button_weixin\"></a>\r\n<a class=\"jiathis_button_qzone\"></a>\r\n<a class=\"jiathis_button_fb\"></a>\r\n<a class=\"jiathis_button_douban\"></a>\r\n<a class=\"jiathis_button_readitlater\"></a>\r\n<a class=\"jiathis_button_evernote\"></a>\r\n<a class=\"jiathis_button_ydnote\"></a>\r\n<a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\r\n<a class=\"jiathis_counter_style\"></a>\r\n</div>\r\n<!-- JiaThis Button END -->\r\n\r\n\r\n\t</div>\r\n\t<!-- END .entry-meta -->\r\n\r\n\t<!-- BEGIN .entry -->\r\n\t<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"http://www.cnblogs.com/kismetv/p/8654978.html\">编程迷思</a>   </div><h2>前言</h2>\n<p>Redis是目前最火爆的内存数据库之一，通过在内存中读写数据，大大提高了读写速度，可以说Redis是实现网站高并发不可或缺的一部分。</p>\n<p>我们使用Redis时，会接触Redis的5种对象类型（字符串、哈希、列表、集合、有序集合），丰富的类型是Redis相对于Memcached等的一大优势。在了解Redis的5种对象类型的用法和特点的基础上，进一步了解Redis的内存模型，对Redis的使用有很大帮助，例如：</p>\n<p>1、估算Redis内存使用量。目前为止，内存的使用成本仍然相对较高，使用内存不能无所顾忌；根据需求合理的评估Redis的内存使用量，选择合适的机器配置，可以在满足需求的情况下节约成本。</p>\n<p>2、优化内存占用。了解Redis内存模型可以选择更合适的数据类型和编码，更好的利用Redis内存。</p>\n<p>3、分析解决问题。当Redis出现阻塞、内存占用等问题时，尽快发现导致问题的原因，便于分析解决问题。</p>\n<p>这篇文章主要介绍Redis的内存模型（以3.0为例），包括Redis占用内存的情况及如何查询、不同的对象类型在内存中的编码方式、内存分配器(jemalloc)、简单动态字符串(SDS)、RedisObject等；然后在此基础上介绍几个Redis内存模型的应用。</p>\n<p>在后面的文章中，会陆续介绍关于Redis高可用的内容，包括主从复制、哨兵、集群等等，欢迎关注。</p>\n<p> </p>\n<h2>目录</h2>\n<p><a href=\"#t1\">一、Redis内存统计</a></p>\n<p><a href=\"#t2\">二、Redis内存划分</a></p>\n<p><a href=\"#t21\">1、数据（或者称为对象）</a></p>\n<p><a href=\"#t22\">2、进程本身运行需要的内存</a></p>\n<p><a href=\"#t23\">3、缓冲内存</a></p>\n<p><a href=\"#t24\">4、内存碎片</a></p>\n<p><a href=\"#t3\">三、Redis数据存储的细节</a></p>\n<p><a href=\"#t31\">1、概述</a></p>\n<p><a href=\"#t32\">2、jemalloc</a></p>\n<p><a href=\"#t33\">3、redisObject</a></p>\n<p><a href=\"#t34\">4、SDS</a></p>\n<p><a href=\"#t4\">四、Redis的对象类型与内部编码</a></p>\n<p><a href=\"#t41\">1、字符串</a></p>\n<p><a href=\"#t42\">2、列表</a></p>\n<p><a href=\"#t43\">3、哈希</a></p>\n<p><a href=\"#t44\">4、集合</a></p>\n<p><a href=\"#t45\">5、有序集合</a></p>\n<p><a href=\"#t5\">五、应用举例</a></p>\n<p><a href=\"#t51\">1、估算Redis内存使用量</a></p>\n<p><a href=\"#t52\">2、优化内存占用</a></p>\n<p><a href=\"#t53\">3、关注内存碎片率</a></p>\n<p><a href=\"#t6\">六、参考文献</a></p>\n<h1><a name=\"t1\"></a>一、Redis内存统计</h1>\n<p>工欲善其事必先利其器，在说明Redis内存之前首先说明如何统计Redis使用内存的情况。</p>\n<p>在客户端通过redis-cli连接服务器后（后面如无特殊说明，客户端一律使用redis-cli），通过info命令可以查看内存使用情况：</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a37355afc710369885\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ninfo memory</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a37355afc710369885-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a37355afc710369885-1\"><span class=\"crayon-e\">info </span><span class=\"crayon-v\">memory</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n\n</div>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/8c3d1b1af4dea80d14b73aad3232d6c2.png\" alt=\"\"></p>\n<p>其中，info命令可以显示redis服务器的许多信息，包括服务器基本信息、CPU、内存、持久化、客户端连接信息等等；memory是参数，表示只显示内存相关的信息。</p>\n<p>返回结果中比较重要的几个说明如下：</p>\n<p>（1）<strong>used_memory</strong><strong>：</strong>Redis分配器分配的内存总量（单位是字节），包括使用的虚拟内存（即swap）；Redis分配器后面会介绍。used_memory_human只是显示更友好。</p>\n<p>（2）<strong>used_memory_rss</strong><strong>：</strong>Redis进程占据操作系统的内存（单位是字节），与top及ps命令看到的值是一致的；除了分配器分配的内存之外，used_memory_rss还包括进程运行本身需要的内存、内存碎片等，但是不包括虚拟内存。</p>\n<p>因此，used_memory和used_memory_rss，前者是从Redis角度得到的量，后者是从操作系统角度得到的量。二者之所以有所不同，一方面是因为内存碎片和Redis进程运行需要占用内存，使得前者可能比后者小，另一方面虚拟内存的存在，使得前者可能比后者大。</p>\n<p>由于在实际应用中，Redis的数据量会比较大，此时进程运行占用的内存与Redis数据量和内存碎片相比，都会小得多；因此used_memory_rss和used_memory的比例，便成了衡量Redis内存碎片率的参数；这个参数就是mem_fragmentation_ratio。</p>\n<p>（3）<strong>mem_fragmentation_ratio</strong><strong>：</strong>内存碎片比率，该值是used_memory_rss / used_memory的比值。</p>\n<p>mem_fragmentation_ratio一般大于1，且该值越大，内存碎片比例越大。mem_fragmentation_ratio&lt;1，说明Redis使用了虚拟内存，由于虚拟内存的媒介是磁盘，比内存速度要慢很多，当这种情况出现时，应该及时排查，如果内存不足应该及时处理，如增加Redis节点、增加Redis服务器的内存、优化应用等。</p>\n<p>一般来说，mem_fragmentation_ratio在1.03左右是比较健康的状态（对于jemalloc来说）；上面截图中的mem_fragmentation_ratio值很大，是因为还没有向Redis中存入数据，Redis进程本身运行的内存使得used_memory_rss 比used_memory大得多。</p>\n<p>（4）<strong>mem_allocator</strong><strong>：</strong>Redis使用的内存分配器，在编译时指定；可以是 libc 、jemalloc或者tcmalloc，默认是jemalloc；截图中使用的便是默认的jemalloc。</p>\n<h1><a name=\"t2\"></a>二、Redis内存划分</h1>\n<p>Redis作为内存数据库，在内存中存储的内容主要是数据（键值对）；通过前面的叙述可以知道，除了数据以外，Redis的其他部分也会占用内存。</p>\n<p>Redis的内存占用主要可以划分为以下几个部分：</p>\n<h2><a name=\"t21\"></a>1、数据</h2>\n<p>作为数据库，数据是最主要的部分；这部分占用的内存会统计在used_memory中。</p>\n<p>Redis使用键值对存储数据，其中的值（对象）包括5种类型，即字符串、哈希、列表、集合、有序集合。这5种类型是Redis对外提供的，实际上，在Redis内部，每种类型可能有2种或更多的内部编码实现；此外，Redis在存储对象时，并不是直接将数据扔进内存，而是会对对象进行各种包装：如redisObject、SDS等；这篇文章后面将重点介绍Redis中数据存储的细节。</p>\n<h2><a name=\"t22\"></a>2、进程本身运行需要的内存</h2>\n<p>Redis主进程本身运行肯定需要占用内存，如代码、常量池等等；这部分内存大约几兆，在大多数生产环境中与Redis数据占用的内存相比可以忽略。这部分内存不是由jemalloc分配，因此不会统计在used_memory中。</p>\n<p>补充说明：除了主进程外，Redis创建的子进程运行也会占用内存，如Redis执行AOF、RDB重写时创建的子进程。当然，这部分内存不属于Redis进程，也不会统计在used_memory和used_memory_rss中。</p>\n<h2><a name=\"t23\"></a>3、缓冲内存</h2>\n<p>缓冲内存包括客户端缓冲区、复制积压缓冲区、AOF缓冲区等；其中，客户端缓冲存储客户端连接的输入输出缓冲；复制积压缓冲用于部分复制功能；AOF缓冲区用于在进行AOF重写时，保存最近的写入命令。在了解相应功能之前，不需要知道这些缓冲的细节；这部分内存由jemalloc分配，因此会统计在used_memory中。</p>\n<h2><a name=\"t24\"></a>4、内存碎片</h2>\n<p>内存碎片是Redis在分配、回收物理内存过程中产生的。例如，如果对数据的更改频繁，而且数据之间的大小相差很大，可能导致redis释放的空间在物理内存中并没有释放，但redis又无法有效利用，这就形成了内存碎片。内存碎片不会统计在used_memory中。</p>\n<p>内存碎片的产生与对数据进行的操作、数据的特点等都有关；此外，与使用的内存分配器也有关系：如果内存分配器设计合理，可以尽可能的减少内存碎片的产生。后面将要说到的jemalloc便在控制内存碎片方面做的很好。</p>\n<p>如果Redis服务器中的内存碎片已经很大，可以通过安全重启的方式减小内存碎片：因为重启之后，Redis重新从备份文件中读取数据，在内存中进行重排，为每个数据重新选择合适的内存单元，减小内存碎片。</p>\n<h1><a name=\"t3\"></a>三、Redis数据存储的细节</h1>\n<h2><a name=\"t31\"></a>1、概述</h2>\n<p>关于Redis数据存储的细节，涉及到内存分配器（如jemalloc）、简单动态字符串（SDS）、5种对象类型及内部编码、redisObject。在讲述具体内容之前，先说明一下这几个概念之间的关系。</p>\n<p>下图是执行set hello world时，所涉及到的数据模型。</p>\n<p style=\"text-align: center\"><img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/e68530a523ccf27f161597f21994f842.png\" alt=\"\"></p>\n<p style=\"text-align: center\">图片来源：https://searchdatabase.techtarget.com.cn/7-20218/</p>\n<p>（1）dictEntry：Redis是Key-Value数据库，因此对每个键值对都会有一个dictEntry，里面存储了指向Key和Value的指针；next指向下一个dictEntry，与本Key-Value无关。</p>\n<p>（2）Key：图中右上角可见，Key（”hello”）并不是直接以字符串存储，而是存储在SDS结构中。</p>\n<p>（3）redisObject：Value(“world”)既不是直接以字符串存储，也不是像Key一样直接存储在SDS中，而是存储在redisObject中。实际上，不论Value是5种类型的哪一种，都是通过redisObject来存储的；而redisObject中的type字段指明了Value对象的类型，ptr字段则指向对象所在的地址。不过可以看出，字符串对象虽然经过了redisObject的包装，但仍然需要通过SDS存储。</p>\n<p>实际上，redisObject除了type和ptr字段以外，还有其他字段图中没有给出，如用于指定对象内部编码的字段；后面会详细介绍。</p>\n<p>（4）jemalloc：无论是DictEntry对象，还是redisObject、SDS对象，都需要内存分配器（如jemalloc）分配内存进行存储。以DictEntry对象为例，有3个指针组成，在64位机器下占24个字节，jemalloc会为它分配32字节大小的内存单元。</p>\n<p>下面来分别介绍jemalloc、redisObject、SDS、对象类型及内部编码。</p>\n<h2><a name=\"t32\"></a>2、jemalloc</h2>\n<p>Redis在编译时便会指定内存分配器；内存分配器可以是 libc 、jemalloc或者tcmalloc，默认是jemalloc。</p>\n<p>jemalloc作为Redis的默认内存分配器，在减小内存碎片方面做的相对比较好。jemalloc在64位系统中，将内存空间划分为小、大、巨大三个范围；每个范围内又划分了许多小的内存块单位；当Redis存储数据时，会选择大小最合适的内存块进行存储。</p>\n<p>jemalloc划分的内存单元如下图所示：</p>\n<p style=\"text-align: center\"><img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/34ac5c647e31f0ab02036d78ee63f248.png\" alt=\"\"></p>\n<p style=\"text-align: center\">图片来源：http://blog.csdn.net/zhengpeitao/article/details/76573053</p>\n<p>例如，如果需要存储大小为130字节的对象，jemalloc会将其放入160字节的内存单元中。</p>\n<h2><a name=\"t33\"></a>3、redisObject</h2>\n<p>前面说到，Redis对象有5种类型；无论是哪种类型，Redis都不会直接存储，而是通过redisObject对象进行存储。</p>\n<p>redisObject对象非常重要，Redis对象的类型、内部编码、内存回收、共享对象等功能，都需要redisObject支持，下面将通过redisObject的结构来说明它是如何起作用的。</p>\n<p>redisObject的定义如下（不同版本的Redis可能稍稍有所不同）：</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a37355b0f573350284\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ntypedef struct redisObject {\r\n　　unsigned type:4;\r\n　　unsigned encoding:4;\r\n　　unsigned lru:REDIS_LRU_BITS; /* lru time (relative to server.lruclock) */\r\n　　int refcount;\r\n　　void *ptr;\r\n} robj;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a37355b0f573350284-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37355b0f573350284-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37355b0f573350284-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37355b0f573350284-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37355b0f573350284-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37355b0f573350284-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37355b0f573350284-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a37355b0f573350284-1\"><span class=\"crayon-r\">typedef</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">redisObject</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37355b0f573350284-2\">　　<span class=\"crayon-t\">unsigned</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">type</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37355b0f573350284-3\">　　<span class=\"crayon-t\">unsigned</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">encoding</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37355b0f573350284-4\">　　<span class=\"crayon-t\">unsigned</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">lru</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">REDIS_LRU_BITS</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">/* lru time (relative to server.lruclock) */</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37355b0f573350284-5\">　　<span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">refcount</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37355b0f573350284-6\">　　<span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">ptr</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37355b0f573350284-7\"><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">robj</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n\n</div>\n<p>redisObject的每个字段的含义和作用如下：</p>\n<h3>（1）type</h3>\n<p>type字段表示对象的类型，占4个比特；目前包括REDIS_STRING(字符串)、REDIS_LIST (列表)、REDIS_HASH(哈希)、REDIS_SET(集合)、REDIS_ZSET(有序集合)。</p>\n<p>当我们执行type命令时，便是通过读取RedisObject的type字段获得对象的类型；如下图所示：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/43d3539f6d0124bd1581566616b64f97.png\" alt=\"\"></p>\n<h3>（2）encoding</h3>\n<p>encoding表示对象的内部编码，占4个比特。</p>\n<p>对于Redis支持的每种类型，都有至少两种内部编码，例如对于字符串，有int、embstr、raw三种编码。通过encoding属性，Redis可以根据不同的使用场景来为对象设置不同的编码，大大提高了Redis的灵活性和效率。以列表对象为例，有压缩列表和双端链表两种编码方式；如果列表中的元素较少，Redis倾向于使用压缩列表进行存储，因为压缩列表占用内存更少，而且比双端链表可以更快载入；当列表对象元素较多时，压缩列表就会转化为更适合存储大量元素的双端链表。</p>\n<p>通过object encoding命令，可以查看对象采用的编码方式，如下图所示：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/f6339c50fe0f4a46f0059b2f35231e23.png\" alt=\"\"></p>\n<p>5种对象类型对应的编码方式以及使用条件，将在后面介绍。</p>\n<h3>（3）lru</h3>\n<p>lru记录的是对象最后一次被命令程序访问的时间，占据的比特数不同的版本有所不同（如4.0版本占24比特，2.6版本占22比特）。</p>\n<p>通过对比lru时间与当前时间，可以计算某个对象的空转时间；object idletime命令可以显示该空转时间（单位是秒）。object idletime命令的一个特殊之处在于它不改变对象的lru值。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/12d2cec6e14b158f69fda46c75601482.png\" alt=\"\"></p>\n<p>lru值除了通过object idletime命令打印之外，还与Redis的内存回收有关系：如果Redis打开了maxmemory选项，且内存回收算法选择的是volatile-lru或allkeys—lru，那么当Redis内存占用超过maxmemory指定的值时，Redis会优先选择空转时间最长的对象进行释放。</p>\n<h3>（4）refcount</h3>\n<p><strong>refcount</strong><strong>与共享对象</strong></p>\n<p>refcount记录的是该对象被引用的次数，类型为整型。refcount的作用，主要在于对象的引用计数和内存回收。当创建新对象时，refcount初始化为1；当有新程序使用该对象时，refcount加1；当对象不再被一个新程序使用时，refcount减1；当refcount变为0时，对象占用的内存会被释放。</p>\n<p>Redis中被多次使用的对象(refcount&gt;1)，称为共享对象。Redis为了节省内存，当有一些对象重复出现时，新的程序不会创建新的对象，而是仍然使用原来的对象。这个被重复使用的对象，就是共享对象。目前共享对象仅支持整数值的字符串对象。</p>\n<p><strong>共享对象的具体实现</strong></p>\n<p>Redis的共享对象目前只支持整数值的字符串对象。之所以如此，实际上是对内存和CPU（时间）的平衡：共享对象虽然会降低内存消耗，但是判断两个对象是否相等却需要消耗额外的时间。对于整数值，判断操作复杂度为O(1)；对于普通字符串，判断复杂度为O(n)；而对于哈希、列表、集合和有序集合，判断的复杂度为O(n^2)。</p>\n<p>虽然共享对象只能是整数值的字符串对象，但是5种类型都可能使用共享对象（如哈希、列表等的元素可以使用）。</p>\n<p>就目前的实现来说，Redis服务器在初始化时，会创建10000个字符串对象，值分别是0~9999的整数值；当Redis需要使用值为0~9999的字符串对象时，可以直接使用这些共享对象。10000这个数字可以通过调整参数REDIS_SHARED_INTEGERS（4.0中是OBJ_SHARED_INTEGERS）的值进行改变。</p>\n<p>共享对象的引用次数可以通过object refcount命令查看，如下图所示。命令执行的结果页佐证了只有0~9999之间的整数会作为共享对象。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/da89cea4d30533c989b73b07efd27317.png\" alt=\"\"></p>\n<h3>（5）ptr</h3>\n<p>ptr指针指向具体的数据，如前面的例子中，set hello world，ptr指向包含字符串world的SDS。</p>\n<h3>（6）总结</h3>\n<p>综上所述，redisObject的结构与对象类型、编码、内存回收、共享对象都有关系；一个redisObject对象的大小为16字节：</p>\n<p>4bit+4bit+24bit+4Byte+8Byte=16Byte。</p>\n<h2><a name=\"t34\"></a>4、SDS</h2>\n<p>Redis没有直接使用C字符串(即以空字符’\\0’结尾的字符数组)作为默认的字符串表示，而是使用了SDS。SDS是简单动态字符串(Simple Dynamic String)的缩写。</p>\n<h3>（1）SDS结构</h3>\n<p>sds的结构如下：</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a37355b1b186750254\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nstruct sdshdr { \r\n    int len;\r\n    int free;\r\n    char buf[];\r\n};</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a37355b1b186750254-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37355b1b186750254-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37355b1b186750254-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37355b1b186750254-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37355b1b186750254-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a37355b1b186750254-1\"><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sdshdr</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37355b1b186750254-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">len</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37355b1b186750254-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">free</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37355b1b186750254-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">char</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">buf</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37355b1b186750254-5\"><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n\n</div>\n<p>其中，buf表示字节数组，用来存储字符串；len表示buf已使用的长度，free表示buf未使用的长度。下面是两个例子。</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/2116fb2f5ea2170e8e9df0032c1fad4d.png\" alt=\"\"></p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/951c87cee3bcd2599fcdddac9167d232.png\" alt=\"\"></p>\n<p style=\"text-align: center\">图片来源：《Redis设计与实现》</p>\n<p>通过SDS的结构可以看出，buf数组的长度=free+len+1（其中1表示字符串结尾的空字符）；所以，一个SDS结构占据的空间为：free所占长度+len所占长度+ buf数组的长度=4+4+free+len+1=free+len+9。</p>\n<h3>（2）SDS与C字符串的比较</h3>\n<p>SDS在C字符串的基础上加入了free和len字段，带来了很多好处：</p>\n<ul>\n<li>获取字符串长度：SDS是O(1)，C字符串是O(n)</li>\n<li>缓冲区溢出：使用C字符串的API时，如果字符串长度增加（如strcat操作）而忘记重新分配内存，很容易造成缓冲区的溢出；而SDS由于记录了长度，相应的API在可能造成缓冲区溢出时会自动重新分配内存，杜绝了缓冲区溢出。</li>\n<li>修改字符串时内存的重分配：对于C字符串，如果要修改字符串，必须要重新分配内存（先释放再申请），因为如果没有重新分配，字符串长度增大时会造成内存缓冲区溢出，字符串长度减小时会造成内存泄露。而对于SDS，由于可以记录len和free，因此解除了字符串长度和空间数组长度之间的关联，可以在此基础上进行优化：空间预分配策略（即分配内存时比实际需要的多）使得字符串长度增大时重新分配内存的概率大大减小；惰性空间释放策略使得字符串长度减小时重新分配内存的概率大大减小。</li>\n<li>存取二进制数据：SDS可以，C字符串不可以。因为C字符串以空字符作为字符串结束的标识，而对于一些二进制文件（如图片等），内容可能包括空字符串，因此C字符串无法正确存取；而SDS以字符串长度len来作为字符串结束标识，因此没有这个问题。</li>\n</ul>\n<p>此外，由于SDS中的buf仍然使用了C字符串（即以’\\0’结尾），因此SDS可以使用C字符串库中的部分函数；但是需要注意的是，只有当SDS用来存储文本数据时才可以这样使用，在存储二进制数据时则不行（’\\0’不一定是结尾）。</p>\n<h3>（3）SDS与C字符串的应用</h3>\n<p>Redis在存储对象时，一律使用SDS代替C字符串。例如set hello world命令，hello和world都是以SDS的形式存储的。而sadd myset member1 member2 member3命令，不论是键（”myset”），还是集合中的元素（”member1”、 ”member2”和”member3”），都是以SDS的形式存储。除了存储对象，SDS还用于存储各种缓冲区。</p>\n<p>只有在字符串不会改变的情况下，如打印日志时，才会使用C字符串。</p>\n<h1><a name=\"t4\"></a>四、Redis的对象类型与内部编码</h1>\n<p>前面已经说过，Redis支持5种对象类型，而每种结构都有至少两种编码；这样做的好处在于：一方面接口与实现分离，当需要增加或改变内部编码时，用户使用不受影响，另一方面可以根据不同的应用场景切换内部编码，提高效率。</p>\n<p>Redis各种对象类型支持的内部编码如下图所示(图中版本是Redis3.0，Redis后面版本中又增加了内部编码，略过不提；本章所介绍的内部编码都是基于3.0的)：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/28593c0d23953ad296b17967fa129871.png\" alt=\"\"></p>\n<p style=\"text-align: center\">图片来源：《Redis设计与实现》</p>\n<p>关于Redis内部编码的转换，都符合以下规律：<strong>编码转换在</strong><strong>Redis</strong><strong>写入数据时完成，且转换过程不可逆，只能从小内存编码向大内存编码转换。</strong></p>\n<h2><a name=\"t41\"></a>1、字符串</h2>\n<h3>（1）概况</h3>\n<p>字符串是最基础的类型，因为所有的键都是字符串类型，且字符串之外的其他几种复杂类型的元素也是字符串。</p>\n<p>字符串长度不能超过512MB。</p>\n<h3>（2）内部编码</h3>\n<p>字符串类型的内部编码有3种，它们的应用场景如下：</p>\n<ul>\n<li>int：8个字节的长整型。字符串值是整型时，这个值使用long整型表示。</li>\n<li>embstr：&lt;=39字节的字符串。embstr与raw都使用redisObject和sds保存数据，区别在于，embstr的使用只分配一次内存空间（因此redisObject和sds是连续的），而raw需要分配两次内存空间（分别为redisObject和sds分配空间）。因此与raw相比，embstr的好处在于创建时少分配一次空间，删除时少释放一次空间，以及对象的所有数据连在一起，寻找方便。而embstr的坏处也很明显，如果字符串的长度增加需要重新分配内存时，整个redisObject和sds都需要重新分配空间，因此redis中的embstr实现为只读。</li>\n<li>raw：大于39个字节的字符串</li>\n</ul>\n<p>示例如下图所示：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/671a709f884a9584f067c2dc7d588b59.png\" alt=\"\"></p>\n<p>embstr和raw进行区分的长度，是39；是因为redisObject的长度是16字节，sds的长度是9+字符串长度；因此当字符串长度是39时，embstr的长度正好是16+9+39=64，jemalloc正好可以分配64字节的内存单元。</p>\n<h3>（3）编码转换</h3>\n<p>当int数据不再是整数，或大小超过了long的范围时，自动转化为raw。</p>\n<p>而对于embstr，由于其实现是只读的，因此在对embstr对象进行修改时，都会先转化为raw再进行修改，因此，只要是修改embstr对象，修改后的对象一定是raw的，无论是否达到了39个字节。示例如下图所示：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/46b394cc882ed056fdee8caf1237e4da.png\" alt=\"\"></p>\n<h2><a name=\"t42\"></a>2、列表</h2>\n<h3>（1）概况</h3>\n<p>列表（list）用来存储多个有序的字符串，每个字符串称为元素；一个列表可以存储2^32-1个元素。Redis中的列表支持两端插入和弹出，并可以获得指定位置（或范围）的元素，可以充当数组、队列、栈等。</p>\n<h3>（2）内部编码</h3>\n<p>列表的内部编码可以是压缩列表（ziplist）或双端链表（linkedlist）。</p>\n<p>双端链表：由一个list结构和多个listNode结构组成；典型结构如下图所示：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/dc15e787d4b13a9944b821568afae17c.png\" alt=\"\"></p>\n<p style=\"text-align: center\">图片来源：《Redis设计与实现》</p>\n<p>通过图中可以看出，双端链表同时保存了表头指针和表尾指针，并且每个节点都有指向前和指向后的指针；链表中保存了列表的长度；dup、free和match为节点值设置类型特定函数，所以链表可以用于保存各种不同类型的值。而链表中每个节点指向的是type为字符串的redisObject。</p>\n<p>压缩列表：压缩列表是Redis为了节约内存而开发的，是由一系列特殊编码的<strong>连续内存块</strong>(而不是像双端链表一样每个节点是指针)组成的顺序型数据结构；具体结构相对比较复杂，略。与双端链表相比，压缩列表可以节省内存空间，但是进行修改或增删操作时，复杂度较高；因此当节点数量较少时，可以使用压缩列表；但是节点数量多时，还是使用双端链表划算。</p>\n<p>压缩列表不仅用于实现列表，也用于实现哈希、有序列表；使用非常广泛。</p>\n<h3>（3）编码转换</h3>\n<p>只有同时满足下面两个条件时，才会使用压缩列表：列表中元素数量小于512个；列表中所有字符串对象都不足64字节。如果有一个条件不满足，则使用双端列表；且编码只可能由压缩列表转化为双端链表，反方向则不可能。</p>\n<p>下图展示了列表编码转换的特点：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/aeea9b05c5e09cae19d2ee9ed2875285.png\" alt=\"\"></p>\n<p>其中，单个字符串不能超过64字节，是为了便于统一分配每个节点的长度；这里的64字节是指字符串的长度，不包括SDS结构，因为压缩列表使用连续、定长内存块存储字符串，不需要SDS结构指明长度。后面提到压缩列表，也会强调长度不超过64字节，原理与这里类似。</p>\n<h2><a name=\"t43\"></a>3、哈希</h2>\n<h3>（1）概况</h3>\n<p>哈希（作为一种数据结构），不仅是redis对外提供的5种对象类型的一种（与字符串、列表、集合、有序结合并列），也是Redis作为Key-Value数据库所使用的数据结构。为了说明的方便，在本文后面当使用“内层的哈希”时，代表的是redis对外提供的5种对象类型的一种；使用“外层的哈希”代指Redis作为Key-Value数据库所使用的数据结构。</p>\n<h3>（2）内部编码</h3>\n<p>内层的哈希使用的内部编码可以是压缩列表（ziplist）和哈希表（hashtable）两种；Redis的外层的哈希则只使用了hashtable。</p>\n<p>压缩列表前面已介绍。与哈希表相比，压缩列表用于元素个数少、元素长度小的场景；其优势在于集中存储，节省空间；同时，虽然对于元素的操作复杂度也由O(n)变为了O(1)，但由于哈希中元素数量较少，因此操作的时间并没有明显劣势。</p>\n<p>hashtable：一个hashtable由1个dict结构、2个dictht结构、1个dictEntry指针数组（称为bucket）和多个dictEntry结构组成。</p>\n<p>正常情况下（即hashtable没有进行rehash时）各部分关系如下图所示：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/bade6592c75a4d693f8269dd3a9c5d85.png\" alt=\"\"></p>\n<p style=\"text-align: center\">图片改编自：《Redis设计与实现》</p>\n<p>下面从底层向上依次介绍各个部分：</p>\n<p><strong>dictEntry</strong></p>\n<p>dictEntry结构用于保存键值对，结构定义如下：</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a37355b2a761255005\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ntypedef struct dictEntry{\r\n    void *key;\r\n    union{\r\n        void *val;\r\n        uint64_tu64;\r\n        int64_ts64;\r\n    }v;\r\n    struct dictEntry *next;\r\n}dictEntry;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a37355b2a761255005-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37355b2a761255005-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37355b2a761255005-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37355b2a761255005-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37355b2a761255005-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37355b2a761255005-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37355b2a761255005-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37355b2a761255005-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37355b2a761255005-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a37355b2a761255005-1\"><span class=\"crayon-r\">typedef</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">dictEntry</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37355b2a761255005-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">key</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37355b2a761255005-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">union</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37355b2a761255005-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">val</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37355b2a761255005-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">uint64_tu64</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37355b2a761255005-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">int64_ts64</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37355b2a761255005-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span><span class=\"crayon-v\">v</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37355b2a761255005-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">dictEntry *</span><span class=\"crayon-v\">next</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37355b2a761255005-9\"><span class=\"crayon-sy\">}</span><span class=\"crayon-v\">dictEntry</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n\n</div>\n<p>其中，各个属性的功能如下：</p>\n<ul>\n<li>key：键值对中的键；</li>\n<li>val：键值对中的值，使用union(即共用体)实现，存储的内容既可能是一个指向值的指针，也可能是64位整型，或无符号64位整型；</li>\n<li>next：指向下一个dictEntry，用于解决哈希冲突问题</li>\n</ul>\n<p>在64位系统中，一个dictEntry对象占24字节（key/val/next各占8字节）。</p>\n<p><strong>bucket</strong></p>\n<p>bucket是一个数组，数组的每个元素都是指向dictEntry结构的指针。redis中bucket数组的大小计算规则如下：大于dictEntry的、最小的2^n；例如，如果有1000个dictEntry，那么bucket大小为1024；如果有1500个dictEntry，则bucket大小为2048。</p>\n<p><strong>dictht</strong></p>\n<p>dictht结构如下：</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a37355b33570181359\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ntypedef struct dictht{\r\n    dictEntry **table;\r\n    unsigned long size;\r\n    unsigned long sizemask;\r\n    unsigned long used;\r\n}dictht;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a37355b33570181359-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37355b33570181359-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37355b33570181359-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37355b33570181359-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37355b33570181359-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37355b33570181359-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a37355b33570181359-1\"><span class=\"crayon-r\">typedef</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">dictht</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37355b33570181359-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-e \">dictEntry *</span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">table</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37355b33570181359-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">unsigned</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37355b33570181359-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">unsigned</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sizemask</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37355b33570181359-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">unsigned</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">used</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37355b33570181359-6\"><span class=\"crayon-sy\">}</span><span class=\"crayon-v\">dictht</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n\n</div>\n<p>其中，各个属性的功能说明如下：</p>\n<ul>\n<li>table属性是一个指针，指向bucket；</li>\n<li>size属性记录了哈希表的大小，即bucket的大小；</li>\n<li>used记录了已使用的dictEntry的数量；</li>\n<li>sizemask属性的值总是为size-1，这个属性和哈希值一起决定一个键在table中存储的位置。</li>\n</ul>\n<p><strong>dict</strong></p>\n<p>一般来说，通过使用dictht和dictEntry结构，便可以实现普通哈希表的功能；但是Redis的实现中，在dictht结构的上层，还有一个dict结构。下面说明dict结构的定义及作用。</p>\n<p>dict结构如下：</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a37355b37161516886\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ntypedef struct dict{\r\n    dictType *type;\r\n    void *privdata;\r\n    dictht ht[2];\r\n    int trehashidx;\r\n} dict;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a37355b37161516886-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37355b37161516886-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37355b37161516886-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37355b37161516886-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37355b37161516886-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37355b37161516886-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a37355b37161516886-1\"><span class=\"crayon-r\">typedef</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">dict</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37355b37161516886-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-e \">dictType *</span><span class=\"crayon-v\">type</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37355b37161516886-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">privdata</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37355b37161516886-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">dictht </span><span class=\"crayon-v\">ht</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37355b37161516886-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">trehashidx</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37355b37161516886-6\"><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dict</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n\n</div>\n<p>其中，type属性和privdata属性是为了适应不同类型的键值对，用于创建多态字典。</p>\n<p>ht属性和trehashidx属性则用于rehash，即当哈希表需要扩展或收缩时使用。ht是一个包含两个项的数组，每项都指向一个dictht结构，这也是Redis的哈希会有1个dict、2个dictht结构的原因。通常情况下，所有的数据都是存在放dict的ht[0]中，ht[1]只在rehash的时候使用。dict进行rehash操作的时候，将ht[0]中的所有数据rehash到ht[1]中。然后将ht[1]赋值给ht[0]，并清空ht[1]。</p>\n<p>因此，Redis中的哈希之所以在dictht和dictEntry结构之外还有一个dict结构，一方面是为了适应不同类型的键值对，另一方面是为了rehash。</p>\n<h3>（3）编码转换</h3>\n<p>如前所述，Redis中内层的哈希既可能使用哈希表，也可能使用压缩列表。</p>\n<p>只有同时满足下面两个条件时，才会使用压缩列表：哈希中元素数量小于512个；哈希中所有键值对的键和值字符串长度都小于64字节。如果有一个条件不满足，则使用哈希表；且编码只可能由压缩列表转化为哈希表，反方向则不可能。</p>\n<p>下图展示了Redis内层的哈希编码转换的特点：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/0a98910371a2157072c25fcf2b7f6784.png\" alt=\"\"></p>\n<h2><a name=\"t44\"></a>4、集合</h2>\n<h3>（1）概况</h3>\n<p>集合（set）与列表类似，都是用来保存多个字符串，但集合与列表有两点不同：集合中的元素是无序的，因此不能通过索引来操作元素；集合中的元素不能有重复。</p>\n<p>一个集合中最多可以存储2^32-1个元素；除了支持常规的增删改查，Redis还支持多个集合取交集、并集、差集。</p>\n<h3>（2）内部编码</h3>\n<p>集合的内部编码可以是整数集合（intset）或哈希表（hashtable）。</p>\n<p>哈希表前面已经讲过，这里略过不提；需要注意的是，集合在使用哈希表时，值全部被置为null。</p>\n<p>整数集合的结构定义如下：</p>\n<div>\n<!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a37355b3e529629559\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ntypedef struct intset{\r\n    uint32_t encoding;\r\n    uint32_t length;\r\n    int8_t contents[];\r\n} intset;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a37355b3e529629559-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37355b3e529629559-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37355b3e529629559-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37355b3e529629559-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37355b3e529629559-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a37355b3e529629559-1\"><span class=\"crayon-r\">typedef</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">intset</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37355b3e529629559-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">uint32_t </span><span class=\"crayon-v\">encoding</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37355b3e529629559-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">uint32_t </span><span class=\"crayon-v\">length</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37355b3e529629559-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">int8_t </span><span class=\"crayon-v\">contents</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37355b3e529629559-5\"><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">intset</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n\n</div>\n<p>其中，encoding代表contents中存储内容的类型，虽然contents（存储集合中的元素）是int8_t类型，但实际上其存储的值是int16_t、int32_t或int64_t，具体的类型便是由encoding决定的；length表示元素个数。</p>\n<p>整数集合适用于集合所有元素都是整数且集合元素数量较小的时候，与哈希表相比，整数集合的优势在于集中存储，节省空间；同时，虽然对于元素的操作复杂度也由O(n)变为了O(1)，但由于集合数量较少，因此操作的时间并没有明显劣势。</p>\n<h3>（3）编码转换</h3>\n<p>只有同时满足下面两个条件时，集合才会使用整数集合：集合中元素数量小于512个；集合中所有元素都是整数值。如果有一个条件不满足，则使用哈希表；且编码只可能由整数集合转化为哈希表，反方向则不可能。</p>\n<p>下图展示了集合编码转换的特点：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/c5dcfed49dff9c771a6929455d548f81.png\" alt=\"\"></p>\n<h2><a name=\"t45\"></a>5、有序集合</h2>\n<h3>（1）概况</h3>\n<p>有序集合与集合一样，元素都不能重复；但与集合不同的是，有序集合中的元素是有顺序的。与列表使用索引下标作为排序依据不同，有序集合为每个元素设置一个分数（score）作为排序依据。</p>\n<h3>（2）内部编码</h3>\n<p>有序集合的内部编码可以是压缩列表（ziplist）或跳跃表（skiplist）。ziplist在列表和哈希中都有使用，前面已经讲过，这里略过不提。</p>\n<p>跳跃表是一种有序数据结构，通过在每个节点中维持多个指向其他节点的指针，从而达到快速访问节点的目的。除了跳跃表，实现有序数据结构的另一种典型实现是平衡树；大多数情况下，跳跃表的效率可以和平衡树媲美，且跳跃表实现比平衡树简单很多，因此redis中选用跳跃表代替平衡树。跳跃表支持平均O(logN)、最坏O(N)的复杂点进行节点查找，并支持顺序操作。Redis的跳跃表实现由zskiplist和zskiplistNode两个结构组成：前者用于保存跳跃表信息（如头结点、尾节点、长度等），后者用于表示跳跃表节点。具体结构相对比较复杂，略。</p>\n<h3>（3）编码转换</h3>\n<p>只有同时满足下面两个条件时，才会使用压缩列表：有序集合中元素数量小于128个；有序集合中所有成员长度都不足64字节。如果有一个条件不满足，则使用跳跃表；且编码只可能由压缩列表转化为跳跃表，反方向则不可能。</p>\n<p>下图展示了有序集合编码转换的特点：</p>\n<p><img class=\"aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2018/03/ec94bc8c186973c1318a5c439729eacb.png\" alt=\"\"></p>\n<h1><a name=\"t5\"></a>五、应用举例</h1>\n<p>了解Redis的内存模型之后，下面通过几个例子说明其应用。</p>\n<h2><a name=\"t51\"></a>1、估算Redis内存使用量</h2>\n<p>要估算redis中的数据占据的内存大小，需要对redis的内存模型有比较全面的了解，包括前面介绍的hashtable、sds、redisobject、各种对象类型的编码方式等。</p>\n<p>下面以最简单的字符串类型来进行说明。</p>\n<p>假设有90000个键值对，每个key的长度是7个字节，每个value的长度也是7个字节（且key和value都不是整数）；下面来估算这90000个键值对所占用的空间。在估算占据空间之前，首先可以判定字符串类型使用的编码方式：embstr。</p>\n<p>90000个键值对占据的内存空间主要可以分为两部分：一部分是90000个dictEntry占据的空间；一部分是键值对所需要的bucket空间。</p>\n<p>每个dictEntry占据的空间包括：</p>\n<p>1)       一个dictEntry，24字节，jemalloc会分配32字节的内存块</p>\n<p>2)       一个key，7字节，所以SDS(key)需要7+9=16个字节，jemalloc会分配16字节的内存块</p>\n<p>3)       一个redisObject，16字节，jemalloc会分配16字节的内存块</p>\n<p>4)       一个value，7字节，所以SDS(value)需要7+9=16个字节，jemalloc会分配16字节的内存块</p>\n<p>5)       综上，一个dictEntry需要32+16+16+16=80个字节。</p>\n<p>bucket空间：bucket数组的大小为大于90000的最小的2^n，是131072；每个bucket元素为8字节（因为64位系统中指针大小为8字节）。</p>\n<p>因此，可以估算出这90000个键值对占据的内存大小为：90000*80 + 131072*8 = 8248576。</p>\n<p>下面写个程序在redis中验证一下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a37355b44834583252\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npublic class RedisTest {\r\n \r\n　　public static Jedis jedis = new Jedis(\"localhost\", 6379);\r\n \r\n　　public static void main(String[] args) throws Exception{\r\n　　　　Long m1 = Long.valueOf(getMemory());\r\n　　　　insertData();\r\n　　　　Long m2 = Long.valueOf(getMemory());\r\n　　　　System.out.println(m2 - m1);\r\n　　}\r\n \r\n　　public static void insertData(){\r\n　　　　for(int i = 10000; i &lt; 100000; i++){\r\n　　　　　　jedis.set(\"aa\" + i, \"aa\" + i); //key和value长度都是7字节，且不是整数\r\n　　　　}\r\n　　}\r\n \r\n　　public static String getMemory(){\r\n　　　　String memoryAllLine = jedis.info(\"memory\");\r\n　　　　String usedMemoryLine = memoryAllLine.split(\"\\r\\n\")[1];\r\n　　　　String memory = usedMemoryLine.substring(usedMemoryLine.indexOf(':') + 1);\r\n　　　　return memory;\r\n　　}\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a37355b44834583252-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37355b44834583252-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37355b44834583252-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37355b44834583252-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37355b44834583252-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37355b44834583252-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37355b44834583252-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37355b44834583252-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37355b44834583252-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37355b44834583252-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37355b44834583252-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37355b44834583252-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37355b44834583252-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37355b44834583252-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37355b44834583252-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37355b44834583252-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37355b44834583252-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37355b44834583252-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37355b44834583252-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37355b44834583252-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37355b44834583252-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37355b44834583252-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37355b44834583252-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37355b44834583252-24\">24</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a37355b44834583252-1\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">class</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">RedisTest</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37355b44834583252-2\"><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37355b44834583252-3\">　　<span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Jedis </span><span class=\"crayon-v\">jedis</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-r\">new</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Jedis</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"localhost\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6379</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37355b44834583252-4\"><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37355b44834583252-5\">　　<span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">main</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">args</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">throws</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Exception</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37355b44834583252-6\">　　　　<span class=\"crayon-t\">Long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">m1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Long</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">valueOf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">getMemory</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37355b44834583252-7\">　　　　<span class=\"crayon-e\">insertData</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37355b44834583252-8\">　　　　<span class=\"crayon-t\">Long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">m2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Long</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">valueOf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">getMemory</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37355b44834583252-9\">　　　　<span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">println</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">m2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">m1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37355b44834583252-10\">　　<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37355b44834583252-11\"><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37355b44834583252-12\">　　<span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">insertData</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37355b44834583252-13\">　　　　<span class=\"crayon-st\">for</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10000</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100000</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37355b44834583252-14\">　　　　　　<span class=\"crayon-v\">jedis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">set</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"aa\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"aa\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//key和value长度都是7字节，且不是整数</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37355b44834583252-15\">　　　　<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37355b44834583252-16\">　　<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37355b44834583252-17\"><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37355b44834583252-18\">　　<span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getMemory</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37355b44834583252-19\">　　　　<span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">memoryAllLine</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">jedis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">info</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"memory\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37355b44834583252-20\">　　　　<span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">usedMemoryLine</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">memoryAllLine</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">split</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"\\r\\n\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37355b44834583252-21\">　　　　<span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">memory</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">usedMemoryLine</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">substring</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">usedMemoryLine</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">indexOf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">':'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37355b44834583252-22\">　　　　<span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">memory</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37355b44834583252-23\">　　<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37355b44834583252-24\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0228 seconds] -->\r\n<p>运行结果：8247552</p>\n<p>理论值与结果值误差在万分之1.2，对于计算需要多少内存来说，这个精度已经足够了。之所以会存在误差，是因为在我们插入90000条数据之前redis已分配了一定的bucket空间，而这些bucket空间尚未使用。</p>\n<p>作为对比将key和value的长度由7字节增加到8字节，则对应的SDS变为17个字节，jemalloc会分配32个字节，因此每个dictEntry占用的字节数也由80字节变为112字节。此时估算这90000个键值对占据内存大小为：90000*112 + 131072*8 = 11128576。</p>\n<p>在redis中验证代码如下（只修改插入数据的代码）：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a37355b4b115187029\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\npublic static void insertData(){\r\n　　for(int i = 10000; i &lt; 100000; i++){\r\n　　　　jedis.set(\"aaa\" + i, \"aaa\" + i); //key和value长度都是8字节，且不是整数\r\n　　}\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a37355b4b115187029-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37355b4b115187029-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37355b4b115187029-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37355b4b115187029-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37355b4b115187029-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a37355b4b115187029-1\"><span class=\"crayon-m\">public</span><span class=\"crayon-h\"> </span><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">insertData</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37355b4b115187029-2\">　　<span class=\"crayon-st\">for</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10000</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100000</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-o\">++</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37355b4b115187029-3\">　　　　<span class=\"crayon-v\">jedis</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">set</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"aaa\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"aaa\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">i</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">//key和value长度都是8字节，且不是整数</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37355b4b115187029-4\">　　<span class=\"crayon-sy\">}</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37355b4b115187029-5\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>运行结果：11128576；估算准确。</p>\n<p>对于字符串类型之外的其他类型，对内存占用的估算方法是类似的，需要结合具体类型的编码方式来确定。</p>\n<h2><a name=\"t52\"></a>2、优化内存占用</h2>\n<p>了解redis的内存模型，对优化redis内存占用有很大帮助。下面介绍几种优化场景。</p>\n<p>（1）利用jemalloc特性进行优化</p>\n<p>上一小节所讲述的90000个键值便是一个例子。由于jemalloc分配内存时数值是不连续的，因此key/value字符串变化一个字节，可能会引起占用内存很大的变动；在设计时可以利用这一点。</p>\n<p>例如，如果key的长度如果是8个字节，则SDS为17字节，jemalloc分配32字节；此时将key长度缩减为7个字节，则SDS为16字节，jemalloc分配16字节；则每个key所占用的空间都可以缩小一半。</p>\n<p>（2）使用整型/长整型</p>\n<p>如果是整型/长整型，Redis会使用int类型（8字节）存储来代替字符串，可以节省更多空间。因此在可以使用长整型/整型代替字符串的场景下，尽量使用长整型/整型。</p>\n<p>（3）共享对象</p>\n<p>利用共享对象，可以减少对象的创建（同时减少了redisObject的创建），节省内存空间。目前redis中的共享对象只包括10000个整数（0-9999）；可以通过调整REDIS_SHARED_INTEGERS参数提高共享对象的个数；例如将REDIS_SHARED_INTEGERS调整到20000，则0-19999之间的对象都可以共享。</p>\n<p>考虑这样一种场景：论坛网站在redis中存储了每个帖子的浏览数，而这些浏览数绝大多数分布在0-20000之间，这时候通过适当增大REDIS_SHARED_INTEGERS参数，便可以利用共享对象节省内存空间。</p>\n<p>（4）避免过度设计</p>\n<p>然而需要注意的是，不论是哪种优化场景，都要考虑内存空间与设计复杂度的权衡；而设计复杂度会影响到代码的复杂度、可维护性。</p>\n<p>如果数据量较小，那么为了节省内存而使得代码的开发、维护变得更加困难并不划算；还是以前面讲到的90000个键值对为例，实际上节省的内存空间只有几MB。但是如果数据量有几千万甚至上亿，考虑内存的优化就比较必要了。</p>\n<h2><a name=\"t53\"></a>3、关注内存碎片率</h2>\n<p>内存碎片率是一个重要的参数，对redis 内存的优化有重要意义。</p>\n<p>如果内存碎片率过高（jemalloc在1.03左右比较正常），说明内存碎片多，内存浪费严重；这时便可以考虑重启redis服务，在内存中对数据进行重排，减少内存碎片。</p>\n<p>如果内存碎片率小于1，说明redis内存不足，部分数据使用了虚拟内存（即swap）；由于虚拟内存的存取速度比物理内存差很多（2-3个数量级），此时redis的访问速度可能会变得很慢。因此必须设法增大物理内存（可以增加服务器节点数量，或提高单机内存），或减少redis中的数据。</p>\n<p>要减少redis中的数据，除了选用合适的数据类型、利用共享对象等，还有一点是要设置合理的数据回收策略（maxmemory-policy），当内存达到一定量后，根据不同的优先级对内存进行回收。</p>\n<h1><a name=\"t6\"></a>六、参考文献</h1>\n<p>《Redis开发与运维》</p>\n<p>《Redis设计与实现》</p>\n<p>https://redis.io/documentation</p>\n<p>http://redisdoc.com/server/info.html</p>\n<p>https://www.cnblogs.com/lhcpig/p/4769397.html</p>\n<p>https://searchdatabase.techtarget.com.cn/7-20218/</p>\n<p>http://www.cnblogs.com/mushroom/p/4738170.html</p>\n<p>http://www.imooc.com/article/3645</p>\n<p>http://blog.csdn.net/zhengpeitao/article/details/76573053</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113789\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113789votetotal\">3</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113789\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 3 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>\r\n\t<!-- END .entry -->\r\n\r\n\r\n<script type=\"text/javascript\">\r\nvar jiathis_config={\r\n\tdata_track_clickback:false,\r\n\ttitle:\"分享从伯乐在线看到的一篇好文章 \",\r\n\tsummary:\"《深入学习 Redis（1）：Redis 内存模型》\",\r\n\tpic:\"http://jbcdn2.b0.upaiyun.com/2016/04/49961db8952e63d98b519b76a2daa5e2.png\",\r\n\tappkey:{\r\n         \"tsina\": 1473879058    },\r\n\tralateuid:{\r\n\t\t\"tsina\": 1670481425\t},\r\n\thideMore:false\r\n}\r\n</script>\r\n<script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js?uid=1745061\" charset=\"utf-8\"></script>\r\n<!-- JiaThis Button END -->\r\n\t\t\t<div class=\"textwidget\"><p><a href=\"http://group.jobbole.com/22945/\" target=\"_blank\"><img src=\"http://wx1.sinaimg.cn/mw690/bfdcef89gy1fq547hqqaij20h803cgm9.jpg\"></a></p>\n</div>\n\t\t\r\n</div>\r\n<!-- END .post -->\r\n            <div style=\"text-align: left;\">\r\n            <h3>相关文章</h3>\r\n            <ul style=\"font-size: 13px; list-style: disc inside;\">\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"Redis源码阅读：sds字符串实现\" target=\"_blank\" href=\"http://blog.jobbole.com/113798/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">Redis源码阅读：sds字符串实现</a>\r\n                                            </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"Redis 集群部署及踩过的坑\" target=\"_blank\" href=\"http://blog.jobbole.com/113760/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">Redis 集群部署及踩过的坑</a>\r\n                                            </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"索引表和 ES 的一点点思考\" target=\"_blank\" href=\"http://blog.jobbole.com/113726/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">索引表和 ES 的一点点思考</a>\r\n                                            </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"优化 MySQL： 3 个简单的小调整\" target=\"_blank\" href=\"http://blog.jobbole.com/113659/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">优化 MySQL： 3 个简单的小调整</a>\r\n                         · <a href=\"http://blog.jobbole.com/113659/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 13</a>                    </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"为初学者准备的 MariaDB 管理命令\" target=\"_blank\" href=\"http://blog.jobbole.com/113617/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">为初学者准备的 MariaDB 管理命令</a>\r\n                                            </span>\r\n                    </li>\r\n                            </ul>\r\n        </div>\r\n    \r\n    \n<div style=\"text-align: left;\">\n    <h3>可能感兴趣的话题</h3>\n    <ul style=\"font-size: 13px; list-style: disc inside;\">\n                        <li>\n                    <a href=\"http://group.jobbole.com/33039/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"Eng  ---  React ,Vue ,Angular全家桶套餐外的另一种超轻量级实现方式 (16kb)\" target=\"_blank\">Eng  ---  React ,Vue ,Angular全家桶套餐外的另一种超轻量级实...</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/33038/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"28岁刚入门，靠谱不？\" target=\"_blank\">28岁刚入门，靠谱不？</a>\n                     · <a href=\"http://group.jobbole.com/33038/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 7</a>                </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32985/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"工作四年，该如何晋级架构师？\" target=\"_blank\">工作四年，该如何晋级架构师？</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32958/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"java 的nio和网络编程nio 的区别\" target=\"_blank\">java 的nio和网络编程nio 的区别</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32933/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"工作压力大，然后出错多。。然后工作压力大。该怎么调整自己的状态……\" target=\"_blank\">工作压力大，然后出错多。。然后工作压力大。该怎么调整自己的状态……</a>\n                     · <a href=\"http://group.jobbole.com/32933/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 5</a>                </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32879/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"是去北上广深闯几年还是留在二线城市？\" target=\"_blank\">是去北上广深闯几年还是留在二线城市？</a>\n                     · <a href=\"http://group.jobbole.com/32879/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 2</a>                </li>\n                </ul>\n</div>\r\n\t\n            <div id=\"article-comment\" class=\"dot-box center-align\">\n\n                        <a href=\"http://www.jobbole.com/login?redirect=http://blog.jobbole.com/113789/\"><button type=\"button\" class=\"btn btn-non-transparent\">登录后评论</button></a>\n            \n            <a target=\"_blank\" href=\"http://www.jobbole.com/register\"><button type=\"button\" class=\"btn btn-primary\">新用户注册</button></a>\n\n            <br><br>\n            <span>直接登录</span>\n            <style type=\"text/css\">.t_login_text{margin:0; padding:0;}.t_login_button{margin:0; padding: 5px 0;}.t_login_button a{margin:0; padding-right:3px; line-height:25px}.t_login_button img{display:inline; border:none;}</style><!-- 使用社交帐号登录 来自 WordPress连接微博 插件 --><span class=\"connectBox1 t_login_button\"><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=weixin&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113789%2F\" title=\"微信\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_weixin.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=qzone&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113789%2F\" title=\"QQ\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_qzone.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=sina&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113789%2F\" title=\"新浪微博\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_sina.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=douban&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113789%2F\" title=\"豆瓣\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_douban.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=github&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113789%2F\" title=\"GitHub\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_github.png\"></a></span>        </div>\n    \n\n    <div id=\"comment_list\" class=\"comments\">\n\n                    <h5 id=\"comments\" class=\"sub-title\"><i class=\"glyphicon\"></i>最新评论</h5>\n            <ul class=\"cmnt-list\">\n\n                        <li id=\"comment-162378\" class=\"comment cmnt odd\">\n    \n    <div class=\"cmnt-box\">\n        <div class=\"cmnt-header\">\n                            <a href=\"http://www.jobbole.com/members/guweihuapet\" class=\"cmnt-img\"><img width=\"37\" height=\"37\" src=\"http://q.qlogo.cn/qqapp/208656/C0D44E788F816E5E624514F9D764C261/100\" alt=\"\"></a>\n                <div class=\"cmnt-meta\">\n                    <span><a href=\"http://www.jobbole.com/members/guweihuapet\">幸福的篮球小子^_^</a><label class=\"comment_author_data\"> </label></span>\n                    <span class=\"c-title\">\n                                             </span>\n\n                    <span class=\"c-date\">\n                        <a href=\"http://blog.jobbole.com/113789/#comment-162378\">5 天前</a>\n                    </span>\n\n                    \n                    \n                </div>\n                    </div>\n        <div class=\"cmnt-body\">\n            <p>\n                </p><p>非常有用，最近正在学习redis，这个讲解得很细致，点赞，</p>\n            \n                    </div>\n                    <div class=\"cmnt-footer\">\n\n                \n                <p class=\"c-like\">\n                    <a title=\"赞同\" alt=\"赞同\" class=\"162378voteflag  t-up  href-style vote-comment-up  register-user-only   \" data-comment-id=\"162378\"><i class=\"fa fa-thumbs-o-up\"></i> <span id=\"162378voteuptotal\"> 赞</span></a>\n\n                    \n                    <a rel=\"nofollow\" class=\"comment-reply-link register-user-only\" href=\"http://blog.jobbole.com/113789/?replytocom=162378#respond\" data-onclick='return addComment.moveForm( \"comment-162378\", \"162378\", \"respond\", \"113789\" )' aria-label=\"回复给幸福的篮球小子^_^\">回复 <i class=\"fa fa-reply\"></i></a>\n                </p>\n            </div>\n            </div>\n    </li>\n<!-- #comment-## -->\n        <li id=\"comment-162380\" class=\"comment cmnt even\">\n    \n    <div class=\"cmnt-box\">\n        <div class=\"cmnt-header\">\n                            <a href=\"http://www.jobbole.com/members/wx1994699600\" class=\"cmnt-img\"><img width=\"37\" height=\"37\" src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\" alt=\"\"></a>\n                <div class=\"cmnt-meta\">\n                    <span><a href=\"http://www.jobbole.com/members/wx1994699600\">夯大力</a><label class=\"comment_author_data\"> </label></span>\n                    <span class=\"c-title\">\n                                             </span>\n\n                    <span class=\"c-date\">\n                        <a href=\"http://blog.jobbole.com/113789/#comment-162380\">4 天前</a>\n                    </span>\n\n                    \n                    \n                </div>\n                    </div>\n        <div class=\"cmnt-body\">\n            <p>\n                </p><p>非常详细,学习了</p>\n            \n                    </div>\n                    <div class=\"cmnt-footer\">\n\n                \n                <p class=\"c-like\">\n                    <a title=\"赞同\" alt=\"赞同\" class=\"162380voteflag  t-up  href-style vote-comment-up  register-user-only   \" data-comment-id=\"162380\"><i class=\"fa fa-thumbs-o-up\"></i> <span id=\"162380voteuptotal\"> 赞</span></a>\n\n                    \n                    <a rel=\"nofollow\" class=\"comment-reply-link register-user-only\" href=\"http://blog.jobbole.com/113789/?replytocom=162380#respond\" data-onclick='return addComment.moveForm( \"comment-162380\", \"162380\", \"respond\", \"113789\" )' aria-label=\"回复给夯大力\">回复 <i class=\"fa fa-reply\"></i></a>\n                </p>\n            </div>\n            </div>\n    </li>\n<!-- #comment-## -->\n        <li id=\"comment-162383\" class=\"comment cmnt odd\">\n    \n    <div class=\"cmnt-box\">\n        <div class=\"cmnt-header\">\n                            <a href=\"http://www.jobbole.com/members/wx327367365\" class=\"cmnt-img\"><img width=\"37\" height=\"37\" src=\"http://jbcdn2.b0.upaiyun.com/2018/04/9c627bffafef0ce52f32d44d34722662.jpg\" alt=\"\"></a>\n                <div class=\"cmnt-meta\">\n                    <span><a href=\"http://www.jobbole.com/members/wx327367365\">codemonkey</a><label class=\"comment_author_data\"> </label></span>\n                    <span class=\"c-title\">\n                        java工程师                    </span>\n\n                    <span class=\"c-date\">\n                        <a href=\"http://blog.jobbole.com/113789/#comment-162383\">3 天前</a>\n                    </span>\n\n                    \n                    \n                </div>\n                    </div>\n        <div class=\"cmnt-body\">\n            <p>\n                </p><p>mark 在这里  以前学过但是没这么深入了解过</p>\n            \n                    </div>\n                    <div class=\"cmnt-footer\">\n\n                \n                <p class=\"c-like\">\n                    <a title=\"赞同\" alt=\"赞同\" class=\"162383voteflag  t-up  href-style vote-comment-up  register-user-only   \" data-comment-id=\"162383\"><i class=\"fa fa-thumbs-o-up\"></i> <span id=\"162383voteuptotal\"> 赞</span></a>\n\n                    \n                    <a rel=\"nofollow\" class=\"comment-reply-link register-user-only\" href=\"http://blog.jobbole.com/113789/?replytocom=162383#respond\" data-onclick='return addComment.moveForm( \"comment-162383\", \"162383\", \"respond\", \"113789\" )' aria-label=\"回复给codemonkey\">回复 <i class=\"fa fa-reply\"></i></a>\n                </p>\n            </div>\n            </div>\n    </li>\n<!-- #comment-## -->\n            </ul>\n        \n    </div>\n\t\t\r\n\r\n\t\r\n</div>", "tag": "IT技术-Redis-数据库", "url": "http://blog.jobbole.com/113789/", "url_object_id": "d7679705b6786b2bb8061b616470a651", "front_image_url": ["http://jbcdn2.b0.upaiyun.com/2016/04/49961db8952e63d98b519b76a2daa5e2.png"], "front_image_path": "full/c766feed221138f7946130756cddfc7e86e388b4.jpg"}
{"title": "计算机如何感知大数据——聚类算法", "create_date": "2018/04/04", "praise_nums": "2", "fav_nums": "1", "comments_nums": "0", "content": "<div class=\"grid-8\">\r\n\r\n\t\t\r\n\t<!-- BEGIN .post -->\r\n<div class=\"post-113745 post type-post status-publish format-standard hentry category-it-tech tag-4018 tag-bigdata tag-3997 odd\" id=\"post-113745\">\r\n\t\r\n\t<!-- BEGIN .entry-header -->\r\n\t<div class=\"entry-header\">\r\n\t\r\n\t\t\t\t\r\n\t\t<h1>计算机如何感知大数据——聚类算法</h1>\r\n\t\t\r\n\t\t\t\t\t\t\t\r\n\t</div>\r\n\t<!-- BEGIN .entry-header -->\r\n\t\r\n\t<!-- BEGIN .entry-meta -->\r\n\t<div class=\"entry-meta\">\r\n\t\r\n\t\t<p class=\"entry-meta-hide-on-mobile\">\r\n\r\n            2018/04/04 ·  <a href=\"http://blog.jobbole.com/category/it-tech/\" rel=\"category tag\">IT技术</a>\r\n            \r\n            \r\n\r\n            \r\n             ·  <a href=\"http://blog.jobbole.com/tag/%e5%9b%be%e8%ae%ba/\">图论</a>, <a href=\"http://blog.jobbole.com/tag/bigdata/\">大数据</a>, <a href=\"http://blog.jobbole.com/tag/%e8%81%9a%e7%b1%bb/\">聚类</a>\r\n            \r\n</p>\r\n\r\n<!-- JiaThis Button BEGIN -->\r\n<div class=\"jiathis_style\" style=\"display: block; margin: 0 0px; clear: both;\"><span class=\"jiathis_txt\">分享到：</span>\r\n<a class=\"jiathis_button_tsina\"></a>\r\n<a class=\"jiathis_button_weixin\"></a>\r\n<a class=\"jiathis_button_qzone\"></a>\r\n<a class=\"jiathis_button_fb\"></a>\r\n<a class=\"jiathis_button_douban\"></a>\r\n<a class=\"jiathis_button_readitlater\"></a>\r\n<a class=\"jiathis_button_evernote\"></a>\r\n<a class=\"jiathis_button_ydnote\"></a>\r\n<a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\r\n<a class=\"jiathis_counter_style\"></a>\r\n</div>\r\n<!-- JiaThis Button END -->\r\n\r\n\r\n\t</div>\r\n\t<!-- END .entry-meta -->\r\n\r\n\t<!-- BEGIN .entry -->\r\n\t<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/shaoai37\">LynnShaw</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://medium.freecodecamp.com/how-machines-make-sense-of-big-data-an-introduction-to-clustering-algorithms-4bd97d4fbaba\">Peter Gleeso</a>。欢迎加入<a target=\"_blank\" href=\"http://group.jobbole.com/category/feedback/trans-team/\">翻译组</a>。</div><p>看看下面这张图片。这是一个不同形状大小的昆虫的集合。花点时间按照相似程度将它们分成几组。</p>\n<p>这不是什么很有技巧性的问题。 我们从把蜘蛛分到一起开始。</p>\n<h6 class=\"section-inner sectionLayout--outsetColumn\" style=\"text-align: center;\"><img src=\"http://wx4.sinaimg.cn/mw690/63918611gy1fpachr4a3bj20rs0daags.jpg\"></h6>\n<h6 style=\"text-align: center;\">图片来自Google图片搜索，标记以便重用</h6>\n<p>做完了吗？虽然这里没有必要有所谓的正确答案，不过你极有可能将这些虫子分成四组。蜘蛛分成一组，蜗牛一组，蝴蝶和蛾子一族，黄蜂和蜜蜂总共三个一组。</p>\n<p class=\"section-inner sectionLayout--outsetColumn\">不算太糟糕，是吧？如果虫子数量是这个的两倍你可能还是会这么分，对吧？如果你有空余的时间——或者对昆虫学的热情——你甚至可能用相同方法对一百年个虫子这样分类。</p>\n<p class=\"section-inner sectionLayout--outsetColumn\">然而对一个机器来说，将十个目标分成多个有意义的群组是个不小的任务，多亏了数学中一个令人费解的分支<a href=\"https://en.wikipedia.org/wiki/Bell_number\">组合数学</a>，它告诉我们将十个昆虫分组共有115975种不同的可能。如果对二十个虫子进行分组，将会有<a href=\"https://www.wolframalpha.com/input/?i=bell%27s+number+%2820%29\">超过五十万亿</a>种不同的可能。</p>\n<p class=\"section-inner sectionLayout--outsetColumn\"> 如果对一百个虫子分类——方案数将是<a href=\"https://www.wolframalpha.com/input/?i=particles+in+universe\">宇宙中粒子的数量</a>的很多倍。多少倍呢？通过我的计算，大概是<a href=\"https://www.wolframalpha.com/input/?i=BellB%5B100%5D+%2F+number+of+particles+in+universe\">5*10的35次方倍</a>。事实上，有<a href=\"https://www.wolframalpha.com/input/?i=BellB%5B100%5D+%2F+googol\">四千万亿googol</a>多种方案（<a href=\"https://www.wolframalpha.com/input/?i=googol\">什么是googol?</a>）。仅仅是一百个目标。</p>\n<p class=\"section-inner sectionLayout--outsetColumn\">而这些方案几乎都是没有意义的——虽然从这些数量异常庞大的可能的选择中，你可以很快地找到为数不多的对虫子分类的有用的方式。</p>\n<p class=\"section-inner sectionLayout--outsetColumn\">我们人类理所当然的可以很快地对大量数据理解并分类。无论是一段文字，或者屏幕上的图像，或是一系列的目标——人类通常可以相当有效地搞清世界给我们的任何数据。</p>\n<p class=\"section-inner sectionLayout--outsetColumn\">鉴于发展人工智能和机器学习的一个关键方面就是让机器迅速理解庞大的输入数据集，那么有什么捷径吗？在这本文中，你将会看到三个聚类算法，机器可以这些算法快速理解大型数据集。这决不是一个详尽的清单——还有很多其他的算法——但这三个算法代表了一个良好的开端！</p>\n<p class=\"section-inner sectionLayout--outsetColumn\">当你想要使用它们的时候，你会得到对于每一个问题的总结，一个总体的功能介绍以及一个更细致的，一步一步实现的例子。我相信在现实中实现对于理解是非常有帮助的。如果你真的<em>很喜欢</em>这些，你会发现最好的学习方式是用笔和纸。加油去吧——没人评判哪种方式更好！</p>\n<h6 class=\"section-inner sectionLayout--outsetColumn\" style=\"text-align: center;\"><img src=\"http://wx3.sinaimg.cn/mw690/63918611gy1fpachstvd8j20m80em762.jpg\"></h6>\n<h6 class=\"section-inner sectionLayout--outsetColumn\" style=\"text-align: center;\">三个整齐的聚类，K=3</h6>\n<h3 id=\"c662\" class=\"graf graf--h3 graf-after--figure\">K-均值聚类</h3>\n<h4 id=\"cf9b\" class=\"graf graf--h4 graf-after--h3\"><strong>适用场景：</strong></h4>\n<p>预先已经知道要分成多少组。</p>\n<h4 id=\"71dc\" class=\"graf graf--h4 graf-after--p\"><strong>如何工作：</strong></h4>\n<p id=\"ad35\" class=\"graf graf--p graf-after--h4\">算法首先将每一个观测点随机地分配到<em>K</em>个类别中的一个，然后计算每一个类别的<em>均值</em>。下一步，在重新计算均值之前算法将每一个点重新分配给均值与该点数据最接近的类别。不断重复这一步直到不需要再重新分配。</p>\n<h4 id=\"6699\" class=\"graf graf--h4 graf-after--p\"><strong>实现例子：</strong></h4>\n<p id=\"cd33\" class=\"graf graf--p graf-after--h4\">考虑有12个足球运动员的一个足球队，这些运动员每个人在本赛季都获得了一定的进球数（3-30之间）。现在我们来将他们分成三个单独的聚类。</p>\n<p class=\"graf graf--p graf-after--h4\"><strong>第一步</strong>需要我们随机地将这些运动员分成三组并计算每组的均值。</p>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a37397bf7372195158\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nGroup 1\r\nPlayer A (5 goals), Player B (20 goals), Player C (11 goals) \r\nGroup Mean = (5 + 20 + 11) / 3 = 12\r\n\r\nGroup 2\r\nPlayer D (5 goals), Player E (3 goals), Player F (19 goals)\r\nGroup Mean = 9\r\n\r\nGroup 3\r\nPlayer G (30 goals), Player H (3 goals), Player I (15 goals)\r\nGroup Mean = 16</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397bf7372195158-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37397bf7372195158-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397bf7372195158-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37397bf7372195158-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397bf7372195158-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37397bf7372195158-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397bf7372195158-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37397bf7372195158-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397bf7372195158-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37397bf7372195158-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397bf7372195158-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a37397bf7372195158-1\"><span class=\"crayon-i\">Group</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37397bf7372195158-2\"><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">B</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">C</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37397bf7372195158-3\"><span class=\"crayon-e\">Group </span><span class=\"crayon-v\">Mean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37397bf7372195158-4\"> </div><div class=\"crayon-line\" id=\"crayon-5ac9a37397bf7372195158-5\"><span class=\"crayon-i\">Group</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37397bf7372195158-6\"><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">D</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">E</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">F</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">19</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37397bf7372195158-7\"><span class=\"crayon-e\">Group </span><span class=\"crayon-v\">Mean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37397bf7372195158-8\"> </div><div class=\"crayon-line\" id=\"crayon-5ac9a37397bf7372195158-9\"><span class=\"crayon-i\">Group</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37397bf7372195158-10\"><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">G</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">H</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">I</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37397bf7372195158-11\"><span class=\"crayon-e\">Group </span><span class=\"crayon-v\">Mean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0162 seconds] -->\r\n<p></p>\n<p class=\"graf graf--p graf-after--h4\"><strong>第二步：</strong>对每一个运动员，将它们重新分配到均值离他们最近的组。即，运动员A（进球数5）被分配到第2个组（均值=9）。然后重新计算这几组的均值。</p>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a37397c00205938662\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nGroup 1 (Old Mean = 12)\r\nPlayer C (11 goals) \r\nNew Mean = 11\r\n\r\nGroup 2 (Old Mean = 9)\r\nPlayer A (5 goals), Player D (5 goals), Player E (3 goals), Player H (3 goals)\r\nNew Mean = 4\r\n\r\nGroup 3 (Old Mean = 16)\r\nPlayer G (30 goals), Player I (15 goals), Player B (20 goals), Player F (19 goals)\r\nNew Mean = 21</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397c00205938662-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37397c00205938662-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397c00205938662-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37397c00205938662-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397c00205938662-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37397c00205938662-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397c00205938662-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37397c00205938662-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397c00205938662-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37397c00205938662-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397c00205938662-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a37397c00205938662-1\"><span class=\"crayon-i\">Group</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">Old </span><span class=\"crayon-v\">Mean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37397c00205938662-2\"><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">C</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37397c00205938662-3\"><span class=\"crayon-r\">New</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Mean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37397c00205938662-4\"> </div><div class=\"crayon-line\" id=\"crayon-5ac9a37397c00205938662-5\"><span class=\"crayon-i\">Group</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">Old </span><span class=\"crayon-v\">Mean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37397c00205938662-6\"><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">D</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">E</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">H</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37397c00205938662-7\"><span class=\"crayon-r\">New</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Mean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37397c00205938662-8\"> </div><div class=\"crayon-line\" id=\"crayon-5ac9a37397c00205938662-9\"><span class=\"crayon-i\">Group</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">Old </span><span class=\"crayon-v\">Mean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37397c00205938662-10\"><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">G</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">I</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">B</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">F</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">19</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37397c00205938662-11\"><span class=\"crayon-r\">New</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Mean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">21</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0106 seconds] -->\r\n<p>不断<strong>重复</strong>第二步直到所有组的均值不再变化。对于这个有些不太好的例子，下一次重复就会达到终止条件。<strong>停止！</strong>现在你已经形成三个聚类的数据集！</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a37397c04933509684\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nGroup 1 (Old Mean = 11)\r\nPlayer C (11 goals), Player I (15 goals)\r\nFinal Mean = 13\r\n\r\nGroup 2 (Old Mean = 4)\r\nPlayer A (5 goals), Player D (5 goals), Player E (3 goals), Player H (3 goals)\r\nFinal Mean = 4\r\n\r\nGroup 3 (Old Mean = 21)\r\nPlayer G (30 goals), Player B (20 goals), Player F (19 goals)\r\nFinal Mean = 23</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397c04933509684-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37397c04933509684-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397c04933509684-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37397c04933509684-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397c04933509684-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37397c04933509684-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397c04933509684-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37397c04933509684-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397c04933509684-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37397c04933509684-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397c04933509684-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a37397c04933509684-1\"><span class=\"crayon-i\">Group</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">Old </span><span class=\"crayon-v\">Mean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37397c04933509684-2\"><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">C</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">I</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37397c04933509684-3\"><span class=\"crayon-m\">Final</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Mean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37397c04933509684-4\"> </div><div class=\"crayon-line\" id=\"crayon-5ac9a37397c04933509684-5\"><span class=\"crayon-i\">Group</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">Old </span><span class=\"crayon-v\">Mean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37397c04933509684-6\"><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">D</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">E</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">H</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37397c04933509684-7\"><span class=\"crayon-m\">Final</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Mean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37397c04933509684-8\"> </div><div class=\"crayon-line\" id=\"crayon-5ac9a37397c04933509684-9\"><span class=\"crayon-i\">Group</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">Old </span><span class=\"crayon-v\">Mean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">21</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37397c04933509684-10\"><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">G</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">B</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">F</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">19</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37397c04933509684-11\"><span class=\"crayon-m\">Final</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Mean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">23</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0210 seconds] -->\r\n<p>在这个例子中，聚类可能对应于球员在场上的位置——如后卫、中场和前锋。k-均值在这里使用因为我们合理地预期数据可以分成这三类。</p>\n<p>通过这种方式，给出一系列性能统计数据，机器可以合理地评估任何团体运动中运动员的位置——这对运动分析很有用，对任何其他的将数据集按照预定义的组别进行分类也可以提供相关的见解。</p>\n<h4 id=\"27e9\" class=\"graf graf--h4 graf-after--p\"><strong>细节：</strong></h4>\n<p id=\"7aa0\" class=\"graf graf--p graf-after--h4\">这个算法有一些变体。对聚类进行“seeding”的初始化方法有好几种方式。在这里，我们将每个球员随机分配到一个小组，然后计算出这些组的均值。这会导致初始生成的组之间的均值很接近，致使后面有更多重复步骤。</p>\n<p class=\"graf graf--p graf-after--h4\">另一种方法是初始化每个聚类时只分配一个球员，然后将其它球员分配到最近的聚类。这样返回的聚类比初始化seeding得到的聚类更有意义，降低了变化很大的数据集中的重复性。但是，这种方法可能会减少完成算法所需的迭代次数，因为这些组将花费较少的时间完成收敛。</p>\n<p class=\"graf graf--p graf-after--h4\">K-均值聚类的一个明显的缺点是你必须提供关于你期望找到多少个聚类的<em>先验</em>假设。 有一些方法可以评估一组特定的聚类结果。 例如，聚类内平方和（<em class=\"markup--em markup--p-em\">Within-Cluster  </em><a href=\"https://en.wikipedia.org/wiki/Partition_of_sums_of_squares\"><em>Sum-of-Squares</em></a>）是每个聚类内方差的度量。 聚类效果越好，整体WCSS越低。</p>\n<h3 id=\"acbe\" class=\"graf graf--h3 graf-after--p\">层次聚类</h3>\n<h4 id=\"1eb8\" class=\"graf graf--h4 graf-after--h3\"><strong>什么时候使用：</strong></h4>\n<p>…你希望发掘出你的观测数据之间的潜在关系。</p>\n<p><strong>如何工作：</strong></p>\n<p id=\"6625\" class=\"graf graf--p graf-after--h4\">计算距离矩阵，其中矩阵元素(i,j)的值是观察值i和j之间的距离度量值。 然后，将最接近的两个观察值进行配对并计算其平均值。通过将配对的观测值合并成一个单一的对象，形成一个新的距离矩阵。 从这个距离矩阵中，配对最近的两个观察值并计算它们的平均值。 重复这个过程，直到所有的观察结果合并在一起。</p>\n<p><strong>实例：</strong></p>\n<p id=\"6bb0\" class=\"graf graf--p graf-after--h4\">这是一个关于鲸鱼和海豚物种选择的超简化数据集。作为一名训练有素的生物学家，我可以向您保证，我们通常会使用更多更详细的数据集来<a href=\"https://en.wikipedia.org/wiki/Phylogenetic_tree\">重建系统发生树</a>。 现在我们来看看这六种物种的典型体长。 我们将只使用两个重复的步骤。</p>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a37397c09203303068\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSpecies          Initials  Length(m)\r\nBottlenose Dolphin     BD        3.0\r\nRisso's Dolphin        RD        3.6\r\nPilot Whale            PW        6.5\r\nKiller Whale           KW        7.5\r\nHumpback Whale         HW       15.0\r\nFin Whale              FW       20.0</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397c09203303068-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37397c09203303068-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397c09203303068-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37397c09203303068-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397c09203303068-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37397c09203303068-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397c09203303068-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a37397c09203303068-1\"><span class=\"crayon-e\">Species          </span><span class=\"crayon-e\">Initials  </span><span class=\"crayon-e\">Length</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">m</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37397c09203303068-2\"><span class=\"crayon-e\">Bottlenose </span><span class=\"crayon-e\">Dolphin     </span><span class=\"crayon-i\">BD</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">3.0</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37397c09203303068-3\"><span class=\"crayon-i\">Risso</span>'<span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Dolphin        </span><span class=\"crayon-i\">RD</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">3.6</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37397c09203303068-4\"><span class=\"crayon-e\">Pilot </span><span class=\"crayon-e\">Whale            </span><span class=\"crayon-i\">PW</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">6.5</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37397c09203303068-5\"><span class=\"crayon-e\">Killer </span><span class=\"crayon-e\">Whale           </span><span class=\"crayon-i\">KW</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">7.5</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37397c09203303068-6\"><span class=\"crayon-e\">Humpback </span><span class=\"crayon-e\">Whale         </span><span class=\"crayon-i\">HW</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">15.0</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37397c09203303068-7\"><span class=\"crayon-e\">Fin </span><span class=\"crayon-e\">Whale              </span><span class=\"crayon-i\">FW</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">20.0</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0027 seconds] -->\r\n<p></p>\n<p class=\"graf graf--p graf-after--h4\"><strong>步骤1：</strong>计算每个物种之间的距离矩阵。在这里，我们将使用<a href=\"https://en.wikipedia.org/wiki/Euclidean_distance\">欧式距离</a>——数据点之间的距离。你可以计算出距离就像在道路图上查看距离图一样。可以通过读取相关行和列的交点处的值来查找任何物种对之间的长度差异。</p>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a37397c0c546558723\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n    BD   RD   PW   KW   HW\r\nRD  0.6                    \r\nPW  3.5  2.9               \r\nKW  4.5  3.9  1.0          \r\nHW 12.0 11.4  8.5  7.5     \r\nFW 17.0 16.4 13.5 12.5  5.0</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397c0c546558723-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37397c0c546558723-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397c0c546558723-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37397c0c546558723-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397c0c546558723-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37397c0c546558723-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a37397c0c546558723-1\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">BD   </span><span class=\"crayon-e\">RD   </span><span class=\"crayon-e\">PW   </span><span class=\"crayon-e\">KW   </span><span class=\"crayon-e\">HW</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37397c0c546558723-2\"><span class=\"crayon-i\">RD</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.6</span><span class=\"crayon-h\">                    </span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37397c0c546558723-3\"><span class=\"crayon-i\">PW</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">3.5</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2.9</span><span class=\"crayon-h\">               </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37397c0c546558723-4\"><span class=\"crayon-i\">KW</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">4.5</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">3.9</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-h\">          </span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37397c0c546558723-5\"><span class=\"crayon-i\">HW</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11.4</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">8.5</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">7.5</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37397c0c546558723-6\"><span class=\"crayon-i\">FW</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16.4</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13.5</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12.5</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">5.0</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p></p>\n<p id=\"7109\" class=\"graf graf--p graf-after--pre\"><strong>步骤2：</strong>配对两个最接近的物种。在这里，两个最接近的物种是宽吻海豚和灰海豚，平均长度为3.3米。</p>\n<p id=\"d409\" class=\"graf graf--p graf-after--p\"><strong>重复</strong>步骤1重新计算距离矩阵，但是这次将宽吻海豚和灰海豚合并成长度为3.3m的单个对象。</p>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a37397c10069201587\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n    [BD, RD]   PW   KW   HW\r\nPW       3.2               \r\nKW       4.2   1.0          \r\nHW      11.7   8.5  7.5     \r\nFW      16.7  13.5 12.5  5.0</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397c10069201587-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37397c10069201587-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397c10069201587-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37397c10069201587-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397c10069201587-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a37397c10069201587-1\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">BD</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RD</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">   </span><span class=\"crayon-e\">PW   </span><span class=\"crayon-e\">KW   </span><span class=\"crayon-e\">HW</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37397c10069201587-2\"><span class=\"crayon-i\">PW</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">3.2</span><span class=\"crayon-h\">               </span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37397c10069201587-3\"><span class=\"crayon-i\">KW</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">4.2</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-h\">          </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37397c10069201587-4\"><span class=\"crayon-i\">HW</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">11.7</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">8.5</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">7.5</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37397c10069201587-5\"><span class=\"crayon-i\">FW</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">16.7</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">13.5</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12.5</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">5.0</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p></p>\n<p id=\"77af\" class=\"graf graf--p graf-after--pre\"><strong>接下来</strong>，用这个新距离矩阵重复步骤2。现在，距离最小的是领航鲸与逆戟鲸，所以我们计算他们的平均——7.0米。</p>\n<p class=\"graf graf--p graf-after--p\"><strong>然后</strong>，我们重复第1步——重新计算距离矩阵，但是现在我们已经将领航鲸与逆戟鲸合并成了一个长度为7.0米的单个对象。</p>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a37397c13970221650\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n         [BD, RD] [PW, KW]   HW\r\n[PW, KW]      3.7              \r\nHW           11.7      8.0     \r\nFW           16.7     13.0   5.0</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397c13970221650-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37397c13970221650-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397c13970221650-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37397c13970221650-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a37397c13970221650-1\"><span class=\"crayon-h\">         </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">BD</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RD</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">PW</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">KW</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">   </span><span class=\"crayon-i\">HW</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37397c13970221650-2\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">PW</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">KW</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">3.7</span><span class=\"crayon-h\">              </span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37397c13970221650-3\"><span class=\"crayon-i\">HW</span><span class=\"crayon-h\">           </span><span class=\"crayon-cn\">11.7</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">8.0</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37397c13970221650-4\"><span class=\"crayon-i\">FW</span><span class=\"crayon-h\">           </span><span class=\"crayon-cn\">16.7</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">13.0</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">5.0</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0112 seconds] -->\r\n<p></p>\n<p id=\"da48\" class=\"graf graf--p graf-after--pre\"><strong>接下来</strong>，我们用这个距离矩阵重复步骤2。最小距离是两个合并对象之间的（3.7米）——现在我们将它们合并成一个更大的对象，并取平均值（即5.2米）。</p>\n<p class=\"graf graf--p graf-after--p\"><strong>然后</strong>，我们重复步骤1并计算一个新的距离矩阵，合并了宽吻海豚和灰海豚与领航鲸与逆戟鲸。</p>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a37397c17793190954\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n   [[BD, RD] , [PW, KW]]    HW\r\nHW                   9.8    \r\nFW                  14.8   5.0</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397c17793190954-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37397c17793190954-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397c17793190954-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a37397c17793190954-1\"><span class=\"crayon-h\">   </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">BD</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RD</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">PW</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">KW</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">    </span><span class=\"crayon-e\">HW</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37397c17793190954-2\"><span class=\"crayon-i\">HW</span><span class=\"crayon-h\">                   </span><span class=\"crayon-cn\">9.8</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37397c17793190954-3\"><span class=\"crayon-i\">FW</span><span class=\"crayon-h\">                  </span><span class=\"crayon-cn\">14.8</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">5.0</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p></p>\n<p id=\"cf09\" class=\"graf graf--p graf-after--pre\"><strong>接下来</strong>，我们重复步骤2。最小的距离（5.0米）在座头鲸与长须鲸之间，所以我们将它们合并成一个单一的对象，取平均值（17.5米）。</p>\n<p id=\"a88d\" class=\"graf graf--p graf-after--p\"><strong>然后</strong>，返回步骤1——计算距离矩阵，座头鲸与长须鲸已经合并。</p>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a37397c1b815143350\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n         [[BD, RD] , [PW, KW]]\r\n[HW, FW]                  12.3</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397c1b815143350-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37397c1b815143350-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a37397c1b815143350-1\"><span class=\"crayon-h\">         </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">BD</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RD</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">PW</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">KW</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37397c1b815143350-2\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">HW</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">FW</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">                  </span><span class=\"crayon-cn\">12.3</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p></p>\n<p class=\"graf graf--p graf-after--p\"><strong>最后</strong>，我们重复步骤2——在这个矩阵中只有一个距离（12.3米），我们把所有东西都放在一个大对象中，现在我们可以停下来了！我们来看看最后的合并对象：</p>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a37397c1f637394881\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[[[BD, RD],[PW, KW]],[HW, FW]]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397c1f637394881-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a37397c1f637394881-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">BD</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RD</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">PW</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">KW</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">HW</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">FW</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0033 seconds] -->\r\n<p></p>\n<p class=\"graf graf--p graf-after--p\">它有一个嵌套的结构（可以认为是<a href=\"http://json.org/example.html\">JSON</a>），可以把它绘制成一个树状的图形或者树形图。 它读取的方式与家谱相同。 两个观察结果在树上离得越近，就被认为是更相似或更密切相关的。</p>\n<div class=\"aspectRatioPlaceholder is-locked\"> <img src=\"http://wx4.sinaimg.cn/mw690/63918611gy1fpachtrft4j20dc0dc3yh.jpg\"></div>\n<p class=\"graf graf--p graf-after--p\">在<a href=\"http://www.r-fiddle.org/#\">R-Fiddle.org</a>上生成一个简单的树状图</p>\n<p id=\"e2dc\" class=\"graf graf--p graf-after--figure\">树状图的结构使我们能够深入了解数据集的结构。在我们的例子中，我们看到两个主要分支，一个分支是 HW 和 FW，另一个是 BD、RD、PW、KW。</p>\n<p id=\"5b08\" class=\"graf graf--p graf-after--p\">在进化生物学中，具有更多样本和测量的更大的数据集以这种方式被用来推断它们之间的分类关系。 除了生物学之外，层次聚类在数据挖掘和机器学习环境中也有应用。</p>\n<p id=\"a111\" class=\"graf graf--p graf-after--p\">很酷的是，这种方法不需要假设你正在寻找的聚类数量。 您可以通过在给定高度“切割”树来将返回的树形图划分为聚类。 这个高度可以通过多种方式进行选择，具体取决于你希望对数据进行聚类的分辨率。</p>\n<p id=\"c890\" class=\"graf graf--p graf-after--p\">例如，从上面的树状图可以看出，如果我们在高度为10的情况下绘制一条水平线，我们就会将两条主要分支分割，将树状图分成两个子图。 如果我们在高度= 2切割，树状图就被分成三个聚类。</p>\n<p><strong>细节：</strong></p>\n<p id=\"a2ce\" class=\"graf graf--p graf-after--h4\">关于层次聚类算法可以出现的变化，基本上有三个方面。</p>\n<p class=\"graf graf--p graf-after--h4\">最根本的是方法——在这里，我们使用了一个<em>凝聚</em>的过程，我们从单个数据点开始，并将它们迭代地聚集在一起，直到剩下一个大聚类。 另一种（但是计算量更大）的方法是从一个大聚类开始，然后将数据分成越来越小的聚类，直到剩下孤立的数据点为止。</p>\n<p class=\"graf graf--p graf-after--h4\">还有一系列的方法可以用来计算距离矩阵。 很多情况下，欧几里得距离（参考毕达哥拉斯定理）就足够了，但是在某些情况下还有其他可能更适用的选择。</p>\n<p class=\"graf graf--p graf-after--h4\">最后，连接标准也可以变化。 聚类根据彼此之间的距离而相互连接，但是我们定义“近”的方式是灵活的。 在上面的例子中，我们测量了每个组的平均值（或“质心”）之间的距离，并将最近的组进行配对。 但是， 你可能想要使用其他的定义。</p>\n<p class=\"graf graf--p graf-after--h4\">例如，每个聚类由多个离散点组成。 我们可以将两个聚类之间的距离定义为任意点之间的最小（或最大）距离——如下图所示。 还有其他方法来定义连接标准，它们可能适用于不同的环境。</p>\n<p class=\"graf graf--p graf-after--h4\"><img src=\"http://wx2.sinaimg.cn/mw690/63918611gy1fpachuzciuj20m80cgmyu.jpg\"></p>\n<p class=\"graf graf--p graf-after--h4\" style=\"text-align: center;\">红/蓝：形心连接；红色/绿色：最少连接；绿/蓝：最大连接</p>\n<h3 id=\"b664\" class=\"graf graf--h3 graf-after--figure\">图社区发现</h3>\n<h4 id=\"f884\" class=\"graf graf--h4 graf-after--h3\"><strong>什么时候使用：</strong></h4>\n<p id=\"7a65\" class=\"graf graf--p graf-after--h4\">…你可以将数据表示为网络或“图”的时候。</p>\n<h4 id=\"71dc\" class=\"graf graf--h4 graf-after--p\"><strong>如何工作：</strong></h4>\n<p id=\"6e96\" class=\"graf graf--p graf-after--h4\">图中的社区通常被定义为与网络其余部分相比，彼此连接更多的顶点的子集。 存在各种算法来基于更具体的定义来识别社区。 算法包括但不限于：Edge Betweenness，Modularity-Maximsation，Walktrap，Clique Percolation，Leading Eigenvector …</p>\n<h4 id=\"6699\" class=\"graf graf--h4 graf-after--p\"><strong>实现例子：</strong></h4>\n<p id=\"6cc8\" class=\"graf graf--p graf-after--h4\"><a href=\"https://en.wikipedia.org/wiki/Graph_theory\">图论</a>或网络的数学研究是数学的一个有趣的分支，它让我们将复杂系统建模为由“线”（或边）连接的“点”（或顶点）的抽象集合。</p>\n<p id=\"a226\" class=\"graf graf--p graf-after--p\">最直观的案例研究也许就是社交网络了。在这里，顶点代表人，边连接的是朋友/关注者的顶点。 然而，如果你能证明一个方法可以有意义地连接不同的部分，任何系统都可以被建模为一个网络。 图论中聚类的创新应用包括从图像数据中提取特征，分析基因调控网络。</p>\n<p id=\"30e4\" class=\"graf graf--p graf-after--p\">作为一个入门级的例子，看看这个快速组合在一起的图。 它显示了我最近访问过的八个网站，根据它们各自的维基百科文章是否彼此连接而连接在一起。 您可以手动组合这些数据，但是对于大型项目，编写Python脚本执行相同的操作要快得多。<a href=\"https://raw.githubusercontent.com/pg0408/Medium-articles/master/graph_maker.py\">这是我之前写的一个</a>。</p>\n<p id=\"3c6b\" class=\"graf graf--p graf-after--figure\"><img src=\"http://wx2.sinaimg.cn/mw690/63918611gy1fpachw50t6j20et093gm1.jpg\"></p>\n<p class=\"graf graf--p graf-after--figure\">根据其社区成员对顶点进行着色，并根据其中心位置来确定大小。 看看Google和Twitter是最中心的吧？</p>\n<p class=\"graf graf--p graf-after--p\">而且，这些聚类在现实世界中也很有意义（一直一个重要的性能指标）。黄色的顶点通常是参考/搜索网站；蓝色顶点全部用于在线发布（文章，推文或代码）；红色的顶点包括YouTube，因为Youtube是由前PayPal员工创建的。 机器推论的不错！</p>\n<p class=\"graf graf--p graf-after--p\">除了作为有用的大型系统可视化的方式之外，网络的真正威力是其数学分析。 让我们开始把我们的这张网络图片变成一种更加数学的格式。 以下是网络的邻接矩阵。</p>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a37397c26543539318\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n         GH Gl  M  P  Q  T  W  Y\r\nGitHub    0  1  0  0  0  1  0  0  \r\nGoogle    1  0  1  1  1  1  1  1\r\nMedium    0  1  0  0  0  1  0  0\r\nPayPal    0  1  0  0  0  1  0  1\r\nQuora     0  1  0  0  0  1  1  0\r\nTwitter   1  1  1  1  1  0  0  1\r\nWikipedia 0  1  0  0  1  0  0  0\r\nYouTube   0  1  0  1  0  1  0  0</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397c26543539318-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37397c26543539318-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397c26543539318-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37397c26543539318-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397c26543539318-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37397c26543539318-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397c26543539318-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37397c26543539318-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397c26543539318-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a37397c26543539318-1\"><span class=\"crayon-h\">         </span><span class=\"crayon-e\">GH </span><span class=\"crayon-i\">Gl</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">M</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">P</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">Q</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">T</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">W</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">Y</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37397c26543539318-2\"><span class=\"crayon-i\">GitHub</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37397c26543539318-3\"><span class=\"crayon-i\">Google</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37397c26543539318-4\"><span class=\"crayon-i\">Medium</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37397c26543539318-5\"><span class=\"crayon-i\">PayPal</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37397c26543539318-6\"><span class=\"crayon-i\">Quora</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37397c26543539318-7\"><span class=\"crayon-i\">Twitter</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37397c26543539318-8\"><span class=\"crayon-i\">Wikipedia</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37397c26543539318-9\"><span class=\"crayon-i\">YouTube</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0032 seconds] -->\r\n<p></p>\n<p id=\"7ad5\" class=\"graf graf--p graf-after--pre\">每行和每列交点处的值记录该对顶点之间是否存在边。例如，Medium和Twitter之间存在一条边（惊喜！），所以它们的行/列相交的值是1。同样，Medium和PayPal之间没有边，所以它们行/列交点的值为0。</p>\n<p id=\"fd3d\" class=\"graf graf--p graf-after--p\">在邻接矩阵内进行编码就会得到这个网络的所有属性——它给了我们解锁各种有价值见解的钥匙。首先，将任意列（或行）相加，就可以得出每个顶点的度数——即连接了多少个顶点。通常用字母<em>k</em>表示。</p>\n<p id=\"7634\" class=\"graf graf--p graf-after--p\">同样，将每个顶点的度数相加并除以2得到L，即网络中边（或“连接”）的数量。行数/列数即网络中顶点（或“节点”）的数量，用<em>N</em>表示。</p>\n<p id=\"bc6b\" class=\"graf graf--p graf-after--p\">知道<em>k</em>，<em>L</em>，<em>N</em>和邻接矩阵<em>A</em>中每个单元的值，就可以计算任意给定的网络聚类的<em><a href=\"https://en.wikipedia.org/wiki/Modularity_%28networks%29\">模块性</a></em>。</p>\n<p id=\"facf\" class=\"graf graf--p graf-after--p\">假设我们已经将网络聚类成了一些社区。我们可以使用模块性评分来评估这个聚类的“质量”。更高的分数将表明我们已经把网络分成了“准确”的社区，而低分表明我们的聚类更随机。下面的图片说明了这一点。</p>\n<figure id=\"b803\" class=\"graf graf--figure graf-after--p\">\n<figcaption class=\"imageCaption\"><img src=\"http://wx4.sinaimg.cn/mw690/63918611gy1fpachxk96wj20m80aggnj.jpg\"></figcaption>\n<figcaption class=\"imageCaption\">模块性是衡量分区“质量”的指标。</figcaption>\n</figure>\n<p id=\"e812\" class=\"graf graf--p graf-after--figure\">模块性可以使用下面的公式计算：</p>\n<p id=\"4d1a\" class=\"graf graf--p graf-after--figure\"><img src=\"http://wx1.sinaimg.cn/mw690/63918611gy1fpachz41ulj20m8089t94.jpg\"></p>\n<p class=\"graf graf--p graf-after--figure\">这个公示包含相当数量的数学知识，但我们可以一点一点地分解它，使它更好理解。</p>\n<p class=\"graf graf--p graf-after--p\"><em>M</em>当然是我们正在计算的——模块性。</p>\n<p class=\"graf graf--p graf-after--p\">1/2<em>L</em>告诉我们把后面所有的东西除以2<em>L</em>，即网络中边的数量的两倍。到现在为止，一切都很好理解。</p>\n<p class=\"graf graf--p graf-after--figure\"><strong>Σ</strong>符号告诉我们对右边的所有东西求和，并迭代邻接矩阵<em>A</em>中的每一行和列。对于那些不熟悉求和符号的人来说，<em>i，j = 1</em>和<em>N</em>的作用非常像编程中的嵌套for循环。在Python中，你可以这样写：</p>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a37397c2b836143027\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsum = 0\r\n\r\nfor i in range(1,N):\r\n    for j in range(1,N):\r\n        ans = #stuff with i and j as indices\r\n        sum += ans</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397c2b836143027-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37397c2b836143027-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397c2b836143027-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37397c2b836143027-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397c2b836143027-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37397c2b836143027-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a37397c2b836143027-1\"><span class=\"crayon-v\">sum</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37397c2b836143027-2\"> </div><div class=\"crayon-line\" id=\"crayon-5ac9a37397c2b836143027-3\"><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">range</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">N</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37397c2b836143027-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">range</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">N</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37397c2b836143027-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">ans</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#stuff with i and j as indices</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37397c2b836143027-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">sum</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ans</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p></p>\n<p class=\"graf graf--p graf-after--figure\"><code class=\"markup--code markup--p-code\">那么#stuff with i and j</code> 具体是什么？</p>\n<p id=\"1f91\" class=\"graf graf--p graf-after--p\">括号里的东西告诉我们从<em>A_ij</em>中减去<em>（k_i k_j）/ 2L</em>。</p>\n<p id=\"4555\" class=\"graf graf--p graf-after--p\"><em>A_ij</em>是邻接矩阵中第<em>i</em>行第<em>j</em>列的值。</p>\n<p id=\"1ca6\" class=\"graf graf--p graf-after--p\"><em>k_i</em>和<em>k_j</em>的值是每个顶点的度数——通过将第<em>i</em>行和第<em>j</em>列中的项分别相加而得到。将它们相乘并除以<em>2L</em>得到如果网络是随机分布的顶点<em>i</em>和<em>j</em>之间的期望的边数。</p>\n<p class=\"graf graf--p graf-after--p\">总的来说，括号中的项表示网络的真实结构和随机重组的预期结构之间的差异。研究这个值表明，当<em>A_ij = 1，（k_i k_j）/ 2L</em>小的时候，它返回最大值。这意味着如果在顶点<em>i</em>和<em>j</em>之间存在“非预期”边缘，我们会看到更大的值。</p>\n<p class=\"graf graf--p graf-after--p\">最后，我们将括号中的项和后面几个符号相乘。</p>\n<p class=\"graf graf--p graf-after--p\"><em>δc_i</em>，<em>c_j</em>就是有名的 <em class=\"markup--em markup--p-em\">Kronecker-delta </em><em>函数</em>。 这里是其Python解释：</p>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ac9a37397c2f330290163\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef Kronecker_Delta(ci, cj):\r\n    if ci == cj:\r\n        return 1\r\n    else:\r\n        return 0\r\n\r\nKronecker_Delta(\"A\",\"A\")    #returns 1\r\nKronecker_Delta(\"A\",\"B\")    #returns 0</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397c2f330290163-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37397c2f330290163-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397c2f330290163-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37397c2f330290163-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397c2f330290163-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37397c2f330290163-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ac9a37397c2f330290163-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ac9a37397c2f330290163-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ac9a37397c2f330290163-1\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">Kronecker_Delta</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ci</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cj</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37397c2f330290163-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ci</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cj</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37397c2f330290163-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37397c2f330290163-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5ac9a37397c2f330290163-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37397c2f330290163-6\"> </div><div class=\"crayon-line\" id=\"crayon-5ac9a37397c2f330290163-7\"><span class=\"crayon-e\">Kronecker_Delta</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"A\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"A\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#returns 1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ac9a37397c2f330290163-8\"><span class=\"crayon-e\">Kronecker_Delta</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"A\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"B\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#returns 0</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0082 seconds] -->\r\n<p></p>\n<p class=\"graf graf--p graf-after--p\">是的——这真的很简单。Kronecker-delta函数有两个参数，如果相同则返回1，否则返回0。</p>\n<p class=\"graf graf--p graf-after--p\">这意味着如果顶点i和j已经被放入同一个聚类中，则δc_i，c_j = 1。否则，如果它们在不同的聚类中，则该函数返回0。</p>\n<p class=\"graf graf--p graf-after--p\">我们用这个Kronecker-delta函数乘以括号中的项，我们发现对于嵌套总和Σ，当分配给同一个聚类很多“非预期”的连接顶点的边时，其结果是最高的。因此，模块性是衡量图如何聚类到不同社区中的一种衡量标准。</p>\n<p id=\"7643\" class=\"graf graf--p graf-after--p\">除以<em>2L</em>这一操作将模块性的上限值界定为1。模块性分数接近或低于0表示网络的当前聚类实际上是无用的。模块性值越高，网络分散到不同社区的聚类越好。通过最大化模块性，我们可以找到聚类网络的最佳方式。</p>\n<p id=\"4f28\" class=\"graf graf--p graf-after--p\">请注意，我们必须预先定义图形如何聚类，以找出聚类实际上的“好”。不幸的是，使用暴力对图的每一种可能的聚类方式进行计算，以找到<br>\n具有最高模块性分数的方式，即使是在有限样本大小的情况下也是不可能的。</p>\n<p class=\"graf graf--p graf-after--p\"><a href=\"https://en.wikipedia.org/wiki/Partition_of_a_set#Counting_partitions\">组合学</a>告诉我们，对于只有8个顶点的网络，有4140种不同的聚类方式。 规模两倍的16个顶点的网络将有超过一百亿种可能的聚集顶点的方式。再次将网络加倍（对一个非常适中的32个顶点）将会产生128 septillion （128*10^24）种可能的方式，而且有八十个顶点的网络的聚类方式将比<a href=\"https://www.wolframalpha.com/input/?i=991267988808424794443839434655920239360814764000951599022939879419136287216681744888844&amp;lk=1&amp;rawformassumption=%22ClashPrefs%22+-%3E+%7B%22Math%22%7D\">宇宙中可观察的原子数还多</a>。</p>\n<p class=\"graf graf--p graf-after--p\">所以，我们不得不转向一种<em>启发式的</em>方法，该方法在评估可以产生最高模块性分数的聚类方面做得相当不错，而不是尝试每一种可能性。 这是一种叫Fast-Greedy Modularity-Maximization的算法，它有点类似于上面描述的凝聚层次聚类算法。 “Mod-Max”不是根据距离进行合并，而是根据模块性的变化来合并。它是这样工作的：</p>\n<p id=\"db81\" class=\"graf graf--p graf-after--p\"><strong>首先</strong>将每个顶点分配到自己的社区，然后计算整个网络的模块性。</p>\n<p id=\"80a1\" class=\"graf graf--p graf-after--p\"><strong>第一步</strong>要求每一个社区至少被一条单边连接，如果两个社区合并为一个，算法计算模块性的变化结果<em>ΔM</em>。</p>\n<p id=\"09cd\" class=\"graf graf--p graf-after--p\">然后，<strong>步骤2</strong>将使得<em>ΔM</em>增加最多的一对社区合并。为这个聚类计算新的模块性<em>M</em>，并记录下来。</p>\n<p id=\"8228\" class=\"graf graf--p graf-after--p\"><strong>重复</strong>步骤1和2——每次合并产生最大<em>ΔM</em>增益的社区，然后记录新的聚类模式及其相关的模块性评分<em>M</em>。</p>\n<p id=\"80a6\" class=\"graf graf--p graf-after--p\">当所有的顶点被分成一个大聚类时<strong>停下来</strong>。现在，算法检查它整个过程的记录，并确定返回最高值<em>M</em>的聚类模式。这就是返回的社区结构。</p>\n<p><strong>细节：</strong></p>\n<p id=\"37cf\" class=\"graf graf--p graf-after--h4\">这需要进行的计算太多了，至少对于我们人类来说。图论中有丰富的计算难题，通常是NP-hard问题，但它也具有难以置信的潜力，为复杂的系统和数据集提供有价值的见解。与Larry Page同名的PageRank算法——帮助Google在不到一代人的时间里从初创阶段发展到了几乎统治世界——完全基于图论。</p>\n<p id=\"8eec\" class=\"graf graf--p graf-after--p\">社区发现是当前图论研究的一个焦点问题，模块性最大化有许多替代方案，虽然有用，但也有一些缺点。</p>\n<p id=\"7379\" class=\"graf graf--p graf-after--p\">一开始，其聚集的方法往往将小而明确的社区吞并为大的社区。 这就是所谓的分辨率限制——算法不会在一定大小以内找到社区。 另一个挑战是，Mod-Max方法实际上倾向于产生许多具有类似的高模块性分数组成的“高原”，而不是一个独特的，易于到达的全局高峰值，这导致有时候难以确定最大分数。</p>\n<p id=\"3c5a\" class=\"graf graf--p graf-after--p\">其他算法使用不同的方式来定义和处理社区发现。<em class=\"markup--em markup--p-em\">Edge-Betweenness</em>是一个分裂的算法，从所有顶点分组在一个大聚类开始。持续迭代去除网络中最不重要的边，直到所有的顶点都被分开。这个过程产生了一个层级结构，类似的顶点在层级结构中更接近。</p>\n<p id=\"dd08\" class=\"graf graf--p graf-after--p\">另一种算法是<em class=\"markup--em markup--p-em\">Clique Percolation</em>，它考虑了图社区之间可能的重叠。 还有另一组算法是基于图上的<a href=\"https://en.wikipedia.org/wiki/Random_walk\">随机漫步</a>，然后是<em><a href=\"https://en.wikipedia.org/wiki/Spectral_clustering\">谱聚类</a></em>方法，它从邻接矩阵和由其导出的其它矩阵的特征分解开始研究。这些方法被用于例如计算机视觉等领域的特征提取。</p>\n<p id=\"b391\" class=\"graf graf--p graf-after--p\">给每个算法提供一个深入的实例，这已经远远超出了本文的范围。我想说的是，这是一个活跃的研究领域，它提供了强大的方法来理解数据，即使在十年前还是个非常困难的过程。</p>\n<h3 id=\"6ec6\" class=\"graf graf--h3 graf-after--p\">结论</h3>\n<p id=\"4fee\" class=\"graf graf--p graf-after--h3\">希望这篇文章能够让你更好地理解机器如何理解大数据。未来瞬息万变，其中许多变化将由在下一代或两代中的产生的技术所驱动。</p>\n<p id=\"e236\" class=\"graf graf--p graf-after--p\">正如介绍中所概述的，机器学习是一个雄心勃勃的研究领域，其中大量复杂的问题需要尽可能准确和高效地解决。对于我们人类来说任何容易完成的任务都需要机器采取创新的解决方案。</p>\n<p id=\"49ba\" class=\"graf graf--p graf-after--p graf--trailing\">这个领域内还有很大的进步空间，谁来贡献下一个突破的想法，无疑将会得到丰厚的回报。 也许读了这篇文章的某个人就会发明下一个强大的算法？所有伟大的想法都必须从某处开始！</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113745\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113745votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113745\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/shaoai37\">LynnShaw</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/shaoai37\">\r\n\t\t\t<img src=\"http://www.jobbole.com/wp-content/uploads/avatars/104743/4e04a90ce037ac8e7d76fe8ac03d6610-bpthumb.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            微博：@萧萧萧宁        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/shaoai37\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/shaoai37/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/shaoai37/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 35</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>\r\n\t<!-- END .entry -->\r\n\r\n\r\n<script type=\"text/javascript\">\r\nvar jiathis_config={\r\n\tdata_track_clickback:false,\r\n\ttitle:\"分享从伯乐在线看到的一篇好文章 \",\r\n\tsummary:\"《计算机如何感知大数据——聚类算法》\",\r\n\tpic:\"http://wx4.sinaimg.cn/mw690/63918611gy1fpachr4a3bj20rs0daags.jpg\",\r\n\tappkey:{\r\n         \"tsina\": 1473879058    },\r\n\tralateuid:{\r\n\t\t\"tsina\": 1670481425\t},\r\n\thideMore:false\r\n}\r\n</script>\r\n<script type=\"text/javascript\" src=\"http://v3.jiathis.com/code/jia.js?uid=1745061\" charset=\"utf-8\"></script>\r\n<!-- JiaThis Button END -->\r\n\t\t\t<div class=\"textwidget\"><p><a href=\"http://group.jobbole.com/22945/\" target=\"_blank\"><img src=\"http://wx1.sinaimg.cn/mw690/bfdcef89gy1fq547hqqaij20h803cgm9.jpg\"></a></p>\n</div>\n\t\t\r\n</div>\r\n<!-- END .post -->\r\n            <div style=\"text-align: left;\">\r\n            <h3>相关文章</h3>\r\n            <ul style=\"font-size: 13px; list-style: disc inside;\">\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"当今世界最NB的25位大数据科学家\" target=\"_blank\" href=\"http://blog.jobbole.com/109186/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">当今世界最NB的25位大数据科学家</a>\r\n                         · <a href=\"http://blog.jobbole.com/109186/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 1</a>                    </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"Apache Spark：大数据处理统一引擎\" target=\"_blank\" href=\"http://blog.jobbole.com/108564/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">Apache Spark：大数据处理统一引擎</a>\r\n                                            </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"漫画：什么是大数据？\" target=\"_blank\" href=\"http://blog.jobbole.com/107507/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">漫画：什么是大数据？</a>\r\n                         · <a href=\"http://blog.jobbole.com/107507/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 7</a>                    </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"大数据到底是什么鬼\" target=\"_blank\" href=\"http://blog.jobbole.com/105016/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">大数据到底是什么鬼</a>\r\n                                            </span>\r\n                    </li>\r\n                                    <li>\r\n                    <span class=\"digg-item-updated-title\">\r\n                        <a title=\"4个小例子告诉你，如何成为一名数据极客\" target=\"_blank\" href=\"http://blog.jobbole.com/102268/?utm_source=blog.jobbole.com&amp;utm_medium=relatedPosts\">4个小例子告诉你，如何成为一名数据极客</a>\r\n                                            </span>\r\n                    </li>\r\n                            </ul>\r\n        </div>\r\n    \r\n    \n<div style=\"text-align: left;\">\n    <h3>可能感兴趣的话题</h3>\n    <ul style=\"font-size: 13px; list-style: disc inside;\">\n                        <li>\n                    <a href=\"http://group.jobbole.com/33039/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"Eng  ---  React ,Vue ,Angular全家桶套餐外的另一种超轻量级实现方式 (16kb)\" target=\"_blank\">Eng  ---  React ,Vue ,Angular全家桶套餐外的另一种超轻量级实...</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/33038/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"28岁刚入门，靠谱不？\" target=\"_blank\">28岁刚入门，靠谱不？</a>\n                     · <a href=\"http://group.jobbole.com/33038/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 7</a>                </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32985/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"工作四年，该如何晋级架构师？\" target=\"_blank\">工作四年，该如何晋级架构师？</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32958/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"java 的nio和网络编程nio 的区别\" target=\"_blank\">java 的nio和网络编程nio 的区别</a>\n                                    </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32933/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"工作压力大，然后出错多。。然后工作压力大。该怎么调整自己的状态……\" target=\"_blank\">工作压力大，然后出错多。。然后工作压力大。该怎么调整自己的状态……</a>\n                     · <a href=\"http://group.jobbole.com/32933/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 5</a>                </li>\n                            <li>\n                    <a href=\"http://group.jobbole.com/32879/?utm_source=blog.jobbole.com&amp;utm_medium=article-related-group-topic\" title=\"是去北上广深闯几年还是留在二线城市？\" target=\"_blank\">是去北上广深闯几年还是留在二线城市？</a>\n                     · <a href=\"http://group.jobbole.com/32879/#comments\" target=\"_blank\"><i class=\"fa fa-comments-o\"></i> 2</a>                </li>\n                </ul>\n</div>\r\n\t\n            <div id=\"article-comment\" class=\"dot-box center-align\">\n\n                        <a href=\"http://www.jobbole.com/login?redirect=http://blog.jobbole.com/113745/\"><button type=\"button\" class=\"btn btn-non-transparent\">登录后评论</button></a>\n            \n            <a target=\"_blank\" href=\"http://www.jobbole.com/register\"><button type=\"button\" class=\"btn btn-primary\">新用户注册</button></a>\n\n            <br><br>\n            <span>直接登录</span>\n            <style type=\"text/css\">.t_login_text{margin:0; padding:0;}.t_login_button{margin:0; padding: 5px 0;}.t_login_button a{margin:0; padding-right:3px; line-height:25px}.t_login_button img{display:inline; border:none;}</style><!-- 使用社交帐号登录 来自 WordPress连接微博 插件 --><span class=\"connectBox1 t_login_button\"><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=weixin&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113745%2F\" title=\"微信\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_weixin.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=qzone&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113745%2F\" title=\"QQ\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_qzone.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=sina&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113745%2F\" title=\"新浪微博\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_sina.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=douban&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113745%2F\" title=\"豆瓣\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_douban.png\"></a><a href=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/login.php?go=github&amp;redirect_url=http%3A%2F%2Fblog.jobbole.com%2F113745%2F\" title=\"GitHub\" rel=\"nofollow\"><img src=\"http://blog.jobbole.com/wp-content/plugins/wp-connect/images/login/btn_github.png\"></a></span>        </div>\n    \n\n    <div id=\"comment_list\" class=\"comments\">\n\n        \n    </div>\n\t\t\r\n\r\n\t\r\n</div>", "tag": "IT技术-图论-大数据-聚类", "url": "http://blog.jobbole.com/113745/", "url_object_id": "19e4dca035c34d14347d07439ad43f77", "front_image_url": ["http://wx4.sinaimg.cn/mw690/63918611gy1fpachr4a3bj20rs0daags.jpg"], "front_image_path": "full/7c651e0fce13acb304e7b99f8851cc540be4decd.jpg"}
